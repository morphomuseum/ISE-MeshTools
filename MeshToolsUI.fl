# data file for the Fltk User Interface Designer (fluid)
version 1.0303 
header_name {MeshToolsUI.h} 
code_name {MeshToolsUI.cxx}
class MeshToolsUI {open
} {
  Function {MeshToolsUI()} {open
  } {
    Fl_Window mainWindow {
      label {Interactive SoftwarE : MeshTools}
      callback {options_hide();
cam_hide();
exit(0);} open selected
      private image {pixmap/s_face.gif} xywh {194 214 1000 700} type Double box UP_BOX color 55 labelsize 12 align 8 when 1 resizable visible
    } {
      Fl_Group Top {open
        xywh {0 0 1002 50}
      } {
        Fl_Group Unresizable {open
          xywh {0 0 949 50}
        } {
          Fl_Button Del {
            callback {int test;
test = fl_ask("Do you really want to delete  ?");
if (test ==1)
{
	MT->Delete();			
	MT->redraw();
	
}}
            tooltip Delete image {./pixmap/delete2.gif} xywh {0 25 25 23} color 55
          }
          Fl_Menu_Button File {
            label File
            xywh {0 0 55 25} color 55 labelcolor 32
          } {
            MenuItem Generic_Open_Surface {
              label {Open Surface}
              callback {MT->Open_Mesh_File();
sc_update2();}
              xywh {0 0 30 20}
            }
            Submenu Save_Surface {
              label {Save Surface}
              xywh {30 30 100 20}
            } {
              MenuItem Save_PLY {
                label {Save PLY}
                callback {MT->Compute_Name_Lists();
int ok=1;
if (g_selected_names.size()==0)
{
	fl_alert("At least one mesh must be selected");
	ok =0;
}
else if (g_selected_names.size()>1)
{
	ok = fl_ask("More than one mesh are currently selected. Do you want to save all selected meshes into one single mesh file?");	
}


if (ok==1)
{
	ply_show();
}}
                xywh {70 70 100 20}
              }
              MenuItem Save_STL {
                label {Save STL}
                callback {MT->Compute_Name_Lists();
int ok=1;
if (g_selected_names.size()==0)
{
	fl_alert("At least one mesh must be selected");
	ok =0;
}
else if (g_selected_names.size()>1)
{
	ok = fl_ask("More than one mesh are currently selected. Do you want to save all selected meshes into one single mesh file?");	
}


if (ok==1)
{
	stl_show();
}}
                xywh {40 40 100 20}
              }
              MenuItem Save_VTK {
                label {Save VTK}
                callback {MT->Compute_Name_Lists();
int ok=1;
if (g_selected_names.size()==0)
{
	fl_alert("At least one mesh must be selected");
	ok =0;
}
else if (g_selected_names.size()>1)
{
	ok = fl_ask("More than one mesh are currently selected. Do you want to save all selected meshes into one single mesh file?");	
}


if (ok==1)
{
	vtk_show();
}}
                xywh {50 50 100 20}
              }
              MenuItem Save_OBJ {
                label {Save OBJ}
                callback {MT->Compute_Name_Lists();
int ok=1;
if (g_selected_names.size()==0)
{
	fl_alert("At least one mesh must be selected");
	ok =0;
}
else if (g_selected_names.size()>1)
{
	ok = fl_ask("More than one mesh are currently selected. Do you want to save all selected meshes into one single mesh file?");	
}


if (ok==1)
{
	obj_show();
}}
                xywh {60 60 100 20}
              }
            }
            Submenu Position_submenu {
              label Position
              xywh {30 30 100 20}
            } {
              MenuItem Load_POS {
                label {Load Position}
                callback {MT->Compute_Name_Lists();
int ok=1;
if (g_selected_names.size()==0)
{
	fl_alert("No mesh selected. Please select at least one mesh.");
	ok =0;
}
else if (g_selected_names.size()>1)
{
	ok = fl_ask("More than one mesh are currently selected. Do you want to give the same position to all selected meshes?");	
}

if (ok==1)
{

	MT->Open_POS_File();
	MT->redraw();
}}
                xywh {50 50 100 20} labelcolor 32
              }
              MenuItem Load_POS_Inv {
                label {Load Transposed Position}
                callback {MT->Compute_Name_Lists();
int ok=1;
if (g_selected_names.size()==0)
{
	fl_alert("No mesh selected. Please select at least one mesh.");
	ok =0;
}
else if (g_selected_names.size()>1)
{
	ok = fl_ask("More than one mesh are currently selected. Do you want to give the same position to all selected meshes?");	
}

if (ok==1)
{
	MT->Open_POS_File_Inv();
	MT->redraw();
}}
                xywh {60 60 100 20} labelcolor 56
              }
              MenuItem Save_POS {
                label {Save Position}
                callback {MT->Compute_Name_Lists();
int ok=1;
if (g_selected_names.size()==0)
{
	fl_alert("No mesh selected. Please select one mesh in order to save its position.");
	ok =0;
}
else if (g_selected_names.size()>1)
{
	fl_alert("More than one mesh selected. Please select only one mesh in order to save its position.");
	ok =0;
}

if (ok==1)
{
	MT->Save_POS_File();
	MT->redraw();
}}
                xywh {60 60 100 20} labelcolor 56
              }
            }
            Submenu Project_submenu {
              label Project
              xywh {25 25 100 20}
            } {
              MenuItem Open_NTW {
                label {Open project}
                callback {MT->Open_NTW_File();}
                xywh {45 45 100 20} labelcolor 56
              }
              MenuItem Save_NTW {
                label {Save project}
                callback {MT->Save_NTW_File();}
                xywh {55 55 100 20} labelcolor 56
              }
            }
            Submenu Landmarks_submenu {
              label Landmarks open
              xywh {35 35 100 20}
            } {
              MenuItem Open_VER {
                label {Load Landmarks}
                callback {MT->Open_Landmarks(0);}
                xywh {25 25 100 20} labelcolor 32
              }
              MenuItem Open_VER1 {
                label {Load target landmarks}
                callback {MT->Open_Landmarks(1);}
                xywh {40 40 100 20} labelcolor 32
              }
              MenuItem Save_VER {
                label {Save landmarks}
                callback {lmk_show();
//MT->Save_LMK_Landmarks(0);}
                xywh {70 70 100 20} labelcolor 32
              }
              MenuItem Save_VER1 {
                label {Save target landmarks}
                callback {lmk_show2();
//MT->Save_LMK_Landmarks(1);}
                xywh {80 80 100 20} labelcolor 32
              }
              MenuItem Open_VER2 {
                label {Load source and target landmarks}
                callback {MT->Open_SourceTarget_Vertice();}
                xywh {50 50 100 20} labelcolor 32
              }
              MenuItem Save_VER3 {
                label {Save source and target landmarks}
                callback {MT->save_SourceTarget_Vertice();}
                xywh {90 90 100 20} labelcolor 32
              }
            }
            Submenu Curves_submenu {
              label Curves
              xywh {0 0 62 20}
            } {
              MenuItem Open_CUR {
                label {Load curves}
                callback {MT->Open_CUR_File();}
                xywh {40 40 100 20}
              }
              MenuItem Save_CUR {
                label {Save curves}
                callback {MT->Save_CUR_File();}
                xywh {85 85 100 20}
              }
              MenuItem Save_CURLMK {
                label {Export curves as landmark file}
                callback {lmcur_show();;}
                xywh {95 95 100 20} labelcolor 32
              }
              MenuItem Save_Curve_Infos {
                label {Save curve infos (length per curve.)}
                callback {MT->Save_CUR_Infos();
//Keep names}
                xywh {100 100 100 20}
              }
            }
            Submenu Tags_submenu {
              label {Tags and Flags}
              xywh {45 45 100 20}
            } {
              MenuItem Open_TAG {
                label {Load tag colors and labels}
                callback {MT->Open_Tags();
tags_update();
MT->Update_RGB();}
                xywh {35 35 100 20} labelcolor 32
              }
              MenuItem Save_TAG {
                label {Save tag colors and labels}
                callback {MT->Save_Tags();}
                xywh {80 80 100 20} labelcolor 32
              }
              MenuItem Open_FLG {
                label {Load flags}
                callback {MT->Open_flags();}
                xywh {35 35 100 20} labelcolor 32
              }
              MenuItem Save_FLG {
                label {Save flags}
                callback {MT->Save_flags();}
                xywh {80 80 100 20} labelcolor 32
              }
            }
            MenuItem Save_Infos {
              label {Save infos (surface area, volume...)}
              callback {MT->Compute_Name_Lists();
int ok=1;
if (g_selected_names.size()==0)
{
	fl_alert("At least one mesh must be selected");
	ok =0;
}

if (ok==1)
{
  MT->Save_Infos();
}

//Keep names}
              xywh {80 80 100 20} labelcolor 32
            }
            Submenu Orientation_submenu {
              label {Orientation labels}
              xywh {55 55 100 20}
            } {
              MenuItem Open_ORI {
                label {Load orientation labels}
                callback {MT->Open_Orientation();
orientation_update();}
                xywh {45 45 100 20} labelcolor 32
              }
              MenuItem Save_ORI {
                label {Save orientation labels}
                callback {MT->Save_Orientation();}
                xywh {90 90 100 20} labelcolor 32
              }
            }
          }
          Fl_Menu_Button Viewing_options {
            label {Viewing opt.}
            xywh {55 0 100 25} color 55
          } {
            MenuItem SET_GENERAL_COLOUR_LIGHTNING {
              label {General colour and lightning options}
              callback {options_lc_show();}
              xywh {80 80 100 20}
            }
            MenuItem SET_GENERAL_RENDERING {
              label {General rendering options}
              callback {options_rd_show();}
              xywh {90 90 100 20}
            }
            Submenu Camera_submenu {
              label Camera open
              xywh {0 0 62 20}
            } {
              MenuItem SET_CAMERA_OPT {
                label {Camera options}
                callback {cam_show();}
                xywh {55 55 100 20}
              }
              Submenu Camera_center {
                label {Camera rotation center at ...} open
                xywh {10 10 100 20}
              } {
                MenuItem CAP0 {
                  label Origin
                  callback {MT->Cam_Center_At_Landmark(-1);
MT->redraw();}
                  xywh {5 5 100 20}
                }
                MenuItem CAPBAR {
                  label {Centre of mass of all loaded meshes}
                  callback {MT->Cam_Center_At_Landmark(-2);
MT->redraw();}
                  xywh {15 15 100 20}
                }
                MenuItem CAP1 {
                  label {landmark 1}
                  callback {MT->Cam_Center_At_Landmark(1);
MT->redraw();}
                  xywh {15 15 100 20}
                }
                MenuItem CAP2 {
                  label {landmark 2}
                  callback {MT->Cam_Center_At_Landmark(2);
MT->redraw();}
                  xywh {25 25 100 20}
                }
                MenuItem CAP3 {
                  label {landmark 3}
                  callback {MT->Cam_Center_At_Landmark(3);
MT->redraw();}
                  xywh {35 35 100 20}
                }
                MenuItem CAP4 {
                  label {landmark 4}
                  callback {MT->Cam_Center_At_Landmark(4);
MT->redraw();}
                  xywh {45 45 100 20}
                }
                MenuItem CAP5 {
                  label {landmark 5}
                  callback {MT->Cam_Center_At_Landmark(5);
MT->redraw();}
                  xywh {55 55 100 20}
                }
                MenuItem CAP6 {
                  label {landmark 6}
                  callback {MT->Cam_Center_At_Landmark(6);
MT->redraw();}
                  xywh {65 65 100 20}
                }
                MenuItem CAP7 {
                  label {landmark 7}
                  callback {MT->Cam_Center_At_Landmark(7);
MT->redraw();}
                  xywh {75 75 100 20}
                }
                MenuItem CAP8 {
                  label {landmark 8}
                  callback {MT->Cam_Center_At_Landmark(8);
MT->redraw();}
                  xywh {85 85 100 20}
                }
                MenuItem CAP9 {
                  label {landmark 9}
                  callback {MT->Cam_Center_At_Landmark(9);
MT->redraw();}
                  xywh {95 95 100 20}
                }
                MenuItem CAP10 {
                  label {landmark 10}
                  callback {MT->Cam_Center_At_Landmark(10);
MT->redraw();}
                  xywh {105 105 100 20}
                }
              }
              MenuItem DISP_100PX_IN_MM {
                label {Set 100 pixels in mm}
                callback {zoomScaleWindow_show();}
                xywh {135 135 100 20}
              }
              MenuItem RESET_CAMERA {
                label {Reset Camera}
                callback {MT->Reset_Camera();
MT->redraw();}
                xywh {65 65 100 20}
              }
            }
            Submenu Display_Options {
              label {Object rendering options}
              xywh {0 0 62 20}
            } {
              MenuItem DISP_SURFACE {
                label {Gouraud shading (smooth renreding) }
                callback {Displaymode(1);}
                xywh {80 80 100 20}
              }
              MenuItem DISP_WIREFRAME {
                label {Draw wireframe}
                callback {Displaymode(0);}
                xywh {90 90 100 20}
              }
              MenuItem DISP_SORT {
                label {Sort vertices from back to front (beware: slow rendering!)}
                callback {Displaymode(4);}
                xywh {90 90 100 20} labelcolor 56
              }
              MenuItem DISP_SORT2 {
                label {Sort vertices from front to back (beware: slow rendering!)}
                callback {Displaymode(5);}
                xywh {100 100 100 20} labelcolor 32
              }
              MenuItem DISP_FLAT {
                label {Flat triangles}
                callback {Displaymode(2);}
                xywh {95 95 100 20}
              }
              MenuItem DISP_TRI_GOU {
                label {Wireframe and flat triangles}
                callback {Displaymode(3);}
                xywh {110 110 100 20}
              }
              MenuItem DISP_CULLFACE {
                label {Backface culling}
                callback {MT->Change_Cull_Face();
MT->redraw();}
                xywh {90 90 100 20} type Toggle
              }
            }
            MenuItem DISP_GRID_SIZE {
              label {Grid size}
              callback {grid_size_show();}
              xywh {110 110 100 20}
            }
            MenuItem SET_GENERAL_LANDMARK_RENDERING {
              label {Landmark and flag rendering options}
              callback {options_lm_show();}
              xywh {100 100 100 20}
            }
            MenuItem DISP_LANDMARKNUM {
              label {Display landmark numbers}
              callback {MT->ChangeLandmarkMode();
MT->redraw();}
              xywh {140 140 100 20} type Toggle value 1
            }
            MenuItem DISP_CURVE {
              label {Draw curves}
              callback {MT->Change_Draw_Curve();
MT->redraw();}
              tooltip {Draw connection between red landmarks} xywh {100 100 100 20} type Toggle
            }
            MenuItem DISP_ORIENTATION {
              label {Orientation labels}
              callback {orientation_show();}
              xywh {120 120 100 20}
            }
            MenuItem VBO_ACTIVATED {
              label {VBO activate}
              callback {bool bool_vbo=0;
if(VBO_ACTIVATED->value() != 0){
	cout<<"VBO ACTIVATED"<<endl;
	bool_vbo=1;
}
else{
	cout<<"NOT VBO ACTIVATED"<<endl;
	bool_vbo=0;
}
MT->VBO_activated(bool_vbo);
MT->redraw();}
              tooltip {Draw connection between red landmarks} xywh {110 110 100 20} type Toggle
            }
          }
          Fl_Menu_Button Edit_obj {
            label {Edit selected surfaces}
            xywh {155 0 155 25} color 55
          } {
            Submenu Object_structure_modification {
              label {Structure modification} open
              xywh {0 0 62 20}
            } {
              MenuItem INVERT {
                label Invert
                callback {MT->Mesh_invert();
MT->redraw();}
                xywh {75 75 100 20}
              }
              MenuItem MIRROR_ThroughY {
                label Mirror
                callback {MT->Mesh_Mirror_ThroughY();
MT->redraw();}
                xywh {75 75 100 20} labelcolor 32
              }
              MenuItem DECOMPOSE_REGIONS {
                label {Connectivity : separate all non connected regions}
                callback {decompose_show();}
                xywh {85 85 100 20} labelcolor 56
              }
              MenuItem KEEP_LARGEST_REGION {
                label {Connectivity : keep largest region}
                callback {MT->Mesh_Largest_Region();
MT->redraw();}
                xywh {95 95 100 20} labelcolor 32
              }
              MenuItem ACT_TOOL {
                label {Lasso cut}
                callback {MT->Set_Active_Scalar(5);
MT->SetModeTool(1);}
                xywh {95 95 100 20} labelcolor 32
              }
              MenuItem SMOOTH {
                label Smooth
                callback {smooth_show();}
                xywh {105 105 100 20} labelcolor 32
              }
              MenuItem DEF_WINDOW {
                label {TPS Deformation}
                callback {def_show();}
                xywh {80 80 100 20} labelcolor 32
              }
              MenuItem DECIMATE {
                label Decimate
                callback {decimate_show();}
                xywh {115 115 100 20} labelcolor 32
              }
              MenuItem DENSIFY {
                label Densify
                callback {densify_show();}
                xywh {125 125 100 20} labelcolor 32
              }
              MenuItem FILL_HOLES {
                label {Fill holes}
                callback {fillholes_show();}
                xywh {125 125 100 20} labelcolor 32
              }
              MenuItem REGISTRATION_ICP {
                label {Registration ICP}
                callback {registration_ICP_show();}
                xywh {85 85 100 20}
              }
            }
            Submenu Change_object_rendering_options {
              label {Rendering modification}
              xywh {0 0 62 20}
            } {
              MenuItem SET_ALPHA_VALUE {
                label {Set alpha value}
                callback {blend_show();}
                xywh {100 100 100 20}
              }
              Submenu Set_Color {
                label {Change object colour} open
                xywh {10 10 100 20}
              } {
                MenuItem Color_grey {
                  label Grey
                  callback {MT->color_setobjcolor(150,150,150);
MT->save_ini_param();
MT->redraw();}
                  xywh {130 130 100 20} labelfont 1 labelcolor 25
                }
                MenuItem Color_yellow {
                  label Yellow
                  callback {MT->color_setobjcolor(165,142,22);
MT->save_ini_param();
MT->redraw();}
                  xywh {10 10 100 20} labelfont 1 labelcolor 95
                }
                MenuItem Color_red {
                  label Red
                  callback {MT->color_setobjcolor(186,37,37);
MT->save_ini_param();
MT->redraw();}
                  xywh {20 20 100 20} labelfont 1 labelcolor 81
                }
                MenuItem Color_blue {
                  label Blue
                  callback {MT->color_setobjcolor(64,123,126);
MT->save_ini_param();
MT->redraw();}
                  xywh {30 30 100 20} labelfont 1 labelcolor 140
                }
                MenuItem Color_pink {
                  label Pink
                  callback {MT->color_setobjcolor(173,120,95);
MT->save_ini_param();

MT->redraw();}
                  xywh {40 40 100 20} labelfont 1 labelcolor 202
                }
                MenuItem Color_violet {
                  label Violet
                  callback {MT->color_setobjcolor(120,51,145);
MT->save_ini_param();
MT->redraw();}
                  xywh {50 50 100 20} labelfont 1 labelcolor 232
                }
                MenuItem Color_bone {
                  label Bone
                  callback {MT->color_setobjcolor(161,146,95);
MT->save_ini_param();
MT->redraw();}
                  xywh {60 60 100 20} labelfont 1 labelcolor 84
                }
                MenuItem Color_green {
                  label Green
                  callback {MT->color_setobjcolor(39,136,42);
MT->save_ini_param();
MT->redraw();}
                  xywh {70 70 100 20} labelfont 1 labelcolor 60
                }
                MenuItem Color_darkred {
                  label {Dark red}
                  callback {MT->color_setobjcolor(115,8,15);
MT->save_ini_param();
MT->redraw();}
                  xywh {80 80 100 20} labelfont 1 labelcolor 72
                }
                MenuItem Color_darkblue {
                  label {Dark blue}
                  callback {MT->color_setobjcolor(52,52,160);
MT->save_ini_param();
MT->redraw();}
                  xywh {90 90 100 20} labelfont 1 labelcolor 136
                }
                MenuItem Color_darkgreen {
                  label {Dark green}
                  callback {MT->color_setobjcolor(42,110,47);
MT->save_ini_param();
MT->redraw();}
                  xywh {100 100 100 20} labelfont 1 labelcolor 58
                }
                MenuItem Color_orange {
                  label Orange
                  callback {MT->color_setobjcolor(195,91,0);
MT->save_ini_param();
MT->redraw();}
                  xywh {110 110 100 20} labelfont 1 labelcolor 91
                }
                MenuItem Color_brown {
                  label Brown
                  callback {MT->color_setobjcolor(130,78,47);
MT->save_ini_param();
MT->redraw();}
                  xywh {120 120 100 20} labelfont 1 labelcolor 74
                }
              }
              MenuItem Menu_Show_Matrices {
                label {Edit first selected object position and aspect matrices}
                callback {mat_show();}
                xywh {0 0 30 20}
              }
            }
            Submenu Object_group_submenu {
              label {Grouping actions}
              xywh {0 0 62 20}
            } {
              MenuItem GROUP {
                label Group
                callback {MT->Group();
MT->redraw();}
                xywh {105 105 100 20}
              }
              MenuItem UNGROUP {
                label Ungroup
                callback {MT->Ungroup();
MT->redraw();}
                xywh {115 115 100 20}
              }
            }
            Submenu Object_rendering_list_submenu {
              label {Object list order} open
              tooltip {Objects are rendrered on the screen according to a list, which has consequences on the way they are rendrered when using alpha values (transparency) smaller than 100%. You may change this order} xywh {0 0 62 20}
            } {
              MenuItem Obj_move_up {
                label {Move up}
                callback {MT->Object_Move_Up();
MT->redraw();}
                xywh {0 0 30 20}
              }
              MenuItem Obj_move_down {
                label {Move down}
                callback {MT->Object_Move_Down();
MT->redraw();}
                xywh {10 10 30 20}
              }
            }
            Submenu Edit_delete_submenu {
              label {Delete small objects} open
              xywh {0 0 62 20}
            } {
              MenuItem Delete_smaller_than_tri {
                label {threshold : a given number of triangles}
                callback {delete_show();}
                xywh {0 0 30 20}
              }
              MenuItem Delete_smaller_than_vol {
                label {threshold : a given volume}
                callback {delete2_show();}
                xywh {10 10 30 20}
              }
            }
          }
          Fl_Menu_Button Landmarks {
            label Landmarks
            tooltip {Doing so, your curve will be closed} xywh {310 0 180 25} color 55
          } {
            MenuItem SelectLandmark {
              label {Select a given landmark}
              callback {lmkselect_show();}
              xywh {10 10 30 20}
            }
            MenuItem SelectLandmarkRange {
              label {Select a given range of landmarks}
              callback {lmkrangeselect_show();}
              xywh {20 20 30 20}
            }
            MenuItem SitckyLandmarks {
              label {Push back selected landmarks on object surface}
              callback {MT->Stick_Selected_Landmarks_On_Surfaces();
MT->redraw();}
              xywh {0 0 30 20}
            }
            MenuItem AllFlagOptions {
              label {Edit all selected flag landmarks}
              callback {all_flag_show();}
              xywh {10 10 30 20}
            }
            MenuItem LandmarkNormals {
              label {Change selected landmarks orientation according to surface normals}
              callback {MT->Selected_Landmarks_Change_Orientation();
MT->redraw();}
              xywh {10 10 30 20}
            }
            Submenu Curves_submenu_edition {
              label {Selected landmarks involved into curves}
              xywh {0 0 62 20}
            } {
              MenuItem Move_handles_option {
                label {Move curve handles (selected target landmarks) semi-automatically}
                callback {movehandles_show();}
                xywh {5 5 30 20}
              }
              MenuItem StartCurve {
                label {Normal landmark (red) : define as curve starting point (green)}
                callback {MT->Curve_start(1);
MT->redraw();}
                xywh {130 130 100 20}
              }
              MenuItem ConnectStartingPointCurve {
                label {Normal landmark (red) : connect to preceding starting point (violet)}
                callback {MT->Curve_start(3);
MT->redraw();}
                xywh {150 150 100 20}
              }
              MenuItem StartCurveConnection {
                label {Normal landmark (red) : define as curve milestone (blue)}
                callback {MT->Curve_start(2);
MT->redraw();}
                xywh {160 160 100 20}
              }
              MenuItem NoStartCurve {
                label {Green, blue, violet landmark : set back to normal landmark (red)}
                callback {MT->Curve_start(0);
MT->redraw();}
                xywh {140 140 100 20}
              }
            }
          }
          Fl_Menu_Button SC_options {
            label Scalars
            tooltip {Compute attributes. These are values attributed to vertices which can subsequently be displayed as color maps (see viewing options to display color maps)} xywh {490 0 90 25} color 55
          } {
            MenuItem Scalars_SHOW {
              label {Show scalar rendering options window}
              callback {sc_show();}
              xywh {135 135 100 20}
            }
            MenuItem SCALAR_DISTANCE {
              label {Scalars : distance from camera}
              callback {MT->Set_Active_Scalar(0);
MT->SC_calc_depth();
MT->Update_RGB();
MT->redraw();}
              xywh {85 85 100 20}
            }
            MenuItem SCALAR_CURVATURE {
              label {Scalars : compute vertice curvature}
              callback {curv_show();}
              xywh {105 105 100 20} labelcolor 32
            }
            MenuItem SCALAR_THICKNESS {
              label {Scalars : compute thickness}
              callback {thickness_show();}
              xywh {115 115 100 20} labelcolor 32
            }
            MenuItem SCALAR_THICKNESS2 {
              label {Scalars : compute thickness between 2 objects}
              callback {thickness2_show();}
              xywh {125 125 100 20} labelcolor 32
            }
            MenuItem SCALAR_MEAN {
              label {Smooth active scalars (gaussian blur)}
              callback {MT->SC_calc_mean();
MT->Update_RGB();
MT->redraw();}
              xywh {115 115 100 20} labelcolor 32
            }
            MenuItem init_rgb {
              label {Init RGB }
              callback {// active init_RGB
MT->Active_InitRGB();
MT->redraw();}
              xywh {0 0 30 20}
            }
          }
          Fl_Menu_Button Tags_menu {
            label Tags
            xywh {580 0 60 25} color 55
          } {
            MenuItem TAGS_SHOW {
              label {Show tag options window}
              callback {tags_show();}
              xywh {125 125 100 20}
            }
            MenuItem TAGS_CONVERT {
              label {Convert RGB colours to tags}
              callback {tags_convert_show();}
              xywh {135 135 100 20}
            }
            MenuItem TAGS_MERGE {
              label {Merge Tags}
              callback {mergetags_show();}
              xywh {135 135 100 20}
            }
            MenuItem TAGS_CONNECTIVITY {
              label {Tag connected regions}
              callback {MT->Mesh_Tag_Connected_Regions();
MT->Set_Active_Scalar(-1);
MT->Activate_Tags_Display_Mode();
MT->SetColorScaleId(-1);
MT->redraw();}
              xywh {145 145 100 20}
            }
            Submenu TAGS_SUB_EXTRACT {
              label {Extract ...}
              xywh {0 0 62 20}
            } {
              MenuItem TAGS_DECOMPOSE6 {
                label {Extract active tag corresponding region}
                callback {MT->Mesh_Extract_Active_Tag();
MT->redraw();}
                xywh {190 190 100 20}
              }
              MenuItem TAGS_DECOMPOSE2 {
                label {Extract all tagged regions as several new objects}
                callback {extractallregions_show();}
                xywh {170 170 100 20}
              }
              MenuItem TAGS_DECOMPOSE {
                label {Extract one tagged region as 1 new object}
                callback {extractregion_show();}
                xywh {160 160 100 20}
              }
              MenuItem TAGS_DECOMPOSE_RANGE {
                label {Extract tag or other scalar range as 1 new object}
                callback {extractrange_show();}
                xywh {170 170 100 20}
              }
            }
            Submenu TAGS_SUB_DELETE {
              label {Delete ...}
              xywh {0 0 62 20}
            } {
              MenuItem TAGS_DECOMPOSE3 {
                label {Delete one tagged region}
                callback {deleteregion_show();}
                xywh {170 170 100 20}
              }
              MenuItem TAGS_DECOMPOSE5 {
                label {Delete active tag corresponding region}
                callback {MT->Mesh_Delete_Active_Tag();
MT->redraw();}
                xywh {180 180 100 20}
              }
              MenuItem TAGS_DECOMPOSE4 {
                label {Delete all tagged regions except TAG 00}
                callback {MT->Mesh_Delete_All_Non_Zero_Tags();}
                xywh {180 180 100 20}
              }
            }
          }
          Fl_Menu_Button Show {
            label Show
            xywh {640 0 60 25} color 55
          } {
            MenuItem SET_WINDOW_OPTIONS {
              label {General options}
              callback {options_show();}
              xywh {65 65 100 20}
            }
            MenuItem ShowViewHideObjects {
              label {Show object view/hide window}
              callback {view_hide_show();}
              xywh {125 125 100 20}
            }
            MenuItem AREA_VOLUME {
              label {Area and Volume of selected objects}
              callback {MT->Mesh_area_volume();}
              xywh {115 115 100 20} labelcolor 32
            }
            MenuItem PRINT_SCALAR_LIST {
              label {Print scalar list}
              callback {MT->Print_Global_Scalar_List();}
              xywh {125 125 100 20} labelcolor 32
            }
            MenuItem PRINT_NAME_LIST {
              label {Print list of selected objects}
              callback {MT->Print_Selected_Names_List();}
              xywh {135 135 100 20} labelcolor 32
            }
            MenuItem PRINT_NAME_LIST2 {
              label {Print list of distinct selected objects}
              callback {MT->Print_Distinct_Selected_Names_List();}
              xywh {145 145 100 20} labelcolor 32
            }
            MenuItem Hierarchy {
              label {Show object display order}
              callback {MT->Hierachy();}
              xywh {115 115 100 20}
            }
          }
          Fl_Menu_Button About {
            label {?}
            xywh {700 0 35 25} color 55
          } {
            MenuItem GET_VERSION {
              label About
              callback {version_show();}
              xywh {70 70 100 20}
            }
          }
          Fl_Group Buttons {open
            xywh {25 25 105 23}
          } {
            Fl_Button Move_mode {
              callback {((Fl_Button *)o)->value(1);
Camera_mode->value(0);
Landmark_mode->value(0);
MT->Mesh_Set_Select_Mode(0);
MT->redraw();}
              tooltip {Move camera mode} image {./pixmap/move.gif} xywh {75 25 25 23} down_box DOWN_BOX value 1 color 55 selection_color 23
            }
            Fl_Button Camera_mode {
              callback {((Fl_Button *)o)->value(1);
Move_mode->value(0);
Landmark_mode->value(0);
MT->Mesh_Set_Select_Mode(2);
Fl::focus(MT);
MT->redraw();}
              tooltip {Move object mode} image {./pixmap/Move_mode2.gif} xywh {50 25 25 23} color 55
            }
            Fl_Button Landmark_mode {
              callback {MT->Mesh_UnselectAll();
((Fl_Button *)o)->value(1);
Move_mode->value(0);
Camera_mode->value(0);
MT->Mesh_Set_Select_Mode(3);
MT->Landmark_Mode(0);
MT->redraw();}
              tooltip {Landmark mode (only landmarks can be selected, surfaces remain unselected)} image {./pixmap/Landmarks2.gif} xywh {25 25 25 23} color 55
            }
          }
          Fl_Button Source_mode {
            callback {((Fl_Button *)o)->value(1);
Target_mode->value(0);
Flag_mode->value(0);
MT->Landmark_Mode(0);
MT->redraw();}
            tooltip {"Normal" landmark mode} image {./pixmap/Landmarks4.gif} xywh {100 25 25 23} value 1 color 55
          }
          Fl_Button Target_mode {
            callback {((Fl_Button *)o)->value(1);
Source_mode->value(0);
Flag_mode->value(0);
MT->Landmark_Mode(1);
MT->redraw();}
            tooltip {"Target" landmark mode} image {./pixmap/Landmarks6.gif} xywh {125 25 25 23} color 55
          }
          Fl_Button Flag_mode {
            callback {((Fl_Button *)o)->value(1);
Source_mode->value(0);
Target_mode->value(0);
MT->Landmark_Mode(2);
MT->redraw();}
            tooltip {"Flag" landmark mode} image {./pixmap/Flag01.png} xywh {150 25 25 23} color 55
          }
          Fl_Button TRI_sort_0 {
            callback {Displaymode(4);
//MT->Mesh_Tri_Sort(0);
//MT->redraw();}
            tooltip {Tansparency: sort all vertices once from back to front} image {./pixmap/Sort_vertices01.gif} xywh {175 25 25 23} color 55
          }
          Fl_Button TRI_sort_1 {
            callback {Displaymode(5);
//MT->Mesh_Tri_Sort(1);
//MT->redraw();}
            tooltip {Tansparency: sort all vertices once from front  to back} image {./pixmap/Sort_vertices02.gif} xywh {200 25 25 23} color 55
          }
          Fl_Button Grid {
            callback {MT->ShowGrid();
MT->redraw();}
            tooltip {Show/hide grid} image {./pixmap/grid3.gif} xywh {225 25 25 23} color 55 selection_color 23
          }
          Fl_Button Bt_move_up {
            callback {MT->Object_Move_Up();
MT->Landmark_Move_Up();
MT->redraw();}
            tooltip {Object list : move object(s) up} image {./pixmap/s_dessous_17.gif} xywh {301 25 20 12} color 55
          }
          Fl_Button Bt_move_down {
            callback {MT->Object_Move_Down();
MT->Landmark_Move_Down();
MT->redraw();}
            tooltip {Object list : move object(s) down} image {./pixmap/s_dessus_17.gif} xywh {301 37 20 11} color 55 align 16
          }
          Fl_Button Bt_light_right {
            callback {MT->SetLightPosition(5);
MT->redraw();}
            tooltip {Lightning : from right side} image {./pixmap/s_right_17.gif} xywh {321 25 25 23} color 55 align 64
          }
          Fl_Button Bt_light_left {
            callback {MT->SetLightPosition(6);
MT->redraw();}
            tooltip {Lightning : from left side} image {./pixmap/s_left_17.gif} xywh {346 25 25 23} color 55 align 80
          }
          Fl_Button Bt_light_face {
            callback {MT->SetLightPosition(1);
MT->redraw();}
            tooltip {Lightning : from front side} image {./pixmap/s_face_17.gif} xywh {370 25 25 23} color 55 align 144
          }
          Fl_Button Bt_light_back {
            callback {MT->SetLightPosition(2);
MT->redraw();}
            tooltip {Lightning : from backside} image {./pixmap/s_back_18.gif} xywh {395 25 25 23} color 55 align 128
          }
          Fl_Button Bt_light_above {
            callback {MT->SetLightPosition(4);
MT->redraw();}
            tooltip {Lightning : from above} image {./pixmap/s_dessus_18.gif} xywh {420 25 25 23} color 55 align 16
          }
          Fl_Button Bt_light_below {
            callback {MT->SetLightPosition(3);
MT->redraw();}
            tooltip {Lightning: from below} image {./pixmap/s_dessous_18.gif} xywh {445 25 25 23} color 55
          }
          Fl_Button Bt_pos_left {
            callback {MT->Set_Grid_Plane(1);
MT->SetPosition(5);
MT->redraw();}
            tooltip {Move camera : view object from left side} image {./pixmap/left2.gif} xywh {494 25 25 23} color 55 align 80
          }
          Fl_Button Bt_pos_right {
            callback {MT->Set_Grid_Plane(1);
MT->SetPosition(6);
MT->redraw();}
            tooltip {Move camera : view object from right side} image {./pixmap/right2.gif} xywh {470 25 24 23} color 55 align 64
          }
          Fl_Button Bt_pos_face {
            callback {MT->Set_Grid_Plane(0);
MT->SetPosition(1);
MT->redraw();}
            tooltip {Move camera : view object from font side} image {./pixmap/front2.gif} xywh {517 25 25 23} color 55 align 144
          }
          Fl_Button Bt_pos_back {
            callback {MT->Set_Grid_Plane(0);
MT->SetPosition(2);
MT->redraw();}
            tooltip {Move camera : view object from back side} image {./pixmap/back2.gif} xywh {542 25 25 23} color 55 align 128
          }
          Fl_Button Bt_pos_above {
            callback {MT->Set_Grid_Plane(2);
MT->SetPosition(4);
MT->redraw();}
            tooltip {Move camera : view object from above} image {./pixmap/above2.gif} xywh {567 25 25 23} color 55
          }
          Fl_Button Bt_pos_below {
            callback {MT->Set_Grid_Plane(2);
MT->SetPosition(3);
MT->redraw();}
            tooltip {Move camera : view object from below} image {./pixmap/below2.gif} xywh {590 25 25 23} color 55
          }
          Fl_Button Matrix_button {
            callback {mat_show();}
            tooltip {Edit first selected object position and aspect matrices} image {./pixmap/mat.gif} xywh {615 25 25 23} color 55 selection_color 47 when 1
          }
          Fl_Button Color_Scale_button {
            callback {//((Fl_Button *)o)->value(1);


if (((Fl_Button *)o)->value()==0)
{((Fl_Button *)o)->value(1);}
else
{((Fl_Button *)o)->value(0);}
MT->Change_Scalars_Display_Mode();
MT->SetColorScaleId(0);// calls update_rgb
MT->Update_RGB();
MT->redraw();}
            tooltip {Draw / Stop drawing object scalars as colour scales} image {./pixmap/show_color_scale.gif} xywh {640 25 25 23} down_box DOWN_BOX color 55 selection_color 47 when 1
          }
          Fl_Button Color_Scale_Show {
            callback {sc_show();}
            tooltip {Open Scalar Window} image {./pixmap/edit_color_scale.gif} xywh {665 25 25 23} down_box DOWN_BOX color 55 selection_color 47 when 1
          }
          Fl_Button Show_Tag_Window2 {
            callback {tags_show();}
            tooltip {Show tag window} image {./pixmap/Show_Tag_Window2.gif} xywh {715 25 25 23} down_box DOWN_BOX color 55 selection_color 47 when 1
          }
          Fl_Button Tag_mode_off {
            callback {((Fl_Button *)o)->value(1);
Tag_mode_on->value(0);
MT->Set_Tag_Mode(0);
MT->Desactivate_Tags_Display_Mode();
//MT->SetColorScaleId(1);
MT->SetModeTool(0);
MT->redraw();}
            tooltip {Normal select mode : selected surfaces are grey / unselected ones are colored} image {./pixmap/Normal_select_mode.gif} xywh {740 25 25 23} down_box DOWN_BOX value 1 color 55 selection_color 47 when 1
          }
          Fl_Button Tag_mode_on {
            callback {((Fl_Button *)o)->value(1);
Tag_mode_off->value(0);
MT->Set_Tag_Mode(1);
MT->Activate_Tags_Display_Mode();
MT->SetColorScaleId(-1);
MT->Set_Active_Scalar(-1);

//MT->SetModeTool(0);
MT->redraw();}
            tooltip {Tag select mode : selected surfaces are colored / unselected ones are grey} image {./pixmap/Tag_select_mode.gif} xywh {767 25 25 23} down_box DOWN_BOX color 55 selection_color 47 when 1
          }
          Fl_Button Pencil {
            callback {((Fl_Button *)o)->value(1);
Magic_Wand->value(0);
Flood_Fill->value(0);
MT->Set_Active_Scalar(-1);
MT->Activate_Tags_Display_Mode();
MT->SetColorScaleId(-1);
MT->Activate_Pencil();
MT->redraw();}
            tooltip {Activate pencil tagging mode} image {./pixmap/pencil.gif} xywh {792 25 25 23} down_box DOWN_BOX value 1 color 55 selection_color 47 when 1
          }
          Fl_Button Magic_Wand {
            callback {((Fl_Button *)o)->value(1);
Pencil->value(0);
Flood_Fill->value(0);
MT->Set_Active_Scalar(-1);
MT->Activate_Tags_Display_Mode();
MT->SetColorScaleId(-1);
MT->Activate_Magic_Wand();
MT->redraw();}
            tooltip {Activate magic wand tagging mode} image {./pixmap/magic_wand.gif} xywh {817 25 25 23} down_box DOWN_BOX color 55 selection_color 47 when 1
          }
          Fl_Button Flood_Fill {
            callback {((Fl_Button *)o)->value(1);
Pencil->value(0);
Magic_Wand->value(0);
MT->Set_Active_Scalar(-1);
MT->Activate_Tags_Display_Mode();
MT->SetColorScaleId(-1);
MT->Activate_Flood_Fill();
MT->redraw();}
            tooltip {Activateflood fill tagging mode} image {./pixmap/Flood_fill.gif} xywh {842 25 25 23} down_box DOWN_BOX color 55 selection_color 47 when 1
          }
          Fl_Button Lasso_plus {
            callback {MT->Set_Active_Scalar(-1);
MT->Activate_Tags_Display_Mode();
MT->SetColorScaleId(-1);
MT->SetModeTool(2);
MT->redraw();}
            tooltip {Lasso tag + : draw a lasso contour using several left clicks + a final right click. Then either middle click, or press "t"+ left or right click} image {./pixmap/Lasso_plus.gif} xywh {868 25 25 23} down_box DOWN_BOX color 55 selection_color 47 when 1
          }
          Fl_Button Edit_flag {
            callback {flag_show();}
            tooltip {Edit first selected flag label, length and colour} image {pixmap/Flag02.png} xywh {893 25 25 23} color 55 selection_color 47 when 1
          }
          Fl_Button Show_Tag_Window {
            callback {if (((Fl_Button *)o)->value()==0)
{((Fl_Button *)o)->value(1);}
else
{((Fl_Button *)o)->value(0);}

MT->Set_Active_Scalar(-1);//may call update_rgb
MT->Change_Tags_Display_Mode();
MT->SetColorScaleId(-1);//may call update_rgb
MT->Update_RGB();
MT->redraw();}
            tooltip {Display tags} image {./pixmap/Show_Tag_Window.gif} xywh {691 25 25 23} down_box DOWN_BOX color 55 selection_color 47 when 1
          }
          Fl_Button Edit_name {
            callback {name_show();}
            tooltip {Edit first selected surface name} image {./pixmap/name.png} xywh {916 25 25 23} color 55 selection_color 47 when 1
          }
          Fl_Button Orientation {
            callback {MT->ShowOrientation();
MT->redraw();}
            tooltip {Show/hide orientation} image {./pixmap/grid2.gif} xywh {276 25 25 23} color 55 selection_color 23
          }
          Fl_Button Move_cam_centre_of_mass {
            callback {if (((Fl_Button *)o)->value()==0)
{
((Fl_Button *)o)->value(1);
MT->Cam_Center_At_Landmark(-2);

}
else
{
((Fl_Button *)o)->value(0);
MT->Cam_Center_At_Landmark(-1);
}

MT->redraw();}
            tooltip {Move camera center at origin or centre of mass of all objects} image {./pixmap/Move_cam.gif} xywh {250 25 25 23} color 55 selection_color 23
          }
        }
        Fl_Group Resizable {
          xywh {980 0 22 50} resizable
        } {}
      }
      Fl_Group Bottom {open
        xywh {0 50 1000 650} resizable
      } {
        Fl_Box MT {
          label {MeshTools 3D window}
          xywh {40 50 940 610} when 1 resizable
          code0 {\#include "MeshTools.h"}
          class MeshTools
        }
        Fl_Group WW {open
          xywh {0 50 40 650} color 207
        } {
          Fl_Group WW_unresizable {open
            xywh {0 50 40 550}
          } {
            Fl_Slider zpan1 {
              label Z
              callback {MT->panz2(((Fl_Slider *)o)->value());
MT->redraw();}
              tooltip {Move selected objects along viewing z axis} xywh {20 61 20 225} type {Vert Knob} color 215 minimum -100 maximum 100 step 0.1
              code0 {\#include "SpecialSlider2.h"}
              class SpecialSlider2
            }
            Fl_Roller zroll1 {
              callback {MT->rollz2(((Fl_Roller *)o)->value());
MT->redraw();}
              tooltip {Rotate selected objects around viewing z axis} xywh {0 60 20 230} box DOWN_BOX color 23 selection_color 255 minimum -180 maximum 180 step 0.1
              code0 {\#include "SpecialRoller4.h"}
              class SpecialRoller4
            }
            Fl_Slider ypan1 {
              label Y
              callback {MT->pany2(((Fl_Slider *)o)->value());
MT->redraw();}
              tooltip {Move selected objects along viewing y axis} xywh {20 305 20 231} type {Vert Knob} color 215 minimum -100 maximum 100 step 0.1
              code0 {\#include "SpecialSlider2.h"}
              class SpecialSlider2
            }
            Fl_Roller yroll1 {
              callback {MT->rolly2(((Fl_Roller *)o)->value());
MT->redraw();}
              tooltip {Rotate selected objects around viewing y axis} xywh {0 306 20 230} box DOWN_BOX color 23 selection_color 255 minimum -180 maximum 180 step 0.1
              code0 {\#include "SpecialRoller4.h"}
              class SpecialRoller4
            }
          }
          Fl_Group WW_resizable {
            xywh {0 660 40 40} resizable
          } {}
        }
        Fl_Group EE {open
          xywh {980 50 20 650} align 0
        } {
          Fl_Group EE_unresizable {open
            xywh {980 50 20 610}
          } {
            Fl_Slider zpan {
              label cp
              callback {MT->panz(((Fl_Slider *)o)->value());
MT->redraw();}
              tooltip {Displace clipping plane} xywh {981 217 19 239} type {Vert Knob} color 92 labelsize 7 minimum -100 maximum 100 step 0.1
              code0 {\#include "SpecialSlider2.h"}
              class SpecialSlider2
            }
            Fl_Slider zroll {
              label rZ
              callback {MT->rollz(((Fl_Slider *)o)->value());
MT->redraw();}
              tooltip {Rotate camera along viewing z axis} xywh {981 51 19 152} type {Vert Knob} color 92 minimum -45 maximum 45 step 0.1
              code0 {\#include "SpecialSlider2.h"}
              class SpecialSlider2
            }
            Fl_Roller zoom {
              label Zoom
              callback {MT->SetZoom(((Fl_Roller *)o)->value());
MT->redraw();}
              tooltip Zoom xywh {981 505 19 145} box DOWN_BOX color 55 selection_color 255 labelsize 7 align 6 minimum -50 maximum 50 step 0.5
              code0 {\#include "SpecialRoller4.h"}
              class SpecialRoller4
            }
            Fl_Button CP_cut_half2 {
              callback {MT->cam_validate(
	MT->cam_getnear(),
	MT->cam_getfar(),
	MT->cam_getaz(),
	MT->cam_getel(),
	MT->cam_gettw(),
	MT->cam_gettx(),
	MT->cam_getty(),
	0
);

MT->redraw();}
              tooltip {Displace clipping plane to z=0} image {pixmap/Clipping_plane_z0.png} xywh {980 464 20 20}
            }
            Fl_Button CP_normal_cp2 {
              callback {MT->cam_validate(
	MT->cam_getnear(),
	MT->cam_getfar(),
	MT->cam_getaz(),
	MT->cam_getel(),
	MT->cam_gettw(),
	MT->cam_gettx(),
	MT->cam_getty(),
	-0.5*MT->cam_getfar()
);

MT->redraw();}
              tooltip {Replace clipping place normally} image {pixmap/Clipping_plane_normal.png} xywh {980 484 20 20}
            }
          }
          Fl_Group EE_resizable {
            xywh {980 660 20 40} resizable
          } {}
        }
        Fl_Group SS {open
          xywh {40 659 940 41} color 207
        } {
          Fl_Group SS_unresizable {open
            xywh {40 660 360 40}
          } {
            Fl_Slider xpan1 {
              label x
              callback {MT->panx2(((Fl_Slider *)o)->value());
MT->redraw();}
              tooltip {Move selected objects along viewing x axis} xywh {85 660 255 20} type {Horz Knob} color 215 align 4 minimum -100 maximum 100 step 0.1
              code0 {\#include "SpecialSlider2.h"}
              class SpecialSlider2
            }
            Fl_Roller xroll1 {
              callback {MT->rollx2(((Fl_Roller *)o)->value());
MT->redraw();}
              tooltip {Rotate selected objects around viewing x axis} xywh {85 680 255 20} type Horizontal box DOWN_BOX color 55 selection_color 255 minimum -180 maximum 180 step 0.1
              code0 {\#include "SpecialRoller4.h"}
              class SpecialRoller4
            }
          }
          Fl_Group SS_resizable {open
            xywh {400 660 580 40} resizable
          } {}
        }
      }
    }
    Fl_Window camWindow {
      label {Camera options}
      image {pixmap/s_back_13.gif} xywh {-32000 -32000 165 320} type Double color 174 hide non_modal
    } {
      Fl_Value_Input Cam_near {
        label {Camera near :}
        xywh {99 15 52 25}
      }
      Fl_Value_Input Cam_far {
        label {Camera far :}
        xywh {99 45 52 25}
      }
      Fl_Value_Input Cam_az {
        label {Azimuth :}
        xywh {99 75 52 25}
      }
      Fl_Value_Input Cam_el {
        label {Elevation :}
        xywh {99 104 52 25}
      }
      Fl_Value_Input Cam_tw {
        label {Twist :}
        xywh {98 132 52 25}
      }
      Fl_Value_Input Cam_tx {
        label {Tx :}
        xywh {99 160 52 25}
      }
      Fl_Value_Input Cam_ty {
        label {Ty :}
        xywh {99 189 52 25}
      }
      Fl_Value_Input Cam_tz {
        label {Tz :}
        xywh {99 217 52 25}
      }
      Fl_Button Ok_cam {
        label Ok
        callback {MT->cam_validate(
Cam_near->value(),
Cam_far->value(),
Cam_az->value(),
Cam_el->value(),
Cam_tw->value(),
Cam_tx->value(),
Cam_ty->value(),
Cam_tz->value()
);
MT->redraw();}
        xywh {65 280 65 25} color 173 selection_color 172
      }
      Fl_Button CP_cut_half {
        callback {Cam_near->value(MT->cam_getnear());
Cam_far->value(MT->cam_getfar());
Cam_tx->value(MT->cam_gettx());
Cam_ty->value(MT->cam_getty());
Cam_tz->value(MT->cam_gettz());
Cam_az->value(MT->cam_getaz());
Cam_el->value(MT->cam_getel());
Cam_tw->value(MT->cam_gettw());
//MT->panz(0);
Cam_tz->value(0);
MT->cam_validate(
Cam_near->value(),
Cam_far->value(),
Cam_az->value(),
Cam_el->value(),
Cam_tw->value(),
Cam_tx->value(),
Cam_ty->value(),
Cam_tz->value()
);

MT->redraw();}
        tooltip {Displace clipping plane to z=0} image {pixmap/Clipping_plane_z0.png} xywh {90 252 25 23} color 84 selection_color 92 align 128
      }
      Fl_Button CP_normal_cp {
        callback {Cam_near->value(MT->cam_getnear());
Cam_far->value(MT->cam_getfar());
Cam_tx->value(MT->cam_gettx());
Cam_ty->value(MT->cam_getty());
Cam_tz->value(MT->cam_gettz());
Cam_az->value(MT->cam_getaz());
Cam_el->value(MT->cam_getel());
Cam_tw->value(MT->cam_gettw());
//MT->panz(-0.5*Cam_far->value());
Cam_tz->value(-0.5*Cam_far->value());
MT->cam_validate(
Cam_near->value(),
Cam_far->value(),
Cam_az->value(),
Cam_el->value(),
Cam_tw->value(),
Cam_tx->value(),
Cam_ty->value(),
Cam_tz->value()
);
MT->redraw();}
        tooltip {Replace clipping place normally} image {pixmap/Clipping_plane_normal.png} xywh {117 252 25 23} color 84 selection_color 92 align 128
      }
    }
    Fl_Window optWindow {
      label {General options}
      xywh {992 427 366 307} type Double color 94 hide non_modal
    } {
      Fl_Group open_surface_option {
        label {Behaviour when opening surfaces : }
        xywh {10 25 350 160} box BORDER_BOX color 93
      } {
        Fl_Group open_surface_option_camera {
          label {Camera : } open
          xywh {20 125 325 54} box BORDER_BOX color 94 align 5
        } {
          Fl_Round_Button rb_cam {
            label {Auto zoom / unzoom according to object size}
            xywh {25 126 25 25} type Radio down_box ROUND_DOWN_BOX value 1
          }
          Fl_Round_Button rb_cam2 {
            label {Swith off auto zoom}
            xywh {25 146 25 33} type Radio down_box ROUND_DOWN_BOX
          }
        }
        Fl_Group open_surface_option_center_of_mass {
          label {Object position :} open
          xywh {21 47 324 58} box BORDER_BOX color 94 align 5
        } {
          Fl_Round_Button rb_cm {
            label {Move object centre of mass at x=0,y=0,z=0}
            xywh {26 48 25 25} type Radio down_box ROUND_DOWN_BOX value 1
          }
          Fl_Round_Button rb_cm2 {
            label {Keep object native coordinate system}
            xywh {26 68 25 33} type Radio down_box ROUND_DOWN_BOX
          }
        }
      }
      Fl_Group process_surface_options {
        label {Surface edition involving filters :}
        xywh {11 217 350 53} box BORDER_BOX color 93
      } {
        Fl_Round_Button rb_delete_orig {
          label {Delete initial surface (only keep filter output)}
          xywh {20 218 25 25} type Radio down_box ROUND_DOWN_BOX value 1
        }
        Fl_Round_Button rb_keep_orig {
          label {Keep both input and output surfaces}
          xywh {20 238 25 32} type Radio down_box ROUND_DOWN_BOX
        }
      }
      Fl_Button Ok_scc {
        label Ok
        callback {MT->Mesh_SetOpeningBehaviour(
rb_cm->value()
);


MT->Mesh_SetZoomBehaviour(
rb_cam->value()
);

MT->Mesh_SetAutoDelete(
rb_delete_orig->value()
);



MT->save_ini_param();

MT->redraw();
options_hide();}
        xywh {155 280 65 25} color 133 selection_color 92
      }
    }
    Fl_Window opt_lc_Window {
      label {Lightning and colour options}
      xywh {32 54 373 294} type Double color 94 hide non_modal
    } {
      Fl_Group Window_group {
        label Windows open
        xywh {15 25 335 23} box BORDER_BOX
      } {
        Fl_Button Back_Color {
          label {Background colour}
          callback {Fl_Color c = FL_GRAY;
uchar r,g,b;
Fl::get_color(c,r,g,b);
if(!fl_color_chooser("New color:",r,g,b)) return;
c = fl_rgb_color(r,g,b);
o->color(c);
o->redraw();
MT->color_setbackcolor(r,g,b);
MT->redraw();}
          xywh {239 25 111 23} color 32 labelcolor 32
        }
        Fl_Button Grid_Color {
          label {Grid colour}
          callback {Fl_Color c = FL_GRAY;
uchar r,g,b;
Fl::get_color(c,r,g,b);
if(!fl_color_chooser("New color:",r,g,b)) return;
c = fl_rgb_color(r,g,b);
o->color(c);
o->redraw();
MT->color_setgridcolor(r,g,b);
MT->redraw();}
          xywh {125 25 114 23} color 43 labelcolor 32
        }
        Fl_Button Obj_Color {
          label {Object colour}
          callback {Fl_Color c = FL_GRAY;
uchar r,g,b;
Fl::get_color(c,r,g,b);
if(!fl_color_chooser("New color:",r,g,b)) return;
c = fl_rgb_color(r,g,b);
o->color(c);
o->redraw();
MT->color_setobjcolor(r,g,b);
MT->redraw();}
          xywh {15 25 110 23} color 64 labelcolor 32
        }
      }
      Fl_Group Light_group {
        label Light open
        xywh {10 69 350 179} box BORDER_BOX color 93
      } {
        Fl_Roller LightRoll1 {
          callback {MT->lightroll1(((Fl_Roller *)o)->value());
MT->redraw();}
          xywh {55 78 240 18} type Horizontal box DOWN_BOX color 94 selection_color 93 minimum -180 maximum 180 step 0.1
        }
        Fl_Roller LightRoll2 {
          callback {MT->lightroll2(((Fl_Roller *)o)->value());
MT->redraw();}
          xywh {56 103 240 18} type Horizontal box DOWN_BOX color 94 selection_color 93 minimum -180 maximum 180 step 0.1
        }
        Fl_Value_Slider Specular {
          label Specular
          callback {MT->SetSpecular(((Fl_Slider *)o)->value());
MT->redraw();}
          xywh {54 128 240 15} type Horizontal color 95 value 1 textsize 14
        }
        Fl_Value_Slider Diffuse {
          label Diffuse
          callback {MT->SetDiffuse(((Fl_Slider *)o)->value());
MT->redraw();}
          xywh {54 160 240 15} type Horizontal color 95 value 1 textsize 14
        }
        Fl_Value_Slider Ambiant {
          label Ambiant
          callback {MT->SetAmbiant(((Fl_Slider *)o)->value());
MT->redraw();}
          xywh {55 193 240 15} type Horizontal color 95 textsize 14
        }
        Fl_Check_Button cb_enable_2sides {
          label {Enable two sided lighting}
          xywh {53 221 25 25} down_box DOWN_BOX
        }
      }
      Fl_Button Ok_scc_lightning_colour {
        label Ok
        callback {MT->SetLightPosition2();

MT->Mesh_Set2SidesLightning(
cb_enable_2sides->value()
);


MT->save_ini_param();

MT->redraw();
options_lc_hide();}
        xywh {152 260 65 25} color 133 selection_color 92
      }
    }
    Fl_Window opt_lm_Window {
      label {Landmark and flag options}
      xywh {-32000 -32000 368 324} type Double color 94 hide non_modal
    } {
      Fl_Group {} {
        label {Landmarks rendering} open
        xywh {0 15 357 120} box BORDER_BOX color 93
      } {
        Fl_Group landmark_type_radio_buttons {
          label {Draw Landmarks As : } open
          xywh {18 37 314 55} box BORDER_BOX color 94 align 5
        } {
          Fl_Round_Button pt_sphere {
            label Spheres
            xywh {20 38 25 24} type Radio down_box ROUND_DOWN_BOX value 1
          }
          Fl_Round_Button pt_needle {
            label Needles
            xywh {20 61 22 11} type Radio down_box ROUND_DOWN_BOX
          }
        }
        Fl_Value_Input Landmark_Size2 {
          label {Landmark Size(mm) :}
          xywh {154 94 28 25} align 36
        }
      }
      Fl_Button Ok_scc_lm {
        label Ok
        callback {MT->Mesh_SetLandmarkSize(
Landmark_Size2->value()
);

MT->set_g_flag_length(
Flag_g_length->value()
);


MT->Mesh_SetLandmarkType(
pt_sphere->value()
);


MT->save_ini_param();

MT->redraw();
options_lm_hide();}
        xywh {150 285 65 25} color 133 selection_color 92
      }
      Fl_Group {} {
        label {Flags setting} open
        xywh {5 171 350 109} box BORDER_BOX color 93
      } {
        Fl_Value_Input Flag_g_length {
          label {Flag length (mm) :}
          xywh {140 230 28 25} align 36
        }
        Fl_Button Flag_g_colour {
          label {Flag colour}
          callback {Fl_Color c = FL_GRAY;
uchar r,g,b;
Fl::get_color(c,r,g,b);
if(!fl_color_chooser("New color:",r,g,b)) return;
c = fl_rgb_color(r,g,b);
o->color(c);
o->redraw();
MT->set_g_flag_colour(r,g,b);
MT->redraw();}
          xywh {30 187 140 26} color 42 labelcolor 32
        }
      }
    }
    Fl_Window opt_rd_Window {
      label {Rendering options}
      xywh {8 31 361 254} type Double color 94 hide non_modal
    } {
      Fl_Group fast_display_option {
        label {Object rendering when moving object/camera :}
        xywh {7 25 350 60} box BORDER_BOX color 93
      } {
        Fl_Round_Button rb_show_all {
          label {Show full surface / scalars (slower)}
          callback {MT->Set_Display_All(1);}
          xywh {16 30 25 25} type Radio down_box ROUND_DOWN_BOX value 1
        }
        Fl_Round_Button rb_show_point_cloud {
          label {Show point cloud (faster)}
          callback {MT->Set_Display_All(0);}
          xywh {16 50 25 32} type Radio down_box ROUND_DOWN_BOX
        }
      }
      Fl_Group depth_of_field_of_view {
        label {Depth of field of view} open
        xywh {8 122 349 93} box BORDER_BOX color 93
      } {
        Fl_Group behaviour_when_moving_zoom {
          label {Behaviour when zooming in/out : } open
          xywh {18 144 314 47} box BORDER_BOX color 94 align 5
        } {
          Fl_Round_Button zm_keep {
            label {Keep current field of view depth}
            xywh {20 145 25 24} type Radio down_box ROUND_DOWN_BOX value 1
          }
          Fl_Round_Button zm_adapt {
            label {Adapt field of view depth}
            xywh {20 168 22 11} type Radio down_box ROUND_DOWN_BOX
          }
        }
      }
      Fl_Button Ok_scc_rd {
        label Ok
        callback {MT->Set_Display_All(rb_show_all->value());

MT->Set_fov_adapt(
zm_adapt->value()
);


MT->save_ini_param();

MT->redraw();
options_lm_hide();}
        xywh {145 225 65 25} color 133 selection_color 92
      }
    }
    Fl_Window matWindow {
      label {Object Matrix}
      image {pixmap/s_back_13.gif} xywh {12 35 238 329} type Double color 215 hide non_modal
    } {
      Fl_Button Ok_mat {
        label Ok
        callback {float m1[16];
float m2[16];
int ok;
m2[0] = M2_00->value();
m2[1] = M2_01->value();
m2[2] = M2_02->value();
m2[3] = M2_03->value();
m2[4] = M2_10->value();
m2[5] = M2_11->value();
m2[6] = M2_12->value();
m2[7] = M2_13->value();
m2[8] = M2_20->value();
m2[9] = M2_21->value();
m2[10] = M2_22->value();
m2[11] = M2_23->value();
m2[12] = M2_30->value();
m2[13] = M2_31->value();
m2[14] = M2_32->value();
m2[15] = M2_33->value();

m1[0] = M1_00->value();
m1[1] = M1_01->value();
m1[2] = M1_02->value();
m1[3] = M1_03->value();
m1[4] = M1_10->value();
m1[5] = M1_11->value();
m1[6] = M1_12->value();
m1[7] = M1_13->value();
m1[8] = M1_20->value();
m1[9] = M1_21->value();
m1[10] = M1_22->value();
m1[11] = M1_23->value();
m1[12] = M1_30->value();
m1[13] = M1_31->value();
m1[14] = M1_32->value();
m1[15] = M1_33->value();



ok = MT->set_matrix(m1,m2,0);
MT->redraw();}
        tooltip {Apply these matrices to first selected object only} xywh {10 270 65 25} color 134 selection_color 92
      }
      Fl_Group Size_matrix {
        label {Aspect matrix}
        xywh {10 66 221 89} align 5
      } {
        Fl_Value_Input M1_00 {
          xywh {26 69 50 20} textsize 10
        }
        Fl_Value_Input M1_01 {
          xywh {78 69 50 20} textsize 10
        }
        Fl_Value_Input M1_02 {
          xywh {129 69 50 20} textsize 10
        }
        Fl_Value_Input M1_03 {
          xywh {181 69 50 20} textsize 10
        }
        Fl_Value_Input M1_10 {
          xywh {27 90 50 20} textsize 10
        }
        Fl_Value_Input M1_11 {
          xywh {78 90 50 20} textsize 10
        }
        Fl_Value_Input M1_12 {
          xywh {129 90 50 20} textsize 10
        }
        Fl_Value_Input M1_13 {
          xywh {181 90 50 20} textsize 10
        }
        Fl_Value_Input M1_20 {
          xywh {27 111 50 20} textsize 10
        }
        Fl_Value_Input M1_21 {
          xywh {78 111 50 20} textsize 10
        }
        Fl_Value_Input M1_22 {
          xywh {129 111 50 20} textsize 10
        }
        Fl_Value_Input M1_23 {
          xywh {181 111 50 20} textsize 10
        }
        Fl_Value_Input M1_30 {
          xywh {27 132 50 20} textsize 10
        }
        Fl_Value_Input M1_31 {
          xywh {78 132 50 20} textsize 10
        }
        Fl_Value_Input M1_32 {
          xywh {129 132 50 20} textsize 10
        }
        Fl_Value_Input M1_33 {
          xywh {181 132 50 20} textsize 10
        }
      }
      Fl_Group Position_matrix {
        label {Position matrix}
        xywh {10 175 230 85} align 5
      } {
        Fl_Value_Input M2_00 {
          xywh {26 177 50 20} textsize 10
        }
        Fl_Value_Input M2_01 {
          xywh {77 177 50 20} textsize 10
        }
        Fl_Value_Input M2_02 {
          xywh {130 177 50 20} textsize 10
        }
        Fl_Value_Input M2_03 {
          xywh {182 177 50 20} textsize 10
        }
        Fl_Value_Input M2_10 {
          xywh {26 198 50 20} textsize 10
        }
        Fl_Value_Input M2_11 {
          xywh {77 198 50 20} textsize 10
        }
        Fl_Value_Input M2_12 {
          xywh {129 198 51 20} textsize 10
        }
        Fl_Value_Input M2_13 {
          xywh {182 198 50 20} textsize 10
        }
        Fl_Value_Input M2_20 {
          xywh {26 219 50 20} textsize 10
        }
        Fl_Value_Input M2_21 {
          xywh {78 219 50 20} textsize 10
        }
        Fl_Value_Input M2_22 {
          xywh {130 219 50 20} textsize 10
        }
        Fl_Value_Input M2_23 {
          xywh {181 219 50 20} textsize 10
        }
        Fl_Value_Input M2_30 {
          xywh {26 240 50 20} textsize 10
        }
        Fl_Value_Input M2_31 {
          xywh {77 240 50 20} textsize 10
        }
        Fl_Value_Input M2_32 {
          xywh {130 240 50 20} textsize 10
        }
        Fl_Value_Input M2_33 {
          xywh {181 240 50 20} textsize 10
        }
      }
      Fl_Button Init_mat {
        label Init
        callback {M2_00->value(1);
M2_01->value(0);
M2_02->value(0);
M2_03->value(0);
M2_10->value(0);
M2_11->value(1);
M2_12->value(0);
M2_13->value(0);
M2_20->value(0);
M2_21->value(0);
M2_22->value(1);
M2_23->value(0);
M2_30->value(0);
M2_31->value(0);
M2_32->value(0);
M2_33->value(1);

M1_00->value(1);
M1_01->value(0);
M1_02->value(0);
M1_03->value(0);
M1_10->value(0);
M1_11->value(1);
M1_12->value(0);
M1_13->value(0);
M1_20->value(0);
M1_21->value(0);
M1_22->value(1);
M1_23->value(0);
M1_30->value(0);
M1_31->value(0);
M1_32->value(0);
M1_33->value(1);}
        tooltip {Reset to identity matrices} xywh {143 270 65 25} color 174 selection_color 132
      }
      Fl_Button conv_mat {
        label Conv
        callback {float m1_30 =M1_30->value();
float m1_31 =M1_31->value();
float m1_32 = M1_32->value();

float m2_30 =M2_30->value();
float m2_31 =M2_31->value();
float m2_32 = M2_32->value();


float m2_30n = M2_30->value() +M2_00->value()*M1_30->value() + M2_10->value()*M1_31->value() + M2_20->value()*M1_32->value();
float m2_31n = M2_31->value() +M2_01->value()*M1_30->value() + M2_11->value()*M1_31->value() + M2_21->value()*M1_32->value();
float m2_32n = M2_32->value() +M2_02->value()*M1_30->value() + M2_12->value()*M1_31->value() + M2_22->value()*M1_32->value();

M2_32->value(m2_32n);
M2_31->value(m2_31n);
M2_30->value(m2_30n);

M1_32->value(0);
M1_31->value(0);
M1_30->value(0);}
        tooltip {If object translation appears in "Aspect Matrix", put it into "Position Matrix" (old version correction)} xywh {167 270 65 25} color 81 hide
      }
      Fl_Button Ok_mat2 {
        label {Ok for all selected objects}
        callback {float m1[16];
float m2[16];
int ok;
m2[0] = M2_00->value();
m2[1] = M2_01->value();
m2[2] = M2_02->value();
m2[3] = M2_03->value();
m2[4] = M2_10->value();
m2[5] = M2_11->value();
m2[6] = M2_12->value();
m2[7] = M2_13->value();
m2[8] = M2_20->value();
m2[9] = M2_21->value();
m2[10] = M2_22->value();
m2[11] = M2_23->value();
m2[12] = M2_30->value();
m2[13] = M2_31->value();
m2[14] = M2_32->value();
m2[15] = M2_33->value();

m1[0] = M1_00->value();
m1[1] = M1_01->value();
m1[2] = M1_02->value();
m1[3] = M1_03->value();
m1[4] = M1_10->value();
m1[5] = M1_11->value();
m1[6] = M1_12->value();
m1[7] = M1_13->value();
m1[8] = M1_20->value();
m1[9] = M1_21->value();
m1[10] = M1_22->value();
m1[11] = M1_23->value();
m1[12] = M1_30->value();
m1[13] = M1_31->value();
m1[14] = M1_32->value();
m1[15] = M1_33->value();



ok = MT->set_matrix(m1,m2,1);
MT->redraw();}
        tooltip {Apply these matrices to all selected objects} xywh {10 300 170 25} color 128
      }
      Fl_Output MyName {
        label Name
        xywh {50 15 185 30} color 49
      }
      Fl_Button Refresh_mat {
        label Refresh
        callback {float m1[16];
float m2[16];
std::string Name;
int ok;
Name = MT->get_matrix(m1,m2);
if (Name.length()>0)
{
	M2_00->value(m2[0]);
	M2_01->value(m2[1]);
	M2_02->value(m2[2]);
	M2_03->value(m2[3]);
	M2_10->value(m2[4]);
	M2_11->value(m2[5]);
	M2_12->value(m2[6]);
	M2_13->value(m2[7]);
	M2_20->value(m2[8]);
	M2_21->value(m2[9]);
	M2_22->value(m2[10]);
	M2_23->value(m2[11]);
	M2_30->value(m2[12]);
	M2_31->value(m2[13]);
	M2_32->value(m2[14]);
	M2_33->value(m2[15]);

	M1_00->value(m1[0]);
	M1_01->value(m1[1]);
	M1_02->value(m1[2]);
	M1_03->value(m1[3]);
	M1_10->value(m1[4]);
	M1_11->value(m1[5]);
	M1_12->value(m1[6]);
	M1_13->value(m1[7]);
	M1_20->value(m1[8]);
	M1_21->value(m1[9]);
	M1_22->value(m1[10]);
	M1_23->value(m1[11]);
	M1_30->value(m1[12]);
	M1_31->value(m1[13]);
	M1_32->value(m1[14]);
	M1_33->value(m1[15]);
}
//MyName->insert_position(0);
//MyName->insert(Name);
//MyName->buffer(Name);
MyName->value(Name.c_str());}
        tooltip {Refresh matrices to first selected object} xywh {76 270 65 25} color 134 selection_color 92
      }
    }
    Fl_Window versionWindow {
      label About open
      xywh {1469 375 597 151} type Double hide modal
    } {
      Fl_Button Ok_Version {
        label Ok
        callback {version_hide();}
        xywh {265 120 65 25}
      }
      Fl_Input Version {
        label {Version :}
        xywh {168 6 70 25} box NO_BOX
      }
      Fl_Input Copyright {
        label {Copyright : Renaud Lebrun, Stefan Schlager and Ccile Peladan 2013-2015}
        xywh {580 26 15 25} box NO_BOX
      }
      Fl_Input Contact {
        label {Contact : renaud.lebrun<at>um2.fr}
        xywh {328 46 15 25} box NO_BOX
      }
      Fl_Input Website {
        label {Website : http://morphomuseum.com/meshtools}
        xywh {406 66 15 25} box NO_BOX
      }
      Fl_Box {} {
        image {pixmap/Mesh_Tools_Icon.png} xywh {3 12 100 68}
      }
      Fl_Input Git {
        label {Source repository : https://github.com/morphomuseum/ISE-MeshTools}
        xywh {487 86 15 25} box NO_BOX
      }
    }
    Fl_Window smoothWindow {
      label Smooth
      image {pixmap/s_back_13.gif} xywh {1175 444 247 130} type Double color 134 hide modal
    } {
      Fl_Value_Input S_Iteration_number {
        label {Iteration Number :}
        xywh {165 5 52 25} align 36 value 20
      }
      Fl_Button Ok_smooth {
        label Ok
        callback {MT->Mesh_Smooth(S_Iteration_number->value(),Relaxation->value());
smooth_hide();
MT->redraw();}
        xywh {53 80 65 25} color 93 selection_color 91
      }
      Fl_Value_Input Relaxation {
        label {Relaxation (0.001-0.1) :}
        xywh {165 35 52 25} align 36 value 0.01
      }
      Fl_Button Cancel_smooth {
        label Cancel
        callback {smooth_hide();}
        xywh {147 80 65 25} color 133 selection_color 132
      }
    }
    Fl_Window blendWindow {
      label {Alpha value (0-100)}
      image {pixmap/s_back_13.gif} xywh {66 52 177 82} type Double color 246 hide modal
    } {
      Fl_Value_Input Alpha_value {
        label {Alpha:}
        xywh {115 10 52 25} align 36
      }
      Fl_Button Ok_blend {
        label Ok
        callback {MT->Set_Blend(
Alpha_value->value()
);
blend_hide();
MT->redraw();}
        xywh {60 49 65 25} color 244
      }
    }
    Fl_Window gridsizeWindow {
      label {Grid size}
      image {pixmap/s_back_13.gif} xywh {1189 107 169 74} type Double color 246 hide modal
    } {
      Fl_Value_Input grid_size_value {
        label {Millimeter/square:}
        xywh {115 10 52 25} align 36
      }
      Fl_Button Ok_grid_size {
        label Ok
        callback {MT->Set_Grid_Size(
grid_size_value->value()
);
grid_size_hide();
MT->redraw();}
        xywh {60 49 65 25} color 238 selection_color 237
      }
    }
    Fl_Window zoomScaleWindow {
      label Scale
      image {pixmap/s_back_13.gif} xywh {-32000 -32000 177 82} type Double hide modal
    } {
      Fl_Value_Input TF100pixels_in_mm_value {
        label {100 Pixels in mm:}
        xywh {115 10 52 25} align 36
      }
      Fl_Button Ok_100pixels_in_mm {
        label Ok
        callback {MT->Set_100pixels_in_mm(
TF100pixels_in_mm_value->value()
);
zoomScaleWindow_hide();}
        xywh {60 49 65 25}
      }
    }
    Fl_Window curvWindow {
      label Curvature
      image {pixmap/s_back_13.gif} xywh {330 322 379 154} type Double color 215 hide modal
    } {
      Fl_Button Ok_curv {
        label Ok
        callback {int cv =1;
if (cv_1->value()==1){cv=1;}
else if (cv_2->value()==1){cv=2;}
else if (cv_3->value()==1){cv=3;}
else if (cv_4->value()==1){cv=4;}
MT->Set_Active_Scalar(cv);
MT->SC_calc_curvature(cv);
curv_hide();
MT->Update_RGB();
MT->redraw();}
        xywh {95 125 65 25} color 94 selection_color 93
      }
      Fl_Group curvature_computation_option {
        label {Compute :} open
        xywh {25 16 344 98} box BORDER_BOX color 93
      } {
        Fl_Round_Button cv_1 {
          label {Principal maximal curvature}
          xywh {26 16 25 25} type Radio down_box ROUND_DOWN_BOX
        }
        Fl_Round_Button cv_2 {
          label {Principal minimal curvature}
          xywh {26 36 25 25} type Radio down_box ROUND_DOWN_BOX
        }
        Fl_Round_Button cv_3 {
          label {Gaussian curvature}
          xywh {26 57 25 25} type Radio down_box ROUND_DOWN_BOX
        }
        Fl_Round_Button cv_4 {
          label {Mean curvature}
          xywh {26 76 25 33} type Radio down_box ROUND_DOWN_BOX value 1
        }
      }
      Fl_Button Cancel_curv {
        label Cancel
        callback {curv_hide();}
        xywh {198 125 65 25} color 133 selection_color 132
      }
    }
    Fl_Window deleteWindow {
      label {Delete small objects}
      image {pixmap/s_back_13.gif} xywh {9 38 264 96} type Double color 134 hide modal
    } {
      Fl_Value_Input Triangles {
        label {Min number of triangles}
        xywh {190 10 52 25} align 36 value 10000
      }
      Fl_Button Ok_delete {
        label Ok
        callback {MT->Delete_smaller_than(Triangles->value());
delete_hide();
MT->redraw();}
        xywh {63 51 65 25} color 130 selection_color 128
      }
      Fl_Button Cancel_delete {
        label Cancel
        callback {delete_hide();}
        xywh {137 51 65 25} color 133 selection_color 132
      }
    }
    Fl_Window deleteWindow2 {
      label {Delete small objects}
      image {pixmap/s_back_13.gif} xywh {427 172 264 96} type Double color 93 hide modal
    } {
      Fl_Value_Input DeleteVolume {
        label {Delete smaller than ... mm3}
        xywh {190 10 52 25} align 36 value 1000
      }
      Fl_Button Ok_delete_small_volume {
        label Ok
        callback {MT->Delete_volume_smaller_than(DeleteVolume->value());
delete2_hide();
MT->redraw();}
        xywh {63 51 65 25} color 90 selection_color 88
      }
      Fl_Button Cancel_volume_delete {
        label Cancel
        callback {delete2_hide();}
        xywh {137 51 65 25} color 94 selection_color 92
      }
    }
    Fl_Window defWindow {
      label {TPS Window}
      xywh {1535 374 344 154} type Double color 245 hide non_modal
    } {
      Fl_Value_Input Def_percentage {
        label {Deformation %:}
        xywh {293 37 35 25} maximum 500 step 1 value 100
      }
      Fl_Group tps_radio_buttons {
        label {Transformation basis} open
        xywh {45 56 120 64}
      } {
        Fl_Round_Button U_1 {
          label {U = r}
          xywh {46 56 25 27} type Radio down_box ROUND_DOWN_BOX value 1
        }
        Fl_Round_Button U_2 {
          label {U= rlog(r)}
          xywh {46 79 25 19} type Radio down_box ROUND_DOWN_BOX
        }
      }
      Fl_Button Okdef2 {
        label { Ok}
        callback {float percentage;
int basis;
if (U_1->value() == 1){basis = 0;}
if (U_2->value() == 1){basis = 1;}
percentage = Def_percentage->value();
// Write new code!
MT->Mesh_TPS(basis, percentage);
MT->redraw();}
        xywh {120 115 54 25} color 247 selection_color 80
      }
      Fl_Button Canceldef {
        label Cancel
        callback {//MT->Def_cancel_def();
MT->redraw();
def_hide();}
        xywh {200 115 60 25} color 247 selection_color 80
      }
    }
    Fl_Window LMcurveWindow {
      label {Curve decimation}
      image {pixmap/s_back_13.gif} xywh {9 38 315 143} type Double color 247 hide modal
    } {
      Fl_Value_Input CUR_NR {
        label {Landmark N / Curve :}
        xywh {172 5 95 30} align 36 value 20
      }
      Fl_Button Ok_curve_landmark {
        label Ok
        callback {int file_type =0;
file_type = LMK_VER3->value();
MT->Save_CUR_LMK_File(file_type,
CUR_NR->value()
);
lmcur_hide();}
        xywh {140 111 65 25} color 245 selection_color 246
      }
      Fl_Group LMK_GROUP_SAVE_OPTIONS3 {
        label {Save as :} open
        xywh {29 48 113 58} align 5
      } {
        Fl_Round_Button LMK_VER3 {
          label {.VER file }
          xywh {39 52 102 24} type Radio down_box ROUND_DOWN_BOX value 1
        }
        Fl_Round_Button LMK_LMK3 {
          label {.LMK file}
          xywh {39 73 102 22} type Radio down_box ROUND_DOWN_BOX
        }
      }
    }
    Fl_Window movehandlesWindow {
      label {Move Handles}
      image {pixmap/s_back_13.gif} xywh {1755 401 264 96} type Double color 91 hide modal
    } {
      Fl_Value_Input MovementIntensity {
        label {Movement intensity (%)}
        xywh {190 10 52 25} align 36 value 25
      }
      Fl_Button Ok_move_handles {
        label Ok
        callback {MT->Move_Selected_Handles(MovementIntensity->value());
MT->redraw();
movehandles_hide();}
        xywh {63 51 65 25} color 89 selection_color 80
      }
      Fl_Button Cancel_move_handles {
        label Cancel
        callback {movehandles_hide();}
        xywh {137 51 65 25} color 133 selection_color 92
      }
    }
    Fl_Window STLSaveWindow {
      label {STL save options}
      xywh {351 392 236 110} type Double color 215 hide non_modal
    } {
      Fl_Group STL_T_RB {
        label {File type} open
        xywh {35 25 75 61}
      } {
        Fl_Round_Button STL_T_0 {
          label Binary
          xywh {35 30 64 23} type Radio down_box ROUND_DOWN_BOX value 1
        }
        Fl_Round_Button STL_T_1 {
          label ASCII
          xywh {35 49 65 22} type Radio down_box ROUND_DOWN_BOX
        }
      }
      Fl_Group STL_M_RB {
        label Position open
        xywh {132 25 113 58}
      } {
        Fl_Round_Button STL_M_0 {
          label {Keep original}
          xywh {143 30 102 24} type Radio down_box ROUND_DOWN_BOX value 1
        }
        Fl_Round_Button STL_M_1 {
          label Modified
          xywh {143 50 102 22} type Radio down_box ROUND_DOWN_BOX
        }
      }
      Fl_Button OkSTLSave {
        label {Save STL}
        callback {int mode;
int type;
type=0;
mode=0;
if (STL_T_1->value() == 1){type = 1;}
if (STL_M_1->value() == 1){mode = 1;}
MT->Save_Mesh_File(type, mode, 0);
stl_hide();}
        xywh {49 85 90 25} color 175 selection_color 214
      }
      Fl_Button CancelSaveSTL {
        label Cancel
        callback {stl_hide();}
        xywh {146 86 60 25} color 174 selection_color 133
      }
    }
    Fl_Window VTKSaveWindow {
      label {VTK save options}
      xywh {12 34 252 126} type Double color 215 hide non_modal
    } {
      Fl_Group VTK_T_RB {
        label {File type} open
        xywh {35 25 75 61}
      } {
        Fl_Round_Button VTK_T_0 {
          label Binary
          xywh {35 30 64 23} type Radio down_box ROUND_DOWN_BOX value 1
        }
        Fl_Round_Button VTK_T_1 {
          label ASCII
          xywh {35 49 65 22} type Radio down_box ROUND_DOWN_BOX
        }
      }
      Fl_Group VTK_M_RB {
        label Position open
        xywh {132 25 113 58}
      } {
        Fl_Round_Button VTK_M_0 {
          label {Keep original}
          xywh {143 30 102 24} type Radio down_box ROUND_DOWN_BOX value 1
        }
        Fl_Round_Button VTK_M_1 {
          label Modified
          xywh {143 50 102 22} type Radio down_box ROUND_DOWN_BOX
        }
      }
      Fl_Button OkVTKSave {
        label {Save VTK}
        callback {int mode;
int type;
type=0;
mode=0;
if (VTK_T_1->value() == 1){type = 1;}
if (VTK_M_1->value() == 1){mode = 1;}
MT->Save_Mesh_File(type, mode, 1);
vtk_hide();}
        xywh {49 85 90 25} color 175 selection_color 214
      }
      Fl_Button CancelSaveVTK {
        label Cancel
        callback {vtk_hide();}
        xywh {146 86 60 25} color 174 selection_color 133
      }
    }
    Fl_Window OBJSaveWindow {
      label {OBJ save options}
      xywh {8 30 260 134} type Double color 215 hide non_modal
    } {
      Fl_Group OBJ_M_RB {
        label Position open
        xywh {45 25 113 58}
      } {
        Fl_Round_Button OBJ_M_0 {
          label {Keep original}
          xywh {56 30 102 24} type Radio down_box ROUND_DOWN_BOX value 1
        }
        Fl_Round_Button OBJ_M_1 {
          label Modified
          xywh {56 50 102 22} type Radio down_box ROUND_DOWN_BOX
        }
      }
      Fl_Button OkOBJSave {
        label {Save OBJ}
        callback {int mode;
int type;
type=1;
mode=0;
if (OBJ_M_1->value() == 1){mode = 1;}
MT->Save_Mesh_File(type, mode, 2);
obj_hide();}
        xywh {49 85 90 25} color 175 selection_color 214
      }
      Fl_Button CancelSaveOBJ {
        label Cancel
        callback {obj_hide();}
        xywh {146 86 60 25} color 174 selection_color 133
      }
    }
    Fl_Window PLYSaveWindow {
      label {PLY save options}
      xywh {636 209 448 140} type Double color 215 hide non_modal
    } {
      Fl_Group PLY_T_RB {
        label {File type}
        xywh {8 25 75 71}
      } {
        Fl_Round_Button PLY_T_0 {
          label {Binary litlle endian}
          xywh {8 30 64 23} type Radio down_box ROUND_DOWN_BOX value 1
        }
        Fl_Round_Button PLY_T_2 {
          label ASCII
          xywh {8 68 65 22} type Radio down_box ROUND_DOWN_BOX
        }
        Fl_Round_Button PLY_T_1 {
          label {Binary big endian}
          xywh {8 48 65 22} type Radio down_box ROUND_DOWN_BOX
        }
      }
      Fl_Group PLY_M_RB {
        label Position
        xywh {143 25 113 58}
      } {
        Fl_Round_Button PLY_M_0 {
          label {Keep original}
          xywh {154 30 102 23} type Radio down_box ROUND_DOWN_BOX value 1
        }
        Fl_Round_Button PLY_M_1 {
          label Modified
          xywh {154 50 102 22} type Radio down_box ROUND_DOWN_BOX
        }
      }
      Fl_Group PLY_N_RB {
        label Normales
        xywh {259 25 113 58}
      } {
        Fl_Round_Button PLY_N_0 {
          label {Do not save normales}
          xywh {270 30 102 24} type Radio down_box ROUND_DOWN_BOX value 1
        }
        Fl_Round_Button PLY_N_1 {
          label {Save normales}
          xywh {270 50 102 22} type Radio down_box ROUND_DOWN_BOX
        }
      }
      Fl_Button OkPLYSave {
        label {Save PLY}
        callback {int mode;
int type;
int save_norms;
type=0;
mode=0;
save_norms=0;
if (PLY_T_1->value() == 1){type = 1;}
if (PLY_T_2->value() == 1){type = 2;}
if (PLY_M_1->value() == 1){mode = 1;}
if (PLY_N_1->value() == 1){save_norms = 1;}
MT->Save_Mesh_File(type, mode, 3, save_norms);
ply_hide();}
        xywh {120 100 90 25} color 175 selection_color 214
      }
      Fl_Button CancelSavePLY {
        label Cancel
        callback {ply_hide();}
        xywh {226 100 60 25} color 174 selection_color 133
      }
    }
    Fl_Window decimateWindow {
      label Decimate
      image {pixmap/s_back_13.gif} xywh {648 292 389 211} type Double color 134 hide modal
    } {
      Fl_Value_Input DCM_factor {
        label {Decimation factor (%) :}
        xywh {210 115 52 30} align 36 value 20
      }
      Fl_Button Ok_decimate {
        label Ok
        callback {MT->Mesh_Decimate(DCM_factor->value(), dc_quadratic->value());
decimate_hide();
MT->redraw();}
        xywh {60 165 65 25} color 93 selection_color 91
      }
      Fl_Button Cancel_decimate {
        label Cancel
        callback {decimate_hide();}
        xywh {185 162 65 25} color 133 selection_color 132
      }
      Fl_Group decimate_options {
        label {Decimation filter} open
        xywh {20 30 355 70} box BORDER_BOX color 93
      } {
        Fl_Round_Button dc_quadratic {
          label {Quadratic decimation (usually performs better)}
          callback {MT->Set_Display_All(1);}
          xywh {34 45 25 25} type Radio down_box ROUND_DOWN_BOX value 1
        }
        Fl_Round_Button dc_pro {
          label {Pro decimation}
          xywh {34 65 25 32} type Radio down_box ROUND_DOWN_BOX
        }
      }
    }
    Fl_Window LMKSaveNormal {
      label {Save normal landmarks options}
      xywh {170 220 359 197} type Double color 215 hide non_modal
    } {
      Fl_Group LMK_GROUP_SAVE_OPTIONS {
        label {Save as :} open
        xywh {7 25 113 58}
      } {
        Fl_Round_Button LMK_VER {
          label {.VER file ( xyz coordinates + landmark orientation)}
          xywh {17 30 102 24} type Radio down_box ROUND_DOWN_BOX value 1
        }
        Fl_Round_Button LMK_LMK {
          label {.LMK file (xyz coordinates)}
          xywh {17 50 102 22} type Radio down_box ROUND_DOWN_BOX
        }
      }
      Fl_Button OkLMKSave1 {
        label {Save all landmarks}
        callback {int file_type;

file_type=0;
if (LMK_VER->value() == 1){file_type = 1;}
MT->Save_Landmarks(file_type, 0, 0);
lmk_hide();}
        xywh {15 105 205 25} color 175 selection_color 214
      }
      Fl_Button CancelSaveLMK {
        label Cancel
        callback {lmk_hide();}
        xywh {230 120 60 25} color 174 selection_color 133
      }
      Fl_Button OkLMKSave2 {
        label {Save only selected landmarks}
        callback {int file_type;

file_type=0;
if (LMK_VER->value() == 1){file_type = 1;}
MT->Save_Landmarks(file_type, 0, 1);
lmk_hide();}
        xywh {15 130 205 25} color 151 selection_color 214
      }
    }
    Fl_Window LMKSaveTarget {
      label {Save target landmarks options}
      xywh {1487 173 374 193} type Double color 215 hide non_modal
    } {
      Fl_Group LMK_GROUP_SAVE_OPTIONS2 {
        label {Save as :} open
        xywh {7 25 113 58}
      } {
        Fl_Round_Button LMK_VER2 {
          label {.VER file ( xyz coordinates + landmark orientation)}
          xywh {17 30 102 24} type Radio down_box ROUND_DOWN_BOX value 1
        }
        Fl_Round_Button LMK_LMK2 {
          label {.LMK file (xyz coordinates)}
          xywh {17 50 102 22} type Radio down_box ROUND_DOWN_BOX
        }
      }
      Fl_Button OkLMKSave3 {
        label {Save landmarks}
        callback {int file_type;

file_type=0;
if (LMK_VER2->value() == 1){file_type = 1;}

MT->Save_Landmarks(file_type, 1, 0);
lmk_hide2();}
        xywh {15 105 205 25} color 175 selection_color 214
      }
      Fl_Button CancelSaveLMK2 {
        label Cancel
        callback {lmk_hide2();}
        xywh {230 120 60 25} color 174 selection_color 133
      }
      Fl_Button OkLMKSave4 {
        label {Save only selected landmarks}
        callback {int file_type;

file_type=0;
if (LMK_VER->value() == 1){file_type = 1;}
MT->Save_Landmarks(file_type, 1, 1);
lmk_hide();}
        xywh {15 130 205 25} color 151 selection_color 214
      }
    }
    Fl_Window scWindow {
      label {Scalar rendering options}
      image {pixmap/s_back_13.gif} xywh {210 195 492 229} type Double color 214 hide non_modal
    } {
      Fl_Button Ok_sc {
        label Ok
        callback {MT->Set_sc_max(Max->value());
MT->Set_sc_min(Min->value());
if (sc_active->value()>=0)
{
	MT->Set_Active_Scalar(sc_active->value());
}

if (sc_cs->value()>=0)
{

	MT->SetColorScaleId(sc_cs->value());
}
scmin->value (MT->Get_sc_min());
scmax->value (MT->Get_sc_max());
scmin->maximum ((MT->Get_sc_max()+MT->Get_sc_min())/2);
scmin->minimum ((3*MT->Get_sc_min()-MT->Get_sc_max())/2);
scmax->minimum ((MT->Get_sc_max()+MT->Get_sc_min())/2);
scmax->maximum ((3*MT->Get_sc_max()-MT->Get_sc_min())/2);
scmax->redraw();
scmin->redraw();
MT->Update_RGB();
MT->redraw();
//sc_hide();}
        xywh {140 199 65 25} color 215
      }
      Fl_Slider scmin {
        label min
        callback {MT->Set_sc_min(((Fl_Slider *)o)->value());
sc_update();
MT->Update_RGB();
MT->redraw();}
        xywh {35 80 310 19} type {Horz Knob} color 215 align 4 when 4 minimum -2 maximum 0 step 0.01 value -1
      }
      Fl_Slider scmax {
        label max
        callback {MT->Set_sc_max(((Fl_Slider *)o)->value());
sc_update();
MT->Update_RGB();
MT->redraw();}
        xywh {35 105 310 19} type {Horz Knob} color 215 align 4 when 4 maximum 2 step 0.01 value 1
      }
      Fl_Value_Input Min {
        label {Scale min :}
        xywh {291 134 52 25} align 36
      }
      Fl_Value_Input Max {
        label {Scale max :}
        xywh {291 163 52 25} align 36
      }
      Fl_Value_Input Min_sc {
        label {Suggested min :}
        xywh {113 135 70 25}
      }
      Fl_Value_Input Max_sc {
        label {Suggested max :}
        xywh {113 163 70 25}
      }
      Fl_Choice sc_active {
        label {Chose active scalar}
        callback {MT->Set_Active_Scalar(
((Fl_Choice *)o)->value());
/*if (((Fl_Choice *)o)->value()==5)
{
	sc_cs->value(1);
	MT->SetColorScaleId(1);
	
}
else
{*/
	//sc_cs->value(0);
	//MT->SetColorScaleId(0);
	Max_sc->value(MT->scalars_get_max());
	Min_sc->value(MT->scalars_get_min());
//}
//MT->SetColorScaleId(1);

MT->Update_RGB();
MT->redraw();} open
        xywh {136 8 100 23} down_box BORDER_BOX
      } {}
      Fl_Button sc_right_01 {
        callback {Min->value(Min_sc->value());
//sc_hide();}
        image {pixmap/s_right_132.gif} xywh {185 135 30 25} color 215
      }
      Fl_Button sc_right_02 {
        callback {Max->value(Max_sc->value());
//sc_hide();}
        image {pixmap/s_right_132.gif} xywh {184 162 30 25} selection_color 215
      }
      Fl_Button Ok_sc2 {
        label {Init scalar}
        callback {MT->Initialize_Scalar(sc_active->value());
MT->redraw();
//sc_hide();}
        tooltip {Set current scalar values to 0 for all selected objects} xywh {240 4 70 30} color 215
      }
      Fl_Button Ok_sc3 {
        label {Remove scalar}
        callback {MT->Remove_Scalar(sc_active->value());
MT->redraw();
//sc_hide();}
        tooltip {Remove this scalar for all selected objects} xywh {315 5 102 30} color 215
      }
      Fl_Choice sc_cs {
        label {Chose colour scale}
        callback {MT->SetColorScaleId(
((Fl_Choice *)o)->value());

Max_sc->value(MT->scalars_get_max());
Min_sc->value(MT->scalars_get_min());
MT->Update_RGB();
MT->redraw();} open
        xywh {136 41 100 23} down_box BORDER_BOX
      } {}
      Fl_Check_Button above_Max {
        label {Show above max}
        callback {MT->SC_Show_Above_Max(((Fl_Check_Button *)o)->value());
MT->redraw();}
        xywh {358 106 64 15} down_box DOWN_BOX value 1
      }
      Fl_Check_Button below_Min {
        label {Show below min}
        callback {MT->SC_Show_Below_Min(((Fl_Check_Button *)o)->value());
MT->redraw();}
        xywh {358 84 64 15} down_box DOWN_BOX value 1
      }
    }
    Fl_Window thicknessWindow {
      label {Thickness Scalar}
      image {pixmap/s_back_13.gif} xywh {1421 275 245 121} type Double color 134 hide modal
    } {
      Fl_Button Ok_thickness {
        label Ok
        callback {MT->Set_Active_Scalar(5);
MT->SC_calc_thickness(Thickness_Max_Distance->value(), thicknessWindow);
thickness_hide();
MT->Update_RGB();
MT->redraw();}
        xywh {62 90 65 25} color 93 selection_color 91
      }
      Fl_Value_Input Thickness_Max_Distance {
        label {Maximal thickness (mm) :}
        xywh {165 17 52 25} align 36 value 2
      }
      Fl_Button Cancel_th {
        label Cancel
        callback {thickness_hide();}
        xywh {139 90 65 25} color 133 selection_color 132
      }
    }
    Fl_Window tagsWindow {
      label {Tag options}
      xywh {77 61 580 626} type Double color 215 hide non_modal
    } {
      Fl_Button Ok_tags {
        label Ok
        callback {MT->Set_Pencil_Extension_Level(Pencil_Tag_level->value());
MT->Set_Magic_Wand_Extension_Level(Magic_Wand_Limit->value());
MT->save_ini_param();

MT->redraw();
//tags_hide();}
        xywh {294 840 65 25} color 95 selection_color 94
      }
      Fl_Group TAG_TOOLS_OPTIONS {
        label {Tag tools}
        xywh {25 533 525 62} box BORDER_BOX color 175
      } {
        Fl_Value_Input Pencil_Tag_level {
          label {Pencil tag size}
          callback {MT->Set_Pencil_Extension_Level(Pencil_Tag_level->value());}
          tooltip Chose xywh {82 544 52 21} align 34 value 3
        }
        Fl_Value_Slider Magic_Wand_Limit {
          label {Magic wand limit angle}
          callback {MT->Set_Magic_Wand_Extension_Level(Magic_Wand_Limit->value());}
          tooltip {Chose magic wand maximal angle} xywh {215 546 155 20} type Horizontal color 94 selection_color 88 maximum 180 step 1 value 45 textsize 14
        }
        Fl_Check_Button Magic_Wand_Override {
          label {Allow colour override}
          callback {MT->Set_Magic_Wand_Override(Magic_Wand_Override->value());}
          xywh {466 545 20 15} down_box DOWN_BOX value 1 align 2
        }
      }
      Fl_Group Extract_Delete_Group {
        label {Tag extraction / deletion}
        xywh {21 755 524 72} box BORDER_BOX color 175
      } {
        Fl_Round_Button rb_extract00 {
          label {All points must satisfy condition(s)}
          callback {MT->Set_Tag_Extraction_Criterion(1);}
          xywh {31 777 20 16} type Radio down_box ROUND_DOWN_BOX value 1
        }
        Fl_Round_Button rb_extract01 {
          label {One point must satisfy condition(s)}
          callback {MT->Set_Tag_Extraction_Criterion(0);}
          xywh {31 797 20 16} type Radio down_box ROUND_DOWN_BOX
        }
        Fl_Input Extraction_text {
          label {For a given triangle:}
          xywh {188 759 15 14} box NO_BOX
        }
      }
      Fl_Scroll Tags_group {
        label {Define tag labels, colours and transparency} open
        xywh {20 20 540 480} type VERTICAL_ALWAYS box BORDER_BOX color 174
      } {
        Fl_Group Label_tag_group {
          label {                     Labels}
          xywh {37 66 211 589} color 94 align 5
        } {
          Fl_Input Tag_text_00 {
            callback {std::string label = ((Fl_Input*)o)->value();
MT->set_tag_label(0, label);}
            xywh {39 66 200 23}
          }
          Fl_Input Tag_text_01 {
            callback {std::string label = ((Fl_Input*)o)->value();
MT->set_tag_label(1, label);}
            xywh {39 89 200 23}
          }
          Fl_Input Tag_text_02 {
            callback {std::string label = ((Fl_Input*)o)->value();
MT->set_tag_label(2, label);}
            xywh {39 112 200 23}
          }
          Fl_Input Tag_text_03 {
            callback {std::string label = ((Fl_Input*)o)->value();
MT->set_tag_label(3, label);}
            xywh {39 135 200 23}
          }
          Fl_Input Tag_text_04 {
            callback {std::string label = ((Fl_Input*)o)->value();
MT->set_tag_label(4, label);}
            xywh {39 158 200 23}
          }
          Fl_Input Tag_text_05 {
            callback {std::string label = ((Fl_Input*)o)->value();
MT->set_tag_label(5, label);}
            xywh {39 181 200 23}
          }
          Fl_Input Tag_text_06 {
            callback {std::string label = ((Fl_Input*)o)->value();
MT->set_tag_label(6, label);}
            xywh {39 204 200 23}
          }
          Fl_Input Tag_text_07 {
            callback {std::string label = ((Fl_Input*)o)->value();
MT->set_tag_label(7, label);}
            xywh {39 227 200 23}
          }
          Fl_Input Tag_text_08 {
            callback {std::string label = ((Fl_Input*)o)->value();
MT->set_tag_label(8, label);}
            xywh {39 250 200 23}
          }
          Fl_Input Tag_text_09 {
            callback {std::string label = ((Fl_Input*)o)->value();
MT->set_tag_label(9, label);}
            xywh {39 273 200 23}
          }
          Fl_Input Tag_text_10 {
            callback {std::string label = ((Fl_Input*)o)->value();
MT->set_tag_label(10, label);}
            xywh {39 296 200 23}
          }
          Fl_Input Tag_text_11 {
            callback {std::string label = ((Fl_Input*)o)->value();
MT->set_tag_label(11, label);}
            xywh {39 319 200 23}
          }
          Fl_Input Tag_text_12 {
            callback {std::string label = ((Fl_Input*)o)->value();
MT->set_tag_label(12, label);}
            xywh {39 342 200 23}
          }
          Fl_Input Tag_text_13 {
            callback {std::string label = ((Fl_Input*)o)->value();
MT->set_tag_label(13, label);}
            xywh {39 365 200 23}
          }
          Fl_Input Tag_text_14 {
            callback {std::string label = ((Fl_Input*)o)->value();
MT->set_tag_label(14, label);}
            xywh {39 388 200 23}
          }
          Fl_Input Tag_text_15 {
            callback {std::string label = ((Fl_Input*)o)->value();
MT->set_tag_label(15, label);}
            xywh {39 411 200 23}
          }
          Fl_Input Tag_text_16 {
            callback {std::string label = ((Fl_Input*)o)->value();
MT->set_tag_label(16, label);}
            xywh {39 434 200 23}
          }
          Fl_Input Tag_text_17 {
            callback {std::string label = ((Fl_Input*)o)->value();
MT->set_tag_label(17, label);}
            xywh {39 457 200 23}
          }
          Fl_Input Tag_text_18 {
            callback {std::string label = ((Fl_Input*)o)->value();
MT->set_tag_label(18, label);}
            xywh {39 480 200 23}
          }
          Fl_Input Tag_text_19 {
            callback {std::string label = ((Fl_Input*)o)->value();
MT->set_tag_label(19, label);}
            xywh {39 503 200 23}
          }
          Fl_Input Tag_text_20 {
            callback {std::string label = ((Fl_Input*)o)->value();
MT->set_tag_label(20, label);}
            xywh {39 526 200 23}
          }
          Fl_Input Tag_text_21 {
            callback {std::string label = ((Fl_Input*)o)->value();
MT->set_tag_label(21, label);}
            xywh {39 549 200 23}
          }
          Fl_Input Tag_text_22 {
            callback {std::string label = ((Fl_Input*)o)->value();
MT->set_tag_label(22, label);}
            xywh {39 572 200 23}
          }
          Fl_Input Tag_text_23 {
            callback {std::string label = ((Fl_Input*)o)->value();
MT->set_tag_label(23, label);}
            xywh {39 595 200 23}
          }
          Fl_Input Tag_text_24 {
            callback {std::string label = ((Fl_Input*)o)->value();
MT->set_tag_label(24, label);}
            xywh {39 618 200 23}
          }
        }
        Fl_Group Active_tag_group {
          label {Active tag}
          xywh {220 66 45 589} color 94 align 5
        } {
          Fl_Round_Button rb_tag00 {
            callback {MT->Set_Active_Tag(0);}
            xywh {244 67 20 23} type Radio down_box ROUND_DOWN_BOX
          }
          Fl_Round_Button rb_tag01 {
            callback {MT->Set_Active_Tag(1);}
            xywh {244 90 20 23} type Radio down_box ROUND_DOWN_BOX value 1
          }
          Fl_Round_Button rb_tag02 {
            callback {MT->Set_Active_Tag(2);}
            xywh {244 113 20 23} type Radio down_box ROUND_DOWN_BOX
          }
          Fl_Round_Button rb_tag03 {
            callback {MT->Set_Active_Tag(3);}
            xywh {244 136 20 23} type Radio down_box ROUND_DOWN_BOX
          }
          Fl_Round_Button rb_tag04 {
            callback {MT->Set_Active_Tag(4);}
            xywh {244 159 20 23} type Radio down_box ROUND_DOWN_BOX
          }
          Fl_Round_Button rb_tag05 {
            callback {MT->Set_Active_Tag(5);}
            xywh {244 182 20 23} type Radio down_box ROUND_DOWN_BOX
          }
          Fl_Round_Button rb_tag06 {
            callback {MT->Set_Active_Tag(6);}
            xywh {244 205 20 23} type Radio down_box ROUND_DOWN_BOX
          }
          Fl_Round_Button rb_tag07 {
            callback {MT->Set_Active_Tag(7);}
            xywh {244 228 20 23} type Radio down_box ROUND_DOWN_BOX
          }
          Fl_Round_Button rb_tag08 {
            callback {MT->Set_Active_Tag(8);}
            xywh {244 251 20 23} type Radio down_box ROUND_DOWN_BOX
          }
          Fl_Round_Button rb_tag09 {
            callback {MT->Set_Active_Tag(9);}
            xywh {244 274 20 23} type Radio down_box ROUND_DOWN_BOX
          }
          Fl_Round_Button rb_tag10 {
            callback {MT->Set_Active_Tag(10);}
            xywh {244 297 20 23} type Radio down_box ROUND_DOWN_BOX
          }
          Fl_Round_Button rb_tag11 {
            callback {MT->Set_Active_Tag(11);}
            xywh {244 320 20 23} type Radio down_box ROUND_DOWN_BOX
          }
          Fl_Round_Button rb_tag12 {
            callback {MT->Set_Active_Tag(12);}
            xywh {244 343 20 23} type Radio down_box ROUND_DOWN_BOX
          }
          Fl_Round_Button rb_tag13 {
            callback {MT->Set_Active_Tag(13);}
            xywh {244 366 20 23} type Radio down_box ROUND_DOWN_BOX
          }
          Fl_Round_Button rb_tag14 {
            callback {MT->Set_Active_Tag(14);}
            xywh {244 389 20 23} type Radio down_box ROUND_DOWN_BOX
          }
          Fl_Round_Button rb_tag15 {
            callback {MT->Set_Active_Tag(15);}
            xywh {244 412 20 23} type Radio down_box ROUND_DOWN_BOX
          }
          Fl_Round_Button rb_tag16 {
            callback {MT->Set_Active_Tag(16);}
            xywh {244 435 20 23} type Radio down_box ROUND_DOWN_BOX
          }
          Fl_Round_Button rb_tag17 {
            callback {MT->Set_Active_Tag(17);}
            xywh {244 458 20 23} type Radio down_box ROUND_DOWN_BOX
          }
          Fl_Round_Button rb_tag18 {
            callback {MT->Set_Active_Tag(18);}
            xywh {244 481 20 23} type Radio down_box ROUND_DOWN_BOX
          }
          Fl_Round_Button rb_tag19 {
            callback {MT->Set_Active_Tag(19);}
            xywh {244 504 20 23} type Radio down_box ROUND_DOWN_BOX
          }
          Fl_Round_Button rb_tag20 {
            callback {MT->Set_Active_Tag(20);}
            xywh {244 527 20 23} type Radio down_box ROUND_DOWN_BOX
          }
          Fl_Round_Button rb_tag21 {
            callback {MT->Set_Active_Tag(21);}
            xywh {244 550 20 23} type Radio down_box ROUND_DOWN_BOX
          }
          Fl_Round_Button rb_tag22 {
            callback {MT->Set_Active_Tag(22);}
            xywh {244 573 20 23} type Radio down_box ROUND_DOWN_BOX
          }
          Fl_Round_Button rb_tag23 {
            callback {MT->Set_Active_Tag(23);}
            xywh {244 596 20 23} type Radio down_box ROUND_DOWN_BOX
          }
          Fl_Round_Button rb_tag24 {
            callback {MT->Set_Active_Tag(24);}
            xywh {244 619 21 23} type Radio down_box ROUND_DOWN_BOX
          }
        }
        Fl_Group Alpha_group {
          label Alpha
          xywh {382 66 35 589} color 94 align 5
        } {
          Fl_Value_Input Alpha_00 {
            callback {MT->set_tag_alpha(0,
((Fl_Value_Input*)o)->value());
MT->redraw();}
            xywh {387 66 30 22}
          }
          Fl_Value_Input Alpha_01 {
            callback {MT->set_tag_alpha(1,
((Fl_Value_Input*)o)->value());
MT->redraw();}
            xywh {387 88 30 23}
          }
          Fl_Value_Input Alpha_02 {
            callback {MT->set_tag_alpha(2,
((Fl_Value_Input*)o)->value());
MT->redraw();}
            xywh {387 111 30 23}
          }
          Fl_Value_Input Alpha_03 {
            callback {MT->set_tag_alpha(3,
((Fl_Value_Input*)o)->value());
MT->redraw();}
            xywh {387 134 30 23}
          }
          Fl_Value_Input Alpha_04 {
            callback {MT->set_tag_alpha(4,
((Fl_Value_Input*)o)->value());
MT->redraw();}
            xywh {387 157 30 23}
          }
          Fl_Value_Input Alpha_05 {
            callback {MT->set_tag_alpha(5,
((Fl_Value_Input*)o)->value());
MT->redraw();}
            xywh {387 180 30 23}
          }
          Fl_Value_Input Alpha_06 {
            callback {MT->set_tag_alpha(6,
((Fl_Value_Input*)o)->value());
MT->redraw();}
            xywh {387 203 30 23}
          }
          Fl_Value_Input Alpha_07 {
            callback {MT->set_tag_alpha(7,
((Fl_Value_Input*)o)->value());
MT->redraw();}
            xywh {387 226 30 23}
          }
          Fl_Value_Input Alpha_08 {
            callback {MT->set_tag_alpha(8,
((Fl_Value_Input*)o)->value());
MT->redraw();}
            xywh {387 249 30 23}
          }
          Fl_Value_Input Alpha_09 {
            callback {MT->set_tag_alpha(9,
((Fl_Value_Input*)o)->value());
MT->redraw();}
            xywh {387 272 30 23}
          }
          Fl_Value_Input Alpha_10 {
            callback {MT->set_tag_alpha(10,
((Fl_Value_Input*)o)->value());
MT->redraw();}
            xywh {387 295 30 23}
          }
          Fl_Value_Input Alpha_11 {
            callback {MT->set_tag_alpha(11,
((Fl_Value_Input*)o)->value());
MT->redraw();}
            xywh {387 318 30 23}
          }
          Fl_Value_Input Alpha_12 {
            callback {MT->set_tag_alpha(12,
((Fl_Value_Input*)o)->value());
MT->redraw();}
            xywh {387 341 30 23}
          }
          Fl_Value_Input Alpha_13 {
            callback {MT->set_tag_alpha(13,
((Fl_Value_Input*)o)->value());
MT->redraw();}
            xywh {387 364 30 23}
          }
          Fl_Value_Input Alpha_14 {
            callback {MT->set_tag_alpha(14,
((Fl_Value_Input*)o)->value());
MT->redraw();}
            xywh {387 387 30 23}
          }
          Fl_Value_Input Alpha_15 {
            callback {MT->set_tag_alpha(15,
((Fl_Value_Input*)o)->value());
MT->redraw();}
            xywh {387 410 30 23}
          }
          Fl_Value_Input Alpha_16 {
            callback {MT->set_tag_alpha(16,
((Fl_Value_Input*)o)->value());
MT->redraw();}
            xywh {387 433 30 23}
          }
          Fl_Value_Input Alpha_17 {
            callback {MT->set_tag_alpha(17,
((Fl_Value_Input*)o)->value());
MT->redraw();}
            xywh {387 456 30 23}
          }
          Fl_Value_Input Alpha_18 {
            callback {MT->set_tag_alpha(18,
((Fl_Value_Input*)o)->value());
MT->redraw();}
            xywh {387 479 30 23}
          }
          Fl_Value_Input Alpha_19 {
            callback {MT->set_tag_alpha(19,
((Fl_Value_Input*)o)->value());
MT->redraw();}
            xywh {387 502 30 23}
          }
          Fl_Value_Input Alpha_20 {
            callback {MT->set_tag_alpha(20,
((Fl_Value_Input*)o)->value());
MT->redraw();}
            xywh {387 525 30 23}
          }
          Fl_Value_Input Alpha_21 {
            callback {MT->set_tag_alpha(21,
((Fl_Value_Input*)o)->value());
MT->redraw();}
            xywh {387 549 30 23}
          }
          Fl_Value_Input Alpha_22 {
            callback {MT->set_tag_alpha(22,
((Fl_Value_Input*)o)->value());
MT->redraw();}
            xywh {387 573 30 23}
          }
          Fl_Value_Input Alpha_23 {
            callback {MT->set_tag_alpha(23,
((Fl_Value_Input*)o)->value());
MT->redraw();}
            xywh {387 595 30 23}
          }
          Fl_Value_Input Alpha_24 {
            callback {MT->set_tag_alpha(24,
((Fl_Value_Input*)o)->value());
MT->redraw();}
            xywh {387 618 30 25}
          }
        }
        Fl_Group Tag_color_group {
          label {          Colour} open
          xywh {274 66 111 589} color 94 align 5 resizable
        } {
          Fl_Button Tag_00 {
            label {Tag 00}
            callback {Fl_Color c = FL_GRAY;
uchar r,g,b;
Fl::get_color(c,r,g,b);
if(!fl_color_chooser("New color:",r,g,b)) return;
c = fl_rgb_color(r,g,b);
o->color(c);
o->redraw();
MT->set_tag_color(0,r,g,b);
MT->redraw();}
            xywh {274 66 111 23} color 46 labelcolor 32
          }
          Fl_Button Tag_01 {
            label {Tag 01}
            callback {Fl_Color c = FL_GRAY;
uchar r,g,b;
Fl::get_color(c,r,g,b);
if(!fl_color_chooser("New color:",r,g,b)) return;
c = fl_rgb_color(r,g,b);
o->color(c);
o->redraw();
MT->set_tag_color(1,r,g,b);
MT->redraw();}
            xywh {274 89 111 23} color 46 labelcolor 32
          }
          Fl_Button Tag_02 {
            label {Tag 02}
            callback {Fl_Color c = FL_GRAY;
uchar r,g,b;
Fl::get_color(c,r,g,b);
if(!fl_color_chooser("New color:",r,g,b)) return;
c = fl_rgb_color(r,g,b);
o->color(c);
o->redraw();
MT->set_tag_color(2,r,g,b);
MT->redraw();}
            xywh {274 112 111 23} color 46 labelcolor 32
          }
          Fl_Button Tag_03 {
            label {Tag 03}
            callback {Fl_Color c = FL_GRAY;
uchar r,g,b;
Fl::get_color(c,r,g,b);
if(!fl_color_chooser("New color:",r,g,b)) return;
c = fl_rgb_color(r,g,b);
o->color(c);
o->redraw();
MT->set_tag_color(3,r,g,b);
MT->redraw();}
            xywh {274 135 111 23} color 46 labelcolor 32
          }
          Fl_Button Tag_04 {
            label {Tag 04}
            callback {Fl_Color c = FL_GRAY;
uchar r,g,b;
Fl::get_color(c,r,g,b);
if(!fl_color_chooser("New color:",r,g,b)) return;
c = fl_rgb_color(r,g,b);
o->color(c);
o->redraw();
MT->set_tag_color(4,r,g,b);
MT->redraw();}
            xywh {274 158 111 23} color 46 labelcolor 32
          }
          Fl_Button Tag_05 {
            label {Tag 05}
            callback {Fl_Color c = FL_GRAY;
uchar r,g,b;
Fl::get_color(c,r,g,b);
if(!fl_color_chooser("New color:",r,g,b)) return;
c = fl_rgb_color(r,g,b);
o->color(c);
o->redraw();
MT->set_tag_color(5,r,g,b);
MT->redraw();}
            xywh {274 181 111 23} color 46 labelcolor 32
          }
          Fl_Button Tag_06 {
            label {Tag 06}
            callback {Fl_Color c = FL_GRAY;
uchar r,g,b;
Fl::get_color(c,r,g,b);
if(!fl_color_chooser("New color:",r,g,b)) return;
c = fl_rgb_color(r,g,b);
o->color(c);
o->redraw();
MT->set_tag_color(6,r,g,b);
MT->redraw();}
            xywh {274 204 111 23} color 46 labelcolor 32
          }
          Fl_Button Tag_07 {
            label {Tag 07}
            callback {Fl_Color c = FL_GRAY;
uchar r,g,b;
Fl::get_color(c,r,g,b);
if(!fl_color_chooser("New color:",r,g,b)) return;
c = fl_rgb_color(r,g,b);
o->color(c);
o->redraw();
MT->set_tag_color(7,r,g,b);
MT->redraw();}
            xywh {274 227 111 23} color 46 labelcolor 32
          }
          Fl_Button Tag_08 {
            label {Tag 08}
            callback {Fl_Color c = FL_GRAY;
uchar r,g,b;
Fl::get_color(c,r,g,b);
if(!fl_color_chooser("New color:",r,g,b)) return;
c = fl_rgb_color(r,g,b);
o->color(c);
o->redraw();
MT->set_tag_color(8,r,g,b);
MT->redraw();}
            xywh {274 250 111 23} color 46 labelcolor 32
          }
          Fl_Button Tag_09 {
            label {Tag 09}
            callback {Fl_Color c = FL_GRAY;
uchar r,g,b;
Fl::get_color(c,r,g,b);
if(!fl_color_chooser("New color:",r,g,b)) return;
c = fl_rgb_color(r,g,b);
o->color(c);
o->redraw();
MT->set_tag_color(9,r,g,b);
MT->redraw();}
            xywh {274 273 111 23} color 46 labelcolor 32
          }
          Fl_Button Tag_10 {
            label {Tag 10}
            callback {Fl_Color c = FL_GRAY;
uchar r,g,b;
Fl::get_color(c,r,g,b);
if(!fl_color_chooser("New color:",r,g,b)) return;
c = fl_rgb_color(r,g,b);
o->color(c);
o->redraw();
MT->set_tag_color(10,r,g,b);
MT->redraw();}
            xywh {274 296 111 23} color 46 labelcolor 32
          }
          Fl_Button Tag_11 {
            label {Tag 11}
            callback {Fl_Color c = FL_GRAY;
uchar r,g,b;
Fl::get_color(c,r,g,b);
if(!fl_color_chooser("New color:",r,g,b)) return;
c = fl_rgb_color(r,g,b);
o->color(c);
o->redraw();
MT->set_tag_color(11,r,g,b);
MT->redraw();}
            xywh {274 319 111 23} color 46 labelcolor 32
          }
          Fl_Button Tag_12 {
            label {Tag 12}
            callback {Fl_Color c = FL_GRAY;
uchar r,g,b;
Fl::get_color(c,r,g,b);
if(!fl_color_chooser("New color:",r,g,b)) return;
c = fl_rgb_color(r,g,b);
o->color(c);
o->redraw();
MT->set_tag_color(12,r,g,b);
MT->redraw();}
            xywh {274 342 111 23} color 46 labelcolor 32
          }
          Fl_Button Tag_13 {
            label {Tag 13}
            callback {Fl_Color c = FL_GRAY;
uchar r,g,b;
Fl::get_color(c,r,g,b);
if(!fl_color_chooser("New color:",r,g,b)) return;
c = fl_rgb_color(r,g,b);
o->color(c);
o->redraw();
MT->set_tag_color(13,r,g,b);
MT->redraw();}
            xywh {274 365 111 23} color 46 labelcolor 32
          }
          Fl_Button Tag_14 {
            label {Tag 14}
            callback {Fl_Color c = FL_GRAY;
uchar r,g,b;
Fl::get_color(c,r,g,b);
if(!fl_color_chooser("New color:",r,g,b)) return;
c = fl_rgb_color(r,g,b);
o->color(c);
o->redraw();
MT->set_tag_color(14,r,g,b);
MT->redraw();}
            xywh {274 388 111 23} color 46 labelcolor 32
          }
          Fl_Button Tag_15 {
            label {Tag 15}
            callback {Fl_Color c = FL_GRAY;
uchar r,g,b;
Fl::get_color(c,r,g,b);
if(!fl_color_chooser("New color:",r,g,b)) return;
c = fl_rgb_color(r,g,b);
o->color(c);
o->redraw();
MT->set_tag_color(15,r,g,b);
MT->redraw();}
            xywh {274 411 111 23} color 46 labelcolor 32
          }
          Fl_Button Tag_16 {
            label {Tag 16}
            callback {Fl_Color c = FL_GRAY;
uchar r,g,b;
Fl::get_color(c,r,g,b);
if(!fl_color_chooser("New color:",r,g,b)) return;
c = fl_rgb_color(r,g,b);
o->color(c);
o->redraw();
MT->set_tag_color(16,r,g,b);
MT->redraw();}
            xywh {274 434 111 23} color 46 labelcolor 32
          }
          Fl_Button Tag_17 {
            label {Tag 17}
            callback {Fl_Color c = FL_GRAY;
uchar r,g,b;
Fl::get_color(c,r,g,b);
if(!fl_color_chooser("New color:",r,g,b)) return;
c = fl_rgb_color(r,g,b);
o->color(c);
o->redraw();
MT->set_tag_color(17,r,g,b);
MT->redraw();}
            xywh {274 457 111 23} color 46 labelcolor 32
          }
          Fl_Button Tag_18 {
            label {Tag 18}
            callback {Fl_Color c = FL_GRAY;
uchar r,g,b;
Fl::get_color(c,r,g,b);
if(!fl_color_chooser("New color:",r,g,b)) return;
c = fl_rgb_color(r,g,b);
o->color(c);
o->redraw();
MT->set_tag_color(18,r,g,b);
MT->redraw();}
            xywh {274 480 111 23} color 46 labelcolor 32
          }
          Fl_Button Tag_19 {
            label {Tag 19}
            callback {Fl_Color c = FL_GRAY;
uchar r,g,b;
Fl::get_color(c,r,g,b);
if(!fl_color_chooser("New color:",r,g,b)) return;
c = fl_rgb_color(r,g,b);
o->color(c);
o->redraw();
MT->set_tag_color(19,r,g,b);
MT->redraw();}
            xywh {274 503 111 23} color 46 labelcolor 32
          }
          Fl_Button Tag_20 {
            label {Tag 20}
            callback {Fl_Color c = FL_GRAY;
uchar r,g,b;
Fl::get_color(c,r,g,b);
if(!fl_color_chooser("New color:",r,g,b)) return;
c = fl_rgb_color(r,g,b);
o->color(c);
o->redraw();
MT->set_tag_color(20,r,g,b);
MT->redraw();}
            xywh {274 526 111 23} color 46 labelcolor 32
          }
          Fl_Button Tag_21 {
            label {Tag 21}
            callback {Fl_Color c = FL_GRAY;
uchar r,g,b;
Fl::get_color(c,r,g,b);
if(!fl_color_chooser("New color:",r,g,b)) return;
c = fl_rgb_color(r,g,b);
o->color(c);
o->redraw();
MT->set_tag_color(21,r,g,b);
MT->redraw();}
            xywh {274 549 111 23} color 46 labelcolor 32
          }
          Fl_Button Tag_22 {
            label {Tag 22}
            callback {Fl_Color c = FL_GRAY;
uchar r,g,b;
Fl::get_color(c,r,g,b);
if(!fl_color_chooser("New color:",r,g,b)) return;
c = fl_rgb_color(r,g,b);
o->color(c);
o->redraw();
MT->set_tag_color(22,r,g,b);
MT->redraw();}
            xywh {274 572 111 23} color 46 labelcolor 32
          }
          Fl_Button Tag_23 {
            label {Tag 23}
            callback {Fl_Color c = FL_GRAY;
uchar r,g,b;
Fl::get_color(c,r,g,b);
if(!fl_color_chooser("New color:",r,g,b)) return;
c = fl_rgb_color(r,g,b);
o->color(c);
o->redraw();
MT->set_tag_color(23,r,g,b);
MT->redraw();}
            xywh {274 595 111 23} color 46 labelcolor 32
          }
          Fl_Button Tag_24 {
            label {Tag 24}
            callback {Fl_Color c = FL_GRAY;
uchar r,g,b;
Fl::get_color(c,r,g,b);
if(!fl_color_chooser("New color:",r,g,b)) return;
c = fl_rgb_color(r,g,b);
o->color(c);
o->redraw();
MT->set_tag_color(24,r,g,b);
//std::cout<<"r"<<r*255<<"g"<<g*255<<"b"<<b*255<<std::endl;
MT->redraw();}
            xywh {274 618 111 25} color 46 labelcolor 32
          }
        }
        Fl_Group Clear_group {open
          xywh {420 43 60 612} color 94 align 5
        } {
          Fl_Button Clear_01 {
            label Clear
            callback {MT->Merge_Tags(1,0);
MT->redraw();}
            xywh {421 90 54 23} color 94 labelcolor 32
          }
          Fl_Button Clear_02 {
            label Clear
            callback {MT->Merge_Tags(2,0);
MT->redraw();}
            xywh {421 113 54 23} color 94 labelcolor 32
          }
          Fl_Button Clear_03 {
            label Clear
            callback {MT->Merge_Tags(3,0);
MT->redraw();}
            xywh {421 136 54 23} color 94 labelcolor 32
          }
          Fl_Button Clear_04 {
            label Clear
            callback {MT->Merge_Tags(4,0);
MT->redraw();}
            xywh {421 159 54 23} color 94 labelcolor 32
          }
          Fl_Button Clear_05 {
            label Clear
            callback {MT->Merge_Tags(5,0);
MT->redraw();}
            xywh {421 182 54 23} color 94 labelcolor 32
          }
          Fl_Button Clear_06 {
            label Clear
            callback {MT->Merge_Tags(6,0);
MT->redraw();}
            xywh {421 205 54 23} color 94 labelcolor 32
          }
          Fl_Button Clear_07 {
            label Clear
            callback {MT->Merge_Tags(7,0);
MT->redraw();}
            xywh {421 228 54 23} color 94 labelcolor 32
          }
          Fl_Button Clear_08 {
            label Clear
            callback {MT->Merge_Tags(8,0);
MT->redraw();}
            xywh {421 251 54 23} color 94 labelcolor 32
          }
          Fl_Button Clear_09 {
            label Clear
            callback {MT->Merge_Tags(9,0);
MT->redraw();}
            xywh {421 274 54 23} color 94 labelcolor 32
          }
          Fl_Button Clear_10 {
            label Clear
            callback {MT->Merge_Tags(10,0);
MT->redraw();}
            xywh {421 297 54 23} color 94 labelcolor 32
          }
          Fl_Button Clear_11 {
            label Clear
            callback {MT->Merge_Tags(11,0);
MT->redraw();}
            xywh {421 320 54 23} color 94 labelcolor 32
          }
          Fl_Button Clear_12 {
            label Clear
            callback {MT->Merge_Tags(12,0);
MT->redraw();}
            xywh {421 343 54 23} color 94 labelcolor 32
          }
          Fl_Button Clear_13 {
            label Clear
            callback {MT->Merge_Tags(13,0);
MT->redraw();}
            xywh {421 366 54 23} color 94 labelcolor 32
          }
          Fl_Button Clear_14 {
            label Clear
            callback {MT->Merge_Tags(14,0);
MT->redraw();}
            xywh {421 389 54 23} color 94 labelcolor 32
          }
          Fl_Button Clear_15 {
            label Clear
            callback {MT->Merge_Tags(15,0);
MT->redraw();}
            xywh {421 412 54 23} color 94 labelcolor 32
          }
          Fl_Button Clear_16 {
            label Clear
            callback {MT->Merge_Tags(16,0);
MT->redraw();}
            xywh {421 435 54 23} color 94 labelcolor 32
          }
          Fl_Button Clear_17 {
            label Clear
            callback {MT->Merge_Tags(17,0);
MT->redraw();}
            xywh {421 458 54 23} color 94 labelcolor 32
          }
          Fl_Button Clear_18 {
            label Clear
            callback {MT->Merge_Tags(18,0);
MT->redraw();}
            xywh {421 481 54 23} color 94 labelcolor 32
          }
          Fl_Button Clear_19 {
            label Clear
            callback {MT->Merge_Tags(19,0);
MT->redraw();}
            xywh {421 504 54 23} color 94 labelcolor 32
          }
          Fl_Button Clear_20 {
            label Clear
            callback {MT->Merge_Tags(20,0);
MT->redraw();}
            xywh {421 527 54 23} color 94 labelcolor 32
          }
          Fl_Button Clear_21 {
            label Clear
            callback {MT->Merge_Tags(21,0);
MT->redraw();}
            xywh {421 550 54 23} color 94 labelcolor 32
          }
          Fl_Button Clear_22 {
            label Clear
            callback {MT->Merge_Tags(22,0);
MT->redraw();}
            xywh {421 573 54 23} color 94 labelcolor 32
          }
          Fl_Button Clear_23 {
            label Clear
            callback {MT->Merge_Tags(23,0);
MT->redraw();}
            xywh {421 596 54 23} color 94 labelcolor 32
          }
          Fl_Button Clear_24 {
            label Clear
            callback {MT->Merge_Tags(24,0);
MT->redraw();}
            xywh {421 619 54 23} color 94 labelcolor 32
          }
          Fl_Button Clear_00 {
            label Clear
            callback {MT->Merge_Tags(0,0);
MT->redraw();}
            xywh {421 67 54 23} color 94 labelcolor 32
          }
        }
        Fl_Group Fill_holes_group {open
          xywh {470 43 69 612} color 92 align 5
        } {
          Fl_Button FH_01 {
            label {Fill holes}
            callback {//MT->Fill_Holes(1);
fillholes2_show(1);
//MT->redraw();}
            xywh {471 90 59 23} color 93 labelcolor 32
          }
          Fl_Button FH_02 {
            label {Fill holes}
            callback {fillholes2_show(2);}
            xywh {471 113 59 24} color 93 labelcolor 32
          }
          Fl_Button FH_03 {
            label {Fill holes}
            callback {fillholes2_show(3);}
            xywh {471 136 59 23} color 93 labelcolor 32
          }
          Fl_Button FH_04 {
            label {Fill holes}
            callback {fillholes2_show(4);}
            xywh {471 159 59 23} color 93 labelcolor 32
          }
          Fl_Button FH_05 {
            label {Fill holes}
            callback {fillholes2_show(5);}
            xywh {471 182 59 23} color 93 labelcolor 32
          }
          Fl_Button FH_06 {
            label {Fill holes}
            callback {fillholes2_show(6);}
            xywh {471 205 59 23} color 93 labelcolor 32
          }
          Fl_Button FH_07 {
            label {Fill holes}
            callback {fillholes2_show(7);}
            xywh {471 228 59 23} color 93 labelcolor 32
          }
          Fl_Button FH_08 {
            label {Fill holes}
            callback {fillholes2_show(8);}
            xywh {471 251 59 23} color 93 labelcolor 32
          }
          Fl_Button FH_09 {
            label {Fill holes}
            callback {fillholes2_show(9);}
            xywh {471 274 59 23} color 93 labelcolor 32
          }
          Fl_Button FH_10 {
            label {Fill holes}
            callback {fillholes2_show(10);}
            xywh {471 297 59 23} color 93 labelcolor 32
          }
          Fl_Button FH_11 {
            label {Fill holes}
            callback {fillholes2_show(11);}
            xywh {471 320 59 23} color 93 labelcolor 32
          }
          Fl_Button FH_12 {
            label {Fill holes}
            callback {fillholes2_show(12);}
            xywh {471 343 59 23} color 93 labelcolor 32
          }
          Fl_Button FH_13 {
            label {Fill holes}
            callback {fillholes2_show(13);}
            xywh {471 366 59 23} color 93 labelcolor 32
          }
          Fl_Button FH_14 {
            label {Fill holes}
            callback {fillholes2_show(14);}
            xywh {471 389 59 23} color 93 labelcolor 32
          }
          Fl_Button FH_15 {
            label {Fill holes}
            callback {fillholes2_show(15);}
            xywh {471 412 59 23} color 93 labelcolor 32
          }
          Fl_Button FH_16 {
            label {Fill holes}
            callback {fillholes2_show(16);}
            xywh {471 435 59 23} color 93 labelcolor 32
          }
          Fl_Button FH_17 {
            label {Fill holes}
            callback {fillholes2_show(17);}
            xywh {471 458 59 23} color 93 labelcolor 32
          }
          Fl_Button FH_18 {
            label {Fill holes}
            callback {fillholes2_show(18);}
            xywh {471 481 59 23} color 93 labelcolor 32
          }
          Fl_Button FH_19 {
            label {Fill holes}
            callback {fillholes2_show(19);}
            xywh {471 504 59 23} color 93 labelcolor 32
          }
          Fl_Button FH_20 {
            label {Fill holes}
            callback {fillholes2_show(20);}
            xywh {471 527 59 23} color 93 labelcolor 32
          }
          Fl_Button FH_21 {
            label {Fill holes}
            callback {fillholes2_show(21);}
            xywh {471 550 59 23} color 93 labelcolor 32
          }
          Fl_Button FH_22 {
            label {Fill holes}
            callback {fillholes2_show(22);}
            xywh {471 573 59 23} color 93 labelcolor 32
          }
          Fl_Button FH_23 {
            label {Fill holes}
            callback {fillholes2_show(23);}
            xywh {471 596 59 23} color 93 labelcolor 32
          }
          Fl_Button FH_24 {
            label {Fill holes}
            callback {fillholes2_show(24);}
            xywh {471 619 59 23} color 93 labelcolor 32
          }
          Fl_Button FH_00 {
            label {Fill holes}
            callback {//MT->Fill_Holes(1);
fillholes2_show(0);
//MT->redraw();}
            xywh {471 67 59 23} color 93 labelcolor 32
          }
        }
      }
    }
    Fl_Window mergetagsWindow {
      label {Merge Tags : put Source into Target}
      image {pixmap/s_back_13.gif} xywh {16 39 296 73} type Double color 214 hide non_modal
    } {
      Fl_Choice merge_source {
        label {Source Tag} open
        xywh {92 8 100 23} down_box BORDER_BOX
      } {}
      Fl_Button Ok_merge {
        label Merge
        callback {MT->Merge_Tags(merge_source->value(), 
merge_target->value());
MT->redraw();
//sc_hide();}
        tooltip {Set current scalar values to 0 for all selected objects} xywh {208 7 70 30} color 215
      }
      Fl_Choice merge_target {
        label {Target Tag} open
        xywh {92 41 100 23} down_box BORDER_BOX
      } {}
      Fl_Button Cancel_merge_tags {
        label Cancel
        callback {mergetags_hide();}
        xywh {210 41 65 25} color 254 selection_color 252
      }
    }
    Fl_Window extractregionWindow {
      label {Extract tagged region}
      image {pixmap/s_back_13.gif} xywh {1115 102 243 118} type Double color 134 hide modal
    } {
      Fl_Value_Input Tag_value {
        label {Tag value to extract :}
        xywh {165 17 52 25} align 36 value 2
      }
      Fl_Button Ok_extractregion {
        label Ok
        callback {MT->Mesh_Extract_Tag(Tag_value->value());
MT->redraw();
extractregion_hide();}
        xywh {43 80 65 25} color 93 selection_color 91
      }
      Fl_Button Cancel_extract_region {
        label Cancel
        callback {extractregion_hide();}
        xywh {150 81 65 25} color 133 selection_color 132
      }
    }
    Fl_Window extractrangeWindow {
      label {Extract tag or scalar range}
      image {pixmap/s_back_13.gif} xywh {8 31 358 197} type Double color 247 hide modal
    } {
      Fl_Group Extract_what_radio_buttons {
        label {Extract : } open
        xywh {25 20 314 55} box BORDER_BOX color 222 align 5
      } {
        Fl_Round_Button ex_tags {
          label Tags
          xywh {27 21 25 24} type Radio down_box ROUND_DOWN_BOX value 1
        }
        Fl_Round_Button ex_scalars {
          label Scalars
          xywh {27 44 22 11} type Radio down_box ROUND_DOWN_BOX
        }
        Fl_Choice sc_active2 {
          label {Chose  scalar} open
          xywh {205 40 100 23} down_box BORDER_BOX
        } {}
      }
      Fl_Value_Input Range_min {
        label {Minimal value:}
        xywh {135 93 52 25} align 36
      }
      Fl_Value_Input Range_max {
        label {Maximal value :}
        xywh {135 123 52 25} align 36 value 24
      }
      Fl_Button Ok_extractrange {
        label Ok
        callback {if (ex_tags->value()==1)
{
	MT->Set_Active_Scalar(-1);
}
else
{
	MT->Set_Active_Scalar(
	sc_active2->value());
}

MT->Mesh_Extract_Scalar_Range (Range_min->value(), Range_max->value());
MT->redraw();
extractrange_hide();}
        xywh {110 163 65 25} color 239 selection_color 237
      }
      Fl_Button Cancel_extract_scalar_range {
        label Cancel
        callback {extractrange_hide();}
        xywh {195 163 65 25} color 191 selection_color 191
      }
    }
    Fl_Window decomposeWindow {
      label {Connectivity decomposition}
      image {pixmap/s_back_13.gif} xywh {1137 440 221 128} type Double color 167 hide modal
    } {
      Fl_Value_Input Decompose_min_region_size {
        label {Minimal region size :}
        xywh {150 17 52 25} align 36 value 50
      }
      Fl_Button Ok_decomposition {
        label Ok
        callback {MT->Mesh_Decompose(Decompose_min_region_size->value(), decomposeWindow);
MT->redraw();
decompose_hide();}
        xywh {36 89 65 25} color 207 selection_color 207
      }
      Fl_Button Cancel_connectivity_decompose {
        label Cancel
        callback {decompose_hide();}
        xywh {135 90 65 25} color 167 selection_color 151
      }
    }
    Fl_Window extractallregionsWindow {
      label {Extract all tagged regions}
      image {pixmap/s_back_13.gif} xywh {-32000 -32000 247 134} type Double color 132 hide modal
    } {
      Fl_Value_Input Tag_decompose_min_region_size {
        label {Minimal region size :}
        xywh {150 17 52 25} align 36 value 50
      }
      Fl_Button Ok_extractallregions {
        label Ok
        callback {MT->Mesh_Decompose_Tag
(Tag_decompose_min_region_size->value(), extractallregionsWindow);
MT->redraw();
extractallregions_hide();}
        xywh {57 89 65 25} color 80 selection_color 91
      }
      Fl_Button Cancel_extractalltaggedregions {
        label Cancel
        callback {extractallregions_hide();}
        xywh {160 90 65 25} color 133 selection_color 132
      }
    }
    Fl_Window deleteregionWindow {
      label {Delete tagged region}
      image {pixmap/s_back_13.gif} xywh {1565 256 250 125} type Double color 80 hide modal
    } {
      Fl_Value_Input Tag_value_delete {
        label {Tag value to delete :}
        xywh {165 17 52 25} align 36 value 1
      }
      Fl_Button Ok_deleteregion {
        label Ok
        callback {MT->Mesh_Delete_Tag(Tag_value_delete->value());
MT->redraw();
deleteregion_hide();}
        xywh {65 80 65 25} color 90 selection_color 91
      }
      Fl_Button Cancel_deleteregion {
        label Cancel
        callback {deleteregion_hide();}
        xywh {165 80 65 25} color 133 selection_color 132
      }
    }
    Fl_Window flagWindow {
      label {Edit 1 Selected Flag}
      image {pixmap/s_back_13.gif} xywh {1112 172 246 176} type Double color 215 hide non_modal
    } {
      Fl_Button Refresh_flag {
        label Refresh
        callback {flag_update();}
        tooltip {Change Flag to first selected flag} xywh {87 140 65 25} color 134 selection_color 92
      }
      Fl_Input Flag_Label {
        label {Label:}
        xywh {66 10 162 24}
      }
      Fl_Button Cancel_flag {
        label Cancel
        callback {flag_hide();}
        xywh {151 140 65 25} color 133 selection_color 132
      }
      Fl_Value_Input Flag_Length {
        label {Flag length (mm):}
        xywh {175 45 52 25} align 36 value 25
      }
      Fl_Button Flag_Colour {
        label {Flag colour}
        callback {Fl_Color c = FL_GRAY;
uchar r,g,b;
Fl::get_color(c,r,g,b);
if(!fl_color_chooser("New color:",r,g,b)) return;
c = fl_rgb_color(r,g,b);
o->color(c);
o->redraw();
MT->set_flag_colour(r,g,b);
MT->redraw();}
        xywh {75 82 114 23} color 43 labelcolor 32
      }
      Fl_Button Ok_flag {
        label Ok
        callback {int ok;

std::string label;
label = Flag_Label->value();

MT->set_flag(label, Flag_Length->value());
MT->redraw();}
        tooltip {Change Flag to first selected flag} xywh {23 140 65 25} color 134 selection_color 92
      }
    }
    Fl_Window thicknessWindow2 {
      label {Thickness between 2 surfaces}
      image {pixmap/s_back_13.gif} xywh {495 210 225 194} type Double color 135 hide modal
    } {
      Fl_Button Ok_th2 {
        label Ok
        callback {MT->Set_Active_Scalar(5);
MT->SC_calc_thickness_between_objects(
Thickness_Max_Distance2->value(), 
th_source->value(),
th_target->value(),
thicknessWindow2);
thickness2_hide();
MT->Update_RGB();
MT->redraw();}
        xywh {63 162 65 25} color 94
      }
      Fl_Choice th_source {
        label {Impacted object} open
        xywh {122 8 100 23} down_box BORDER_BOX
      } {}
      Fl_Choice th_target {
        label {Observed object} open
        xywh {122 41 100 23} down_box BORDER_BOX
      } {}
      Fl_Value_Input Thickness_Max_Distance2 {
        label {Maximal thickness (mm) :}
        xywh {171 71 52 25} align 36 value 2
      }
      Fl_Button Cancel_th2 {
        label Cancel
        callback {thickness2_hide();}
        xywh {140 162 65 25} color 133 selection_color 132
      }
    }
    Fl_Window fillholesWindow {
      label {Fill Holes}
      image {pixmap/s_back_13.gif} xywh {1581 368 242 135} type Double color 134 hide modal
    } {
      Fl_Value_Input HOLES_size {
        label {Maximal size :}
        xywh {158 28 52 30} align 36 value 500
      }
      Fl_Button Ok_fillholes {
        label Ok
        callback {MT->Mesh_Fill_Holes(HOLES_size->value());
fillholes_hide();
MT->redraw();}
        xywh {48 80 65 25} color 93 selection_color 91
      }
      Fl_Button Cancel_fillholes {
        label Cancel
        callback {fillholes_hide();}
        xywh {146 80 65 25} color 133 selection_color 132
      }
    }
    Fl_Window fillholesWindow2 {
      label {Fill Holes}
      image {pixmap/s_back_13.gif} xywh {1526 269 257 202} type Double color 134 hide modal
    } {
      Fl_Value_Input HOLES2_size {
        label {Max num vertices : }
        xywh {165 40 52 30} align 36 value 50
      }
      Fl_Button Ok_fillholes2 {
        label Ok
        callback {MT->Fill_Holes(HOLES2_tagid->value(),HOLES2_size->value(),
fillholesWindow2
);
fillholes2_hide();
MT->redraw();}
        xywh {48 163 65 25} color 93 selection_color 91
      }
      Fl_Button Cancel_fillholes2 {
        label Cancel
        callback {fillholes2_hide();}
        xywh {146 163 65 25} color 133 selection_color 132
      }
      Fl_Value_Input HOLES2_tagid {
        label {Tag id :}
        xywh {165 8 52 30} align 36
      }
    }
    Fl_Window densifyWindow {
      label Densify
      image {pixmap/s_back_13.gif} xywh {658 302 330 119} type Double color 134 hide modal
    } {
      Fl_Value_Input DENSIFY_factor {
        label {Number of subdivisions :}
        xywh {215 20 52 30} align 36 value 1
      }
      Fl_Button Ok_densify {
        label Ok
        callback {MT->Mesh_Densify(DENSIFY_factor->value());
densify_hide();
MT->redraw();}
        xywh {106 75 65 25} color 93 selection_color 91
      }
      Fl_Button Cancel_densify {
        label Cancel
        callback {densify_hide();}
        xywh {181 75 65 25} color 133 selection_color 132
      }
    }
    Fl_Window nameWindow {
      label {Edit  Name}
      image {pixmap/s_back_13.gif} xywh {921 304 269 155} type Double color 215 hide non_modal
    } {
      Fl_Button Ok_name {
        label {Ok (first selected object)}
        callback {int ok;

std::string label;
label = Name_Label->value();
MT->set_name(label,0);
MT->redraw();
//name_hide();}
        tooltip {Set name to "label" value to first selected surface object} xywh {15 66 175 24} color 133 selection_color 92
      }
      Fl_Button Ok_name2 {
        label {Ok (all selected objects)}
        callback {int ok;

std::string label;
label = Name_Label->value();

MT->set_name(label,1);
MT->redraw();
//name_hide();}
        tooltip {Set name to "label" value to first selected surface object} xywh {15 90 175 30} color 134 selection_color 92
      }
      Fl_Input Name_Label {
        label {Label:}
        xywh {65 17 195 24}
      }
      Fl_Button Cancel_name {
        label Cancel
        callback {name_hide();}
        tooltip {Cancel current action} xywh {100 120 90 25} color 92 selection_color 132
      }
      Fl_Button Refresh_name {
        label Refresh
        callback {float m1[16];
float m2[16];
std::string label ="Name";
label = MT->get_matrix(m1,m2);
Name_Label->value(label.c_str());//name_hide();}
        tooltip {Update label : get label of first selected surface object} xywh {15 121 85 25} color 221 selection_color 217
      }
    }
    Fl_Window allflagWindow {
      label {Edit All Selected Flags}
      image {pixmap/s_back_13.gif} xywh {1575 206 252 115} type Double color 215 hide non_modal
    } {
      Fl_Button Ok_all_flag {
        label Ok
        callback {Fl_Color c = FL_GRAY;
c = All_Flag_Colour->color();
uchar r,g,b;
Fl::get_color(c,r,g,b);
MT->set_all_flag(r, g, b, All_Flag_Length->value());
MT->redraw();}
        tooltip {Change Flag to first selected flag} xywh {58 70 65 25} color 134 selection_color 92
      }
      Fl_Button Cancel_all_flag {
        label Cancel
        callback {all_flag_hide();}
        xywh {142 70 65 25} color 133 selection_color 132
      }
      Fl_Value_Input All_Flag_Length {
        label {Flag length (mm):}
        xywh {155 10 52 25} align 36 value 25
      }
      Fl_Button All_Flag_Colour {
        label {Flag colour}
        callback {Fl_Color c = FL_GRAY;
uchar r,g,b;
Fl::get_color(c,r,g,b);
if(!fl_color_chooser("New color:",r,g,b)) return;
c = fl_rgb_color(r,g,b);
o->color(c);
o->redraw();
//MT->set_flag_colour(r,g,b, );
//MT->redraw();}
        xywh {95 42 114 23} color 43 labelcolor 32
      }
    }
    Fl_Window ViewHideObjectsWindow {
      label {View Hide objects}
      image {pixmap/s_back_13.gif} xywh {-32000 -32000 282 472} type Double color 215 hide non_modal
    } {
      Fl_Check_Browser Check_browser {
        callback {view_hide_ok();}
        xywh {15 10 245 385} when 1
      }
      Fl_Button Ok_view_hide {
        label Ok
        callback {view_hide_ok();
view_hide_hide();
MT->redraw();}
        xywh {145 427 85 30} color 133 selection_color 92
      }
      Fl_Button Refresh_view_hide {
        label Refresh
        callback {view_hide_refresh();}
        xywh {61 427 85 30} color 221 selection_color 92
      }
      Fl_Button Check_none_view_hide {
        label {Uncheck all}
        callback {Check_browser->check_none();
view_hide_ok();}
        xywh {145 397 85 30} color 130 selection_color 92
      }
      Fl_Button Check_all_view_hide {
        label {Check all}
        callback {Check_browser->check_all();
view_hide_ok();}
        xywh {61 397 85 30} color 111 selection_color 92
      }
    }
    Fl_Window tags_convert_Window {
      label {Convert RGB scalars to TAGs}
      xywh {1867 206 518 154} type Double color 94 hide non_modal
    } {
      Fl_Group {} {
        label {Conversion } open
        xywh {6 16 504 98} box BORDER_BOX color 93
      } {
        Fl_Group rgb_to_tags_options {
          label Options open
          xywh {24 38 471 49} box BORDER_BOX color 94 align 5
        } {
          Fl_Round_Button rgb_exact {
            label {Exact colour match (non matching vertices will be put inside TAG 00)}
            xywh {26 39 25 24} type Radio down_box ROUND_DOWN_BOX value 1
          }
          Fl_Round_Button rgb_distinct {
            label {Define tags following the first 25 distinct colours found in RGB scalar}
            xywh {26 62 22 11} type Radio down_box ROUND_DOWN_BOX
          }
        }
      }
      Fl_Button Ok_rgb_to_tags {
        label Ok
        callback {MT->Convert_RGB_To_Tags(
rgb_exact->value()
);

MT->redraw();
tags_convert_hide();}
        xywh {225 120 65 25} color 133 selection_color 92
      }
    }
    Fl_Window orientationWindow {
      label {Edit orientation labels}
      image {pixmap/s_back_13.gif} xywh {-32000 -32000 251 239} type Double color 215 hide non_modal
    } {
      Fl_Button Ok_orientation {
        label Ok
        callback {std::string z1,z2,y1,y2,x1,x2;
z1 = z_plus_l->value();
z2 = z_minus_l->value();
y1 = y_plus_l->value();
y2 = y_minus_l->value();
x1 = x_plus_l->value();
x2 = x_minus_l->value();


MT->set_orientation_labels(z1,z2,y1,y2,x1,x2);
MT->save_ini_param();
MT->redraw();
//name_hide();}
        tooltip {Set name to "label" value to first selected surface object} xywh {55 197 65 25} color 134 selection_color 92
      }
      Fl_Button Cancel_orientation {
        label Cancel
        callback {orientation_hide();}
        tooltip {Cancel current action} xywh {121 198 65 25} color 133 selection_color 132
      }
      Fl_Input z_plus_l {
        label {+z:}
        xywh {55 10 162 24}
      }
      Fl_Input z_minus_l {
        label {-z:}
        xywh {56 37 162 24}
      }
      Fl_Input y_plus_l {
        label {+y:}
        xywh {54 63 162 24}
      }
      Fl_Input y_minus_l {
        label {-y:}
        xywh {55 90 162 24}
      }
      Fl_Input x_plus_l {
        label {+x:}
        xywh {55 116 162 24}
      }
      Fl_Input x_minus_l {
        label {-x:}
        xywh {56 143 162 24}
      }
    }
    Fl_Window lmkselectWindow {
      label {Select landmark}
      image {pixmap/s_back_13.gif} xywh {707 372 271 141} type Double color 215 hide non_modal
    } {
      Fl_Value_Input LandmarkId {
        label {Landmark Id to select}
        xywh {190 10 52 25} align 36 value 1
      }
      Fl_Button Ok_lmkselect {
        label Select
        callback {int lmk_type;
lmk_type=0;

if (SELECT_LMK2->value() == 1){lmk_type = 1;}

MT->Select_Landmark(lmk_type, LandmarkId->value());
MT->redraw();}
        xywh {65 95 65 25} color 159 selection_color 101
      }
      Fl_Button Cancel_lmkselect {
        label Close
        callback {lmkselect_hide();}
        xywh {135 95 65 25} color 133 selection_color 132
      }
      Fl_Round_Button SELECT_LMK {
        label {Normal landmark}
        xywh {27 40 102 24} type Radio down_box ROUND_DOWN_BOX value 1
      }
      Fl_Round_Button SELECT_LMK2 {
        label {Target landmark}
        xywh {27 60 102 22} type Radio down_box ROUND_DOWN_BOX
      }
    }
    Fl_Window lmkrangeselectWindow {
      label {Select landmark range}
      image {pixmap/s_back_13.gif} xywh {540 185 263 148} type Double color 215 hide non_modal
    } {
      Fl_Value_Input rangestart {
        label {Select landmark id START}
        xywh {190 10 52 25} align 36 value 1
      }
      Fl_Button Ok_lmkrangeselect {
        label {Select range}
        callback {int lmk_type;
lmk_type=0;

if (SELECTRANGE_LMK2->value() == 1){lmk_type = 1;}

MT->Select_Landmark_Range(lmk_type, rangestart->value(),rangeend->value());
MT->redraw();}
        xywh {45 115 85 25} color 159 selection_color 101
      }
      Fl_Button Cancel_lmkrangeselect {
        label Close
        callback {lmkrangeselect_hide();}
        xywh {135 114 65 25} color 133 selection_color 132
      }
      Fl_Round_Button SELECTRANGE_LMK {
        label {Normal landmark}
        xywh {30 58 102 24} type Radio down_box ROUND_DOWN_BOX value 1
      }
      Fl_Round_Button SELECTRANGE_LMK2 {
        label {Target landmark}
        xywh {30 78 102 22} type Radio down_box ROUND_DOWN_BOX
      }
      Fl_Value_Input rangeend {
        label {Select landmark id END}
        xywh {190 35 52 25} align 36 value 1
      }
    }
    Fl_Window Registration_Window {
      label Registration
      image {pixmap/s_back_13.gif} xywh {34 63 1061 589} type Double color 215 hide hotspot
    } {
      Fl_Group once_icp_ok {open
        xywh {740 5 315 580} box EMBOSSED_BOX color 166
      } {
        Fl_Group {} {
          label {Display Matching} open
          xywh {750 30 295 425} box ENGRAVED_BOX color 175 labelfont 1
        } {
          Fl_Check_Button display_landmark {
            label landmarks
            xywh {760 40 64 15} down_box DOWN_BOX value 1
          }
          Fl_Button draw {
            label Draw
            callback {vtkSmartPointer<vtkFloatArray> tabDisplay =
 vtkSmartPointer<vtkFloatArray>::New();
tabDisplay->SetNumberOfComponents(1);
tabDisplay->SetNumberOfTuples(4);
tabDisplay->SetTuple1(0,display_landmark->value());// booleen pour les landmarks
tabDisplay->SetTuple1(1,display_vertice->value());// booleen pour les vertices
if(display_val_dec_vertice->value()!=0){ // le diviseur du nombre de correspondance
	tabDisplay->SetTuple1(2,display_val_dec_vertice->value());
}else{
	tabDisplay->SetTuple1(2,1);
}
if(line_width->value()<=0){
	fl_alert("Error:The width of matching lines must be >0");
	line_width->value(1);
}
tabDisplay->SetTuple1(3,line_width->value());



cout<<(int)display_landmark->value()<<"  "<<(int)display_vertice->value()<<" "<<display_val_dec_vertice->value()<<endl;
MT->SetDisplayMatching(tabDisplay);

MT->redraw();}
            xywh {910 390 125 55} color 126
          }
          Fl_Check_Button display_vertice {
            label vertice
            callback {if(display_vertice->value()==1){
	display_val_dec_vertice->activate();
	display_val_result_vertice->activate();
	textmatchings->activate();
	vertice_color->activate();
	save_vertice->activate();
	ok_vertice->activate();
	line_width->activate();
}else{
	display_val_dec_vertice->deactivate();
	display_val_result_vertice->deactivate();
	textmatchings->deactivate();
	vertice_color->deactivate();
	save_vertice->deactivate();
	ok_vertice->deactivate();
	line_width->deactivate();
}}
            xywh {760 65 64 15} down_box DOWN_BOX
          }
          Fl_Group {} {
            xywh {775 80 260 265} box FLAT_BOX color 174
          } {
            Fl_Button vertice_color {
              label {Change vertice color}
              callback {if(MT->bool_ICP==true){
	Fl_Color c = FL_GRAY;
	uchar r,g,b;
	Fl::get_color(c,r,g,b);
	if(!fl_color_chooser("New color:",r,g,b)) return;
	c = fl_rgb_color(r,g,b);
	cout<<r<<"  "<<g<<"  "<<b<<endl;
	//o->color(c);
	//o->redraw();
	float vect_color[3]={r,g,b};
	vect_color[0]/=255;
	vect_color[1]/=255;
	vect_color[2]/=255;
	cout<<"ici"<<endl;
	MT->SetVerticeColor(vect_color);
	cout<<"ererere"<<endl;
	//MT->set_tag_color(0,r,g,b);
	MT->redraw();
}}
              xywh {920 245 110 40} color 117 align 128 deactivate
            }
            Fl_Group {} {open
              xywh {780 80 250 150} box THIN_UP_BOX color 174
            } {
              Fl_Value_Input display_val_dec_vertice {
                label {1 matching over}
                callback {int val=display_val_dec_vertice->value();// fait le calcule
int result = 0;
int numberPt = 0;

if(MT->bool_ICP==true){
    numberPt=MT->registration->numberOfLandmarks_Source;
     display_val_result_vertice->value(numberPt);
     // if(choose_numberLandmarksPoints->value()==1){
    	//if(val_dec->value()==MT->registration->dec )
    //		 numberPt=val_result->value();
    //	else{
    //		choose_numberLandmarksPoints->value(0);
    //		textpoints->deactivate();
//	val_result->deactivate();
//	val_dec->deactivate();

  //  		fl_alert("attention:: choosen value for the source vertice is different of\\nthe value for the ICP.");
    //	}
     //}
  
}


if(val>0)
	result = numberPt / val + 1;
else
	result=0;

display_val_result_vertice->value(result);}
                xywh {910 90 80 25} minimum 1 maximum 100 step 1 deactivate
              }
              Fl_Value_Output display_val_result_vertice {
                label { = }
                callback {int val=display_val_dec_vertice->value();// fait le calcule
int result = 0;
int numberPt = 0;

if(MT->bool_ICP==true){
    numberPt=MT->registration->numberOfLandmarks_Source;
     display_val_result_vertice->value(numberPt);
      /*if(choose_numberLandmarksPoints->value()==1){
    	if(val_dec->value()==MT->registration->dec )
    		 numberPt=val_result->value();
    	else{
    		choose_numberLandmarksPoints->value(0);
    		textpoints->deactivate();
	val_result->deactivate();
	val_dec->deactivate();

    		fl_alert("attention:: choosen value for the source vertice is different of\\nthe value for the ICP.");
    	}
     }*/
  
}


if(val>0)
	result = numberPt / val + 1;
else
	result=0;

display_val_result_vertice->value(result);}
                xywh {810 130 105 30} color 206 deactivate
              }
              Fl_Text_Display textmatchings {
                xywh {920 133 100 27} box NO_BOX color 174 align 161 deactivate
                code2 {Display_Text(textmatchings,"matchings.",FL_BLACK);}
              }
              Fl_Button ok_vertice {
                label validate
                callback {vtkSmartPointer<vtkFloatArray> tabDisplay =
 vtkSmartPointer<vtkFloatArray>::New();
tabDisplay->SetNumberOfComponents(1);
tabDisplay->SetNumberOfTuples(3);
tabDisplay->SetTuple1(0,display_landmark->value());
tabDisplay->SetTuple1(1,display_vertice->value());
if(display_val_dec_vertice->value()!=0){
	tabDisplay->SetTuple1(2,display_val_dec_vertice->value());
}else{
	tabDisplay->SetTuple1(2,1);
}
tabDisplay->SetTuple1(3,1);
cout<<(int)display_landmark->value()<<"  "<<(int)display_vertice->value()<<" "<<display_val_dec_vertice->value()<<endl;
MT->SetDisplayMatching(tabDisplay);}
                xywh {830 185 140 30} color 119 deactivate
              }
            }
            Fl_Button save_vertice {
              label {Save vertice}
              callback {MT->save_SourceTarget_Vertice();}
              xywh {785 295 100 40} color 117 deactivate
            }
            Fl_Value_Input line_width {
              label {width of  matching lines:}
              xywh {850 247 45 33} align 141 maximum 15 step 0.1 value 1 deactivate
            }
          }
          Fl_Button save_origin_source_vertice {
            label {Save the original source vertice}
            callback {MT->Save_original_source_verticeICP();}
            xywh {775 355 135 35} color 117 align 128
          }
        }
        Fl_Button errors_curve {
          label {Display result}
          callback {errors_curv_ICP_show();}
          xywh {765 520 145 55} color 118
        }
        Fl_Check_Button color_ICP {
          label {Draw the distances between Source and Target}
          callback {if(MT->bool_ICP ){
	if(color_ICP->value()==1){
		Distance_threshold->activate();
		MT->registration->Draw_looking_like(Distance_threshold->value());
	}
	else{
		Distance_threshold->deactivate();
		MT->registration->Source->selected=1;
	}
	MT->redraw();
}}
          xywh {750 460 200 35} down_box DOWN_BOX align 148
        }
        Fl_Value_Input Distance_threshold {
          label {Threshold :}
          xywh {975 481 55 34} maximum 10 value 0.01 deactivate
        }
      }
      Fl_Group data_icp {open
        xywh {5 5 730 580} box EMBOSSED_BOX color 165
      } {
        Fl_Group {} {open
          xywh {430 505 295 45} color 16
        } {
          Fl_Group {} {open
            xywh {450 505 110 45}
          } {
            Fl_Group {} {open
              xywh {450 505 110 45}
            } {
              Fl_Button Ok_ICP {
                label Ok
                callback {/// TABOFWEIGHTS ----------------------------
float val_weighted_normal = -1.f;
float val_weighted_curvature = -1.f;
float val_weighted_color = -1.f;
float val_weighted_landmark = -1.f;
float val_dec_choosen = -1.f;
int problem =0;

vtkSmartPointer<vtkFloatArray> tab_loadsave_parameter =
 vtkSmartPointer<vtkFloatArray>::New();
tab_loadsave_parameter->SetNumberOfComponents(1);
tab_loadsave_parameter->SetNumberOfTuples(2);


vtkSmartPointer<vtkFloatArray> tabOfParameters =
 vtkSmartPointer<vtkFloatArray>::New();
tabOfParameters->SetNumberOfComponents(1);
tabOfParameters->SetNumberOfTuples(10);
// rcupration des donnes
// POIDS DE LA NORMALE
if(weighted_normal->value()==0){
	val_weighted_normal=-1;
}else{
	val_weighted_normal=weighted_normal->value();
}
tabOfParameters->SetTuple1(0,val_weighted_normal);

//----------------------

// POIDS DE LA COURBURE
if(curv_data -> value() == 1){
	val_weighted_curvature = weighted_curvature->value();
	if(val_weighted_curvature==0){
		val_weighted_curvature=-1;	
	}
}
else{
	percentageCurv->value(0);
	val_weighted_curvature = -1.f;
}
tabOfParameters->SetTuple1(1,val_weighted_curvature);
tabOfParameters->SetTuple1(9,percentageCurv->value());// pourcentage pour nettoyer les valeur des courbes 
//----------------

/// POIDS DE LA COULEUR
if (color_data -> value()==1){
cout<<"ici color"<<endl;
	val_weighted_color = weighted_color->value();
		if(val_weighted_color==0){
		val_weighted_color=-1;	
	}
}
else{
	val_weighted_color = -1.f;
}
tabOfParameters->SetTuple1(2,val_weighted_color);
//-----------------

// POIDS DES LANDMARKS
if(add_landmarks -> value() == 1){
cout<<"ici landmarks"<<endl;
	val_weighted_landmark = weighted_landmark->value();
		if(val_weighted_landmark==0){
		val_weighted_landmark=-1;	
	}
}
else{
	val_weighted_landmark = -1.f;
}
tabOfParameters->SetTuple1(3,val_weighted_landmark);
///----------------------------

/// DECIMALE DU NOMBRE DE SOMMET CHOISI
if(choose_numberLandmarksPoints->value() ==1){
	val_dec_choosen = val_dec->value();
	if (val_dec_choosen == 0)
	{
		fl_alert("ERROR :: choosen number ==0 ");
		problem++;
	}
}else
	val_dec_choosen = -1.f;
tabOfParameters->SetTuple1(4,val_dec_choosen);
///--------------------------------------------

// POURCENTAGE DU RAYON POUR LE FILTRE SUR LES DISTANCES DES CORRESPONDANCES
tabOfParameters->SetTuple1(5,percentageOfRadius->value());
//-------------------------------

/// ERRORS THRESHOLD----------
if(ite_max->value()<=0){
	fl_alert("Error:the maximum number of iteration must be >0");
	ite_max->value(20);
	problem++;
}
tabOfParameters->SetTuple1(6,ite_max->value());

if(threshold_InPercentage->value()<=0){
	fl_alert("Error:the threshold od errors distances must be >0 %.");
	threshold_InPercentage->value(5);
	problem++;
}
tabOfParameters->SetTuple1(7,(threshold_InPercentage->value()/100.));
//----------------------

// PARAMETER------ Attention il doivent etre en dernier pour etre identique au fichier des paramtres
//stocker les parametres
tab_loadsave_parameter->SetTuple1(0,store_parameter->value());
//appliquer les parametres chargs
tab_loadsave_parameter->SetTuple1(1,load_parameter->value());
///---------------------------

/// RADIUS OF SPHERE--------------
if(loc_affine->value()==1 || step_by_step->value()==1 ){
	if(radiusLA->value()<=0){
		fl_alert("ERROR: the radius of sphere must be >0");
		radiusLA->value(5);
		problem++;
	}
	tabOfParameters->SetTuple1(8,radiusLA->value());
}else{
	tabOfParameters->SetTuple1(8,-1);
}
//-------------

///   TABDISPLAY  --------------------------
vtkSmartPointer<vtkFloatArray> tabDisplay =
 vtkSmartPointer<vtkFloatArray>::New();
tabDisplay->SetNumberOfComponents(1);
tabDisplay->SetNumberOfTuples(4);

tabDisplay->SetTuple1(0,display_landmark->value());
tabDisplay->SetTuple1(1,display_vertice->value());

if(display_val_dec_vertice->value()>0){
	tabDisplay->SetTuple1(2,display_val_dec_vertice->value());
}else{
	tabDisplay->SetTuple1(2,1);
}
if(line_width->value()<=0){
	fl_alert("Error:The width of matching lines must be >0");
	line_width->value(1);
}
tabDisplay->SetTuple1(3,line_width->value());
///-----------------------------------------

/// MODE TRANSFORMATION --------------
int modeTransformation=-2;
if( rigid->value()==1)
	modeTransformation =VTK_LANDMARK_RIGIDBODY;
else if( similitude ->value() == 1)
	modeTransformation =VTK_LANDMARK_SIMILARITY;
else if( affine->value() == 1)
	modeTransformation = VTK_LANDMARK_AFFINE;
else if(loc_affine->value()==1)
	modeTransformation = 20;
else{
	modeTransformation=-2;
}
//----------------------------------------

//---- DEBUT ICP----
if(problem==0){// si aucun probleme alors on fait icp
if(MT->bool_ICP == false){
	// test
	cout<<"\\t\\t\\t---CREATION de ICP---"<<endl;
	// target et source sont des entiers
	MT->Registration(icp_source_name->value(),icp_target_name->value(),
	tabOfParameters,tab_loadsave_parameter,tabDisplay,modeTransformation,Only_Matching->value()); 
}
else{
	// set data 
	cout<<"\\t\\t\\t---UPDATE (interface)---"<<endl;
	MT->SetDataICP(tabOfParameters,tab_loadsave_parameter,modeTransformation,tabDisplay,Only_Matching->value());
}
}
load_parameter->value(0);// on met false car une fois fait pour une icp alors on a plus besoin.
// sinon on ne pourra pas prendre en compte sur les nouveaux parametres de l'interface par la suite.

MT->redraw();
cout<<"FINI"<<endl;}
                xywh {465 505 95 45} color 95 selection_color 93
              }
            }
          }
          Fl_Button Cancel_ICP {
            label Cancel
            callback {registration_ICP_hide();}
            xywh {595 505 95 45} color 91 selection_color 90
          }
        }
        Fl_Group {} {
          label {Points data } open
          xywh {15 185 405 160} box ENGRAVED_BOX color 175 labelfont 1
        } {
          Fl_Check_Button color_data {
            label {to add the color data}
            callback {if(color_data->value()==1)
	weighted_color->activate();
else
	weighted_color->deactivate();}
            xywh {30 300 155 20} down_box DOWN_BOX resizable
          }
          Fl_Check_Button curv_data {
            label {to add the curvature data (min and max)}
            callback {if(curv_data->value()==1){
	weighted_curvature->activate();
	percentageCurv->activate();
}else{
	weighted_curvature->deactivate();
	percentageCurv->deactivate();
}}
            xywh {30 230 185 15} down_box DOWN_BOX value 1
          }
          Fl_Value_Slider weighted_normal {
            label {weight for normal:}
            xywh {145 195 190 20} type {Horz Knob} color 206 align 4 value 0.5 textsize 14
          }
          Fl_Value_Slider weighted_color {
            label {weight for colors:}
            callback {/*int nb=weighted_landmark->value();
if(nb!=0){
	if((weighted_curvature->value() > 1 && weighted_curvature->value() < 2 )
	|| (weighted_color->value() > 1 && weighted_color->value() < 2)){
		weighted_landmark->minimum(2);
	}
	else if(weighted_curvature->value() == 2 || weighted_color->value() == 2){
		weighted_landmark->minimum(3);
	}
	else{
		weighted_landmark->minimum(1);
	}
	if(nb<weighted_landmark->minimum())
		nb =weighted_landmark->minimum();
	weighted_landmark->value(nb);
}*/}
            xywh {200 315 195 20} type {Horz Knob} color 206 align 4 value 0.5 textsize 14 deactivate
          }
          Fl_Value_Slider weighted_curvature {
            label {weight for curvature:}
            callback {/*int nb=weighted_landmark->value();
if(nb!=0){
	if((weighted_curvature->value() > 1 && weighted_curvature->value() < 2 )
	|| (weighted_color->value() > 1 && weighted_color->value() < 2)){
		weighted_landmark->minimum(2);
	}
	else if(weighted_curvature->value() == 2 || weighted_color->value() == 2){
		weighted_landmark->minimum(3);
	}
	else{
		weighted_landmark->minimum(1);
	}
	if(nb<weighted_landmark->minimum())
		nb =weighted_landmark->minimum();
	weighted_landmark->value(nb);
}*/}
            xywh {205 250 180 20} type {Horz Knob} color 206 align 4 value 0.5 textsize 14
          }
          Fl_Value_Slider percentageCurv {
            label {remove curv (%):}
            xywh {205 275 180 20} type {Horz Knob} color 206 align 4 textsize 14
          }
        }
        Fl_Group {} {
          label Meshes
          xywh {15 25 405 140} box ENGRAVED_BOX color 175 labelfont 1
        } {
          Fl_Choice icp_source_name {
            label {Source:} open
            xywh {85 45 305 25} down_box BORDER_BOX
          } {}
          Fl_Choice icp_target_name {
            label {Target:} open
            xywh {85 85 305 25} down_box BORDER_BOX
          } {}
          Fl_Button reinit_s_t_list {
            label {reinit source and target list}
            callback {registration_ICP_show();}
            xywh {235 115 170 20} color 94
          }
        }
        Fl_Group transformation_mode {
          label {Transformation Mode}
          xywh {430 165 295 130} box ENGRAVED_BOX color 175 labelfont 1
        } {
          Fl_Check_Button rigid {
            label RIGID
            callback {if(rigid->value()==1){
	similitude->value(0);
	affine->value(0);
	loc_affine->value(0);
	step_by_step->value(0);
	radiusLA->deactivate();	
}
else if(rigid->value()==0 && 
	similitude->value()==0 &&
	affine->value()==0 &&
	loc_affine->value()==0 &&
	step_by_step->value()==0){
		step_by_step->value(1);
		radiusLA->activate();	
	}}
            xywh {440 180 64 15} down_box DOWN_BOX
          }
          Fl_Check_Button similitude {
            label SIMILITUDE
            callback {if(similitude->value()==1){
	rigid->value(0);
	affine->value(0);
	loc_affine->value(0);
	step_by_step->value(0);
	radiusLA->deactivate();	
}else if(rigid->value()==0 && 
	similitude->value()==0 &&
	affine->value()==0 &&
	loc_affine->value()==0 &&
	step_by_step->value()==0){
		step_by_step->value(1);
		radiusLA->activate();	
	}}
            xywh {440 200 100 15} down_box DOWN_BOX
          }
          Fl_Check_Button affine {
            label {AFFINE (+Similitude) }
            callback {if(affine->value()==1){
	rigid->value(0);
	similitude->value(0);
	loc_affine->value(0);
	step_by_step->value(0);
	radiusLA->deactivate();	
}else if(rigid->value()==0 && 
	similitude->value()==0 &&
	affine->value()==0 &&
	loc_affine->value()==0 &&
	step_by_step->value()==0){
		step_by_step->value(1);
		radiusLA->activate();	
	}}
            xywh {440 220 150 15} down_box DOWN_BOX value 1
          }
          Fl_Check_Button loc_affine {
            label {LOCALLY AFFINE (+Affine +Similitude)}
            callback {if(loc_affine->value()==1){
	rigid->value(0);
	similitude->value(0);
	affine->value(0);
	step_by_step->value(0);
	radiusLA->activate();	
	
}else if(loc_affine->value()==0)
{
	radiusLA->deactivate();	
}

if(rigid->value()==0 && 
	similitude->value()==0 &&
	affine->value()==0 &&
	loc_affine->value()==0 &&
	step_by_step->value()==0){
		
		step_by_step->value(1);
		radiusLA->activate();	
	}}
            xywh {440 240 265 15} down_box DOWN_BOX
          }
          Fl_Check_Button step_by_step {
            label {STEP BY STEP}
            callback {if(step_by_step->value()==1){
	rigid->value(0);
	similitude->value(0);
	affine->value(0);
	loc_affine->value(0);
	radiusLA->activate();	
}else if(rigid->value()==0 && 
	similitude->value()==0 &&
	affine->value()==0 &&
	loc_affine->value()==0 &&
	step_by_step->value()==0){
		step_by_step->value(1);
		radiusLA->activate();	
	}}
            xywh {440 265 115 15} down_box DOWN_BOX
          }
        }
        Fl_Group {} {
          label {For ICP non-deformable (Rigid, Similitude, Affine)} open
          xywh {15 365 400 210} box ENGRAVED_BOX color 175 labelfont 1
        } {
          Fl_Check_Button add_landmarks {
            label {to add landmarks}
            callback {if(add_landmarks->value()==1)
	weighted_landmark->activate();
else
	weighted_landmark->deactivate();}
            xywh {30 370 150 25} down_box DOWN_BOX
          }
          Fl_Value_Slider weighted_landmark {
            label {weight for the landmarks:}
            xywh {215 395 160 20} type {Horz Knob} color 206 align 4 textsize 14 deactivate
          }
          Fl_Group {} {open
            xywh {25 425 385 65}
          } {
            Fl_Check_Button choose_numberLandmarksPoints {
              label {to choose the number of Source vertice}
              callback {if(choose_numberLandmarksPoints->value()==1){
	textpoints->activate();
	val_result->activate();
	val_dec->activate();
}
else{
	textpoints->deactivate();
	val_result->deactivate();
	val_dec->deactivate();
}}
              xywh {30 425 325 15} down_box DOWN_BOX
            }
            Fl_Value_Input val_dec {
              label {1 point over}
              callback {int val=val_dec->value();// fait le calcule
int result = 0;
int numberPt = 0;
if(MT->bool_ICP==false){
	int source = icp_source_name->value();

	if(source>=0){
		OBJECT_MESH *My_Source = MT->getContainer().Get_Selected_Mesh(source);
		numberPt=My_Source->GetNumberOfPoints();
		val_result->value(numberPt);
	}
}else{
	numberPt=MT->registration->Source->GetNumberOfPoints();
	val_result->value(numberPt);
}

if(val>0)
	result = numberPt / val;
else
	result=0;

val_result->value(result);}
              xywh {110 450 85 30} minimum 1 maximum 100 step 1 deactivate
            }
            Fl_Value_Output val_result {
              label { = }
              callback {int val=val_dec->value();// fait le calcule
int result = 0;
int numberPt = 0;
if(MT->bool_ICP==false){
	int source = icp_source_name->value();

	if(source>=0){
		OBJECT_MESH *My_Source = MT->getContainer().Get_Selected_Mesh(source);
		numberPt=My_Source->GetNumberOfPoints();
		val_result->value(numberPt);
	}
}else{
	numberPt=MT->registration->Source->GetNumberOfPoints();
	val_result->value(numberPt);
}

if(val>0)
	result = numberPt / val;
else
	result=0;

val_result->value(result);}
              xywh {215 450 105 30} color 206 deactivate
            }
            Fl_Text_Display textpoints {
              xywh {325 455 80 25} box NO_BOX color 175 align 33 deactivate
              code1 {Display_Text(textpoints,"points.",FL_BLACK);}
            }
          }
          Fl_Group {} {
            label {For the pairs matching:}
            xywh {30 516 385 59} color 175 labelfont 2 align 5
          } {
            Fl_Value_Slider percentageOfRadius {
              label {percentage of the radius for the maximum matchings distance:}
              xywh {85 541 265 24} type {Horz Knob} color 206 align 1 step 0.05 value 0.3 textsize 14
            }
          }
        }
        Fl_Group error_threshold {
          label {Errors threshold}
          xywh {430 403 295 82} box ENGRAVED_BOX color 175 labelfont 1
        } {
          Fl_Value_Input ite_max {
            label {Maximum number of iteration:}
            xywh {625 415 40 24} maximum 1000 value 20
          }
          Fl_Value_Input threshold_InPercentage {
            label {Threshold of errors distances:}
            xywh {630 447 65 26} maximum 20 value 5
          }
          Fl_Text_Display textpercentError {
            xywh {695 448 25 32} box NO_BOX color 175 align 33 deactivate
            code1 {Display_Text(textpercentError,"%.",FL_BLACK);}
          }
        }
        Fl_Group parameters {
          label Parameters
          xywh {430 35 295 110} box ENGRAVED_BOX color 175 labelfont 1
        } {
          Fl_Button save_parameters {
            label {Save parameters}
            callback {if(MT->bool_ICP)
	MT->SaveParameter();}
            xywh {540 105 125 25} color 172 deactivate
          }
          Fl_Check_Button store_parameter {
            label {to store parameters}
            callback {if(store_parameter->value()==1){
	save_parameters->activate();
}
else{
	save_parameters->deactivate();
}}
            xywh {465 80 125 20} down_box DOWN_BOX
          }
          Fl_Light_Button load_parameter {
            label {Load parameters list}
            callback {// charge la liste dans paramater_list
if(load_parameter->value()==1){
	MT->Open_ICP_parameter();
	int sumOfActivedMode=0;
	if(MT->loaded_parameter_list !=NULL){
		for(int i=0;i<MT->loaded_parameter_list->GetNumberOfTuples();i++)
			sumOfActivedMode=MT->loaded_parameter_list->GetComponent(i,0);
		if(sumOfActivedMode==0){
			fl_alert("Error: There is not parameter for the transformation modes.");
			load_parameter->value(0);
		}
	}
	else{
		load_parameter->value(0);
	}	
}}
            xywh {465 45 170 30} color 172 selection_color 6
          }
        }
        Fl_Group LA_transformation {
          label {For ICP deformable} open
          xywh {430 315 295 65} box EMBOSSED_BOX color 175 labelfont 1
        } {
          Fl_Value_Input radiusLA {
            label {Percentage of sphere diameter:}
            callback {if(radiusLA->value()<0){
	radiusLA->value(5);
}}
            xywh {575 333 55 27} align 132 maximum 100 value 5 deactivate
          }
          Fl_Text_Display textpercentRadius {
            xywh {630 324 85 46} box NO_BOX color 175 align 161 deactivate
            code1 {Display_Text(textpercentRadius,"% of source\\n diameter.",FL_BLACK);}
          }
        }
        Fl_Check_Button Only_Matching {
          label {To compute only Matching between Source and Target }
          callback {if(Only_Matching->value()==1){
add_landmarks->deactivate();
percentageOfRadius->deactivate();
parameters->deactivate();
transformation_mode->deactivate();
LA_transformation->deactivate();
error_threshold->deactivate();
color_data->deactivate();
textpercentRadius->deactivate();
}
else{
add_landmarks->activate();
percentageOfRadius->activate();
parameters->activate();
transformation_mode->activate();
LA_transformation->activate();
error_threshold->activate();
color_data->activate();
}}
          xywh {45 140 370 15} down_box DOWN_BOX
        }
      }
    }
    Fl_Window Errors_curv_Window {
      label Result
      xywh {44 69 820 516} type Double color 214 hide resizable modal
    } {
      Fl_Button save_errors_curve {
        label {Save errors}
        callback {if(MT->bool_ICP == true)
	MT->SaveErrors();}
        xywh {280 435 140 45} color 117
      }
      Fl_Group caption {
        label Caption open
        xywh {15 240 215 265} box DOWN_BOX color 215 labelfont 3
      } {
        Fl_Text_Display caption_matching {
          xywh {40 245 105 35} box NO_BOX color 215
          code0 {\#include <FL/Fl_Text_Buffer.H>}
          code1 {\#include <FL/Fl_Text_Display.H>}
        }
        Fl_Text_Display caption_landmarks {
          xywh {40 285 105 35} box NO_BOX color 215
          code0 {\#include <FL/Fl_Text_Buffer.H>}
          code1 {\#include <FL/Fl_Text_Display.H>}
        }
        Fl_Text_Display caption_total {
          xywh {40 325 105 55} box NO_BOX color 215
          code0 {\#include <FL/Fl_Text_Buffer.H>}
          code1 {\#include <FL/Fl_Text_Display.H>}
        }
        Fl_Text_Display caption_textmode {
          xywh {40 375 190 120} box NO_BOX color 215
          code0 {\#include <FL/Fl_Text_Buffer.H>}
          code1 {\#include <FL/Fl_Text_Display.H>}
        }
      }
      Fl_Group {} {
        label {error distance of vertice and landmarks} open
        xywh {5 13 810 208}
      } {
        Fl_Box box_curve {user_data_type {void*}
          xywh {5 14 805 206} box FLAT_BOX color 7
          code0 {\#include <FL/Fl_Chart.H>}
          code1 {InitializeChart(box_curve,0);}
          class Fl_Chart
        }
        Fl_Box box_curve1 {user_data_type {void*}
          xywh {5 14 805 206} color 7
          code0 {\#include <FL/Fl_Chart.H>}
          code1 {InitializeChart(box_curve1,1);}
          class Fl_Chart
        }
        Fl_Box box_curve2 {user_data_type {void*}
          xywh {5 14 805 206} color 7
          code0 {\#include <FL/Fl_Chart.H>}
          code1 {InitializeChart(box_curve2,2);}
          class Fl_Chart
        }
        Fl_Box box_axe_abs {user_data_type {void*}
          xywh {5 14 805 207} color 7 align 1
          code0 {\#include <FL/Fl_Chart.H>}
          code1 {InitializeChart(box_axe_abs,-1);}
          class Fl_Chart
        }
      }
      Fl_Group {} {open
        xywh {520 220 295 220}
      } {
        Fl_Text_Display time_total {
          xywh {525 375 255 55} box NO_BOX color 214
          code0 {\#include <FL/Fl_Text_Buffer.H>}
          code1 {\#include <FL/Fl_Text_Display.H>}
        }
        Fl_Browser table_time {
          label Time
          xywh {535 240 280 115} labelfont 3 align 1
          code0 {\#include <FL/Fl_Browser.H>}
        }
      }
      Fl_Group {} {open
        xywh {200 225 325 255}
      } {
        Fl_Browser table_error {
          label Error
          xywh {245 240 280 180} labelfont 3 align 1
          code0 {\#include <FL/Fl_Browser.H>}
        }
      }
    }
  }
  Function {show(int argc, char **argv)} {open
  } {
    code {\#ifdef WIN32
	mainWindow->icon((char*)LoadIcon(fl_display, MAKEINTRESOURCE(1)));
\#endif	
mainWindow->show(argc, argv);
mainWindow->size_range(629,659);} {}
  }
  Function {cam_show()} {} {
    code {camWindow->show();
Cam_near->value(MT->cam_getnear());
Cam_far->value(MT->cam_getfar());
Cam_tx->value(MT->cam_gettx());
Cam_ty->value(MT->cam_getty());
Cam_tz->value(MT->cam_gettz());
Cam_az->value(MT->cam_getaz());
Cam_el->value(MT->cam_getel());
Cam_tw->value(MT->cam_gettw());} {}
  }
  Function {cam_hide()} {} {
    code {camWindow->hide();} {}
  }
  Function {options_lc_show()} {} {
    code {Fl_Color c;
uchar r,g,b;

int sides =0;

Diffuse->value(MT->GetDiffuse());
Ambiant->value(MT->GetAmbiant());
Specular->value(MT->GetSpecular());

MT->color_getbackcolor(&r,&g,&b);
c = fl_rgb_color(r,g,b);
Back_Color->color(c);
Back_Color->redraw();
MT->color_getgridcolor(&r,&g,&b);
c = fl_rgb_color(r,g,b);
Grid_Color->color(c);
Grid_Color->redraw();
MT->color_getobjcolor(&r,&g,&b);
c = fl_rgb_color(r,g,b);
Obj_Color->color(c);
Obj_Color->redraw();


sides = MT->Mesh_Get2SidesLightning();
cb_enable_2sides->value(sides);

opt_lc_Window->show();} {}
  }
  Function {options_lc_hide()} {} {
    code {opt_lc_Window->hide();} {}
  }
  Function {options_lm_show()} {} {
    code {int landmark_type;
int landmark_type2;
Landmark_Size2->value(MT->Mesh_GetLandmarkSize());
landmark_type = MT->Mesh_GetLandmarkType();
landmark_type2=0;
if (landmark_type==0){landmark_type2=1;}
pt_sphere->value(landmark_type);
pt_needle->value(landmark_type2);


Flag_g_length->value(MT->get_g_flag_length());
uchar r,g,b;
Fl_Color c;
MT->get_g_flag_color(&r,&g,&b);
c = fl_rgb_color(r,g,b);
Flag_g_colour->color(c);
Flag_g_colour->redraw();

opt_lm_Window->show();} {}
  }
  Function {options_lm_hide()} {} {
    code {opt_lm_Window->hide();} {}
  }
  Function {options_rd_show()} {} {
    code {Fl_Color c;
uchar r,g,b;
int landmark_type;
int landmark_type2;
int move_cm;
int fov_adapt;
int move_cm2;
int fov_adapt2;
int auto_zoom;
int auto_zoom2;
int sides =0;
int auto_delete;
int auto_delete2;
landmark_type2=0;
int all=0;
int all2=0;
all = MT->Get_Display_All();
if (all ==0){all2=1;}

rb_show_all->value(all);
rb_show_point_cloud->value(all2);
Diffuse->value(MT->GetDiffuse());
Ambiant->value(MT->GetAmbiant());
Specular->value(MT->GetSpecular());

MT->color_getbackcolor(&r,&g,&b);
c = fl_rgb_color(r,g,b);
Back_Color->color(c);
Back_Color->redraw();
MT->color_getgridcolor(&r,&g,&b);
c = fl_rgb_color(r,g,b);
Grid_Color->color(c);
Grid_Color->redraw();
MT->color_getobjcolor(&r,&g,&b);
c = fl_rgb_color(r,g,b);
Obj_Color->color(c);
Obj_Color->redraw();

Landmark_Size2->value(MT->Mesh_GetLandmarkSize());
landmark_type = MT->Mesh_GetLandmarkType();
if (landmark_type==0){landmark_type2=1;}
pt_sphere->value(landmark_type);
pt_needle->value(landmark_type2);


move_cm = MT->Mesh_GetOpeningBehaviour();
move_cm2=0;
if (move_cm==0){move_cm2=1;}
rb_cm->value(move_cm);
rb_cm2->value(move_cm2);


fov_adapt = MT->Get_fov_adapt();
fov_adapt2=0;
if (fov_adapt==0){fov_adapt2=1;}
zm_adapt->value(fov_adapt);
zm_keep->value(fov_adapt2);



auto_zoom = MT->Mesh_GetZoomBehaviour();
auto_zoom2=0;
if (auto_zoom==0){auto_zoom2=1;}
rb_cam->value(auto_zoom);
rb_cam2->value(auto_zoom2);

auto_delete = MT->Mesh_GetAutoDelete();
auto_delete2=0;
if (auto_delete ==0){auto_delete2=1;}
rb_delete_orig->value(auto_delete);
rb_keep_orig->value(auto_delete2);



sides = MT->Mesh_Get2SidesLightning();
cb_enable_2sides->value(sides);

opt_rd_Window->show();} {}
  }
  Function {options_rd_hide()} {} {
    code {opt_rd_Window->hide();} {}
  }
  Function {options_show()} {} {
    code {int move_cm;
int move_cm2;

int auto_zoom;
int auto_zoom2;
int auto_delete;
int auto_delete2;

move_cm = MT->Mesh_GetOpeningBehaviour();
move_cm2=0;
if (move_cm==0){move_cm2=1;}
rb_cm->value(move_cm);
rb_cm2->value(move_cm2);

auto_zoom = MT->Mesh_GetZoomBehaviour();
auto_zoom2=0;
if (auto_zoom==0){auto_zoom2=1;}
rb_cam->value(auto_zoom);
rb_cam2->value(auto_zoom2);

auto_delete = MT->Mesh_GetAutoDelete();
auto_delete2=0;
if (auto_delete ==0){auto_delete2=1;}
rb_delete_orig->value(auto_delete);
rb_keep_orig->value(auto_delete2);

optWindow->show();} {}
  }
  Function {options_hide()} {} {
    code {optWindow->hide();} {}
  }
  Function {handle(int event)} {} {
    code {} {}
  }
  Function {Displaymode(int mode)} {} {
    code {MT->SetDisplayMode(mode);
MT->redraw();} {}
  }
  Function {mat_show()} {} {
    code {float m1[16];
float m2[16];
std::string Name;

int ok;
matWindow->show();

Name = MT->get_matrix(m1,m2);

if (Name.length()>0)
{
	M2_00->value(m2[0]);
	M2_01->value(m2[1]);
	M2_02->value(m2[2]);
	M2_03->value(m2[3]);
	M2_10->value(m2[4]);
	M2_11->value(m2[5]);
	M2_12->value(m2[6]);
	M2_13->value(m2[7]);
	M2_20->value(m2[8]);
	M2_21->value(m2[9]);
	M2_22->value(m2[10]);
	M2_23->value(m2[11]);
	M2_30->value(m2[12]);
	M2_31->value(m2[13]);
	M2_32->value(m2[14]);
	M2_33->value(m2[15]);

	M1_00->value(m1[0]);
	M1_01->value(m1[1]);
	M1_02->value(m1[2]);
	M1_03->value(m1[3]);
	M1_10->value(m1[4]);
	M1_11->value(m1[5]);
	M1_12->value(m1[6]);
	M1_13->value(m1[7]);
	M1_20->value(m1[8]);
	M1_21->value(m1[9]);
	M1_22->value(m1[10]);
	M1_23->value(m1[11]);
	M1_30->value(m1[12]);
	M1_31->value(m1[13]);
	M1_32->value(m1[14]);
	M1_33->value(m1[15]);
}
//MyName->insert_position(0);
//MyName->insert(Name);
//MyName->buffer(Name);
MyName->value(Name.c_str());} {}
  }
  Function {mat_hide()} {} {
    code {matWindow->hide();} {}
  }
  Function {version_show()} {} {
    code {versionWindow->show();
//Version->value(MT->GetVersion());
//Version->insert_position(1);
//Version->insert("Rourou");
Version->value(MT->GetVersion());} {}
  }
  Function {version_hide()} {} {
    code {versionWindow->hide();} {}
  }
  Function {smooth_show()} {} {
    code {smoothWindow->show();} {}
  }
  Function {smooth_hide()} {} {
    code {smoothWindow->hide();} {}
  }
  Function {blend_show()} {} {
    code {blendWindow->show();
Alpha_value->value(MT->Get_Blend());} {}
  }
  Function {blend_hide()} {} {
    code {blendWindow->hide();} {}
  }
  Function {grid_size_show()} {} {
    code {gridsizeWindow->show();
grid_size_value->value(MT->Get_Grid_Size());} {}
  }
  Function {grid_size_hide()} {} {
    code {gridsizeWindow->hide();} {}
  }
  Function {zoomScaleWindow_show()} {} {
    code {zoomScaleWindow->show();
TF100pixels_in_mm_value->value(MT->Get_100pixels_in_mm());} {}
  }
  Function {zoomScaleWindow_hide()} {} {
    code {zoomScaleWindow->hide();} {}
  }
  Function {curv_show()} {} {
    code {curvWindow->show();} {}
  }
  Function {curv_hide()} {} {
    code {curvWindow->hide();} {}
  }
  Function {delete_show()} {} {
    code {deleteWindow->show();} {}
  }
  Function {delete_hide()} {} {
    code {deleteWindow->hide();} {}
  }
  Function {def_show()} {} {
    code {defWindow->show();} {}
  }
  Function {def_hide()} {} {
    code {defWindow->hide();} {}
  }
  Function {lmcur_show()} {} {
    code {LMcurveWindow->show();} {}
  }
  Function {lmcur_hide()} {} {
    code {LMcurveWindow->hide();} {}
  }
  Function {delete2_show()} {} {
    code {deleteWindow2->show();} {}
  }
  Function {delete2_hide()} {} {
    code {deleteWindow2->hide();} {}
  }
  Function {movehandles_show()} {} {
    code {movehandlesWindow->show();} {}
  }
  Function {movehandles_hide()} {} {
    code {movehandlesWindow->hide();} {}
  }
  Function {stl_show()} {} {
    code {STLSaveWindow->show();} {}
  }
  Function {stl_hide()} {} {
    code {STLSaveWindow->hide();} {}
  }
  Function {vtk_show()} {} {
    code {VTKSaveWindow->show();} {}
  }
  Function {vtk_hide()} {} {
    code {VTKSaveWindow->hide();} {}
  }
  Function {obj_show()} {} {
    code {OBJSaveWindow->show();} {}
  }
  Function {obj_hide()} {} {
    code {OBJSaveWindow->hide();} {}
  }
  Function {ply_show()} {} {
    code {PLYSaveWindow->show();} {}
  }
  Function {ply_hide()} {} {
    code {PLYSaveWindow->hide();} {}
  }
  Function {decimate_show()} {} {
    code {decimateWindow->show();} {}
  }
  Function {decimate_hide()} {} {
    code {decimateWindow->hide();} {}
  }
  Function {lmk_show()} {open
  } {
    code {LMKSaveNormal->show();} {}
  }
  Function {lmk_hide()} {} {
    code {LMKSaveNormal->hide();} {}
  }
  Function {lmk_show2()} {} {
    code {LMKSaveTarget->show();} {}
  }
  Function {lmk_hide2()} {} {
    code {LMKSaveTarget->hide();} {}
  }
  Function {thickness_show()} {} {
    code {thicknessWindow->show();} {}
  }
  Function {thickness_hide()} {} {
    code {thicknessWindow->hide();} {}
  }
  Function {sc_show()} {open
  } {
    code {scWindow->show();
std::vector<std::string> scalar_list= MT->Get_Scalar_List();
sc_active->clear();
int active_scalar = MT->Get_Active_Scalar();
/*for(int t=0;t<scalar_list.size();t++){
	sc_active->add(scalar_list.at(t).c_str());

     }*/
     
sc_active->add("Depth");
sc_active->add("Maximum_Curvature");
sc_active->add("Minimum_Curvature");
sc_active->add("Gauss_Curvature");
sc_active->add("Mean_Curvature");
//sc_active->add("Tags");
sc_active->add("Thickness");



if (active_scalar>=0)
{
	sc_active->value(active_scalar);
}
	// 0 => depth
	// 1 =>	"Maximum_Curvature"
	// 2 => "Minimum_Curvature"
	// 3 => "Gauss_Curvature"
	// 4 => "Mean_Curvature"
	// 5 => "Thickness"


sc_cs->clear();
int color_scale_id = MT->GetColorScaleId();  
sc_cs->add("Rainbow");
//sc_cs->add("Tags");
sc_cs->add("Red and Yellow");

if (color_scale_id>=0)
{
	sc_cs->value(color_scale_id);
}

//if (color_scale_id !=1)
//{
scmin->value(MT->Get_sc_min());
scmax->value(MT->Get_sc_max());
Max->value(MT->Get_sc_max());
Min->value(MT->Get_sc_min());
Max_sc->value(MT->scalars_get_max());
Min_sc->value(MT->scalars_get_min());
//}
/*else
{
scmin->value(0);
scmax->value(24);
Max->value(0);
Min->value(24);
Max_sc->value(0);
Min_sc->value(24);

}*/
sc_update();} {}
  }
  Function {sc_hide()} {} {
    code {scWindow->hide();} {}
  }
  Function {sc_update()} {} {
    code {int color_scale_id = MT->GetColorScaleId();  
//if (color_scale_id !=1)
//{
	scmin->maximum ((MT->Get_sc_max()+MT->Get_sc_min())/2);
	scmin->minimum ((3*MT->Get_sc_min()-MT->Get_sc_max())/2);
	scmax->minimum ((MT->Get_sc_max()+MT->Get_sc_min())/2);
	scmax->maximum ((3*MT->Get_sc_max()-MT->Get_sc_min())/2);
	Max->value (MT->Get_sc_max());
	Min->value (MT->Get_sc_min());
	scmax->redraw();
	scmin->redraw();
//}} {}
  }
  Function {sc_update2()} {} {
    code {Max_sc->value(MT->scalars_get_max());
Min_sc->value(MT->scalars_get_min());} {}
  }
  Function {tags_show()} {} {
    code {tags_update();

tagsWindow->show();} {}
  }
  Function {tags_update()} {} {
    code {uchar r,g,b;
Fl_Color c;
MT->get_tag_color(0,&r,&g,&b);
c = fl_rgb_color(r,g,b);
Tag_00->color(c);
Tag_00->redraw();
Tag_text_00->value(MT->get_tag_label(0).c_str());

MT->get_tag_color(1,&r,&g,&b);
c = fl_rgb_color(r,g,b);
Tag_01->color(c);
Tag_01->redraw();
Tag_text_01->value(MT->get_tag_label(1).c_str());

MT->get_tag_color(2,&r,&g,&b);
c = fl_rgb_color(r,g,b);
Tag_02->color(c);
Tag_02->redraw();
Tag_text_02->value(MT->get_tag_label(2).c_str());

MT->get_tag_color(3,&r,&g,&b);
c = fl_rgb_color(r,g,b);
Tag_03->color(c);
Tag_03->redraw();
Tag_text_03->value(MT->get_tag_label(3).c_str());

MT->get_tag_color(4,&r,&g,&b);
c = fl_rgb_color(r,g,b);
Tag_04->color(c);
Tag_04->redraw();
Tag_text_04->value(MT->get_tag_label(4).c_str());

MT->get_tag_color(5,&r,&g,&b);
c = fl_rgb_color(r,g,b);
Tag_05->color(c);
Tag_05->redraw();
Tag_text_05->value(MT->get_tag_label(5).c_str());

MT->get_tag_color(6,&r,&g,&b);
c = fl_rgb_color(r,g,b);
Tag_06->color(c);
Tag_06->redraw();
Tag_text_06->value(MT->get_tag_label(6).c_str());

MT->get_tag_color(7,&r,&g,&b);
c = fl_rgb_color(r,g,b);
Tag_07->color(c);
Tag_07->redraw();
Tag_text_07->value(MT->get_tag_label(7).c_str());

MT->get_tag_color(8,&r,&g,&b);
c = fl_rgb_color(r,g,b);
Tag_08->color(c);
Tag_08->redraw();
Tag_text_08->value(MT->get_tag_label(8).c_str());

MT->get_tag_color(9,&r,&g,&b);
c = fl_rgb_color(r,g,b);
Tag_09->color(c);
Tag_09->redraw();
Tag_text_09->value(MT->get_tag_label(9).c_str());

MT->get_tag_color(10,&r,&g,&b);
c = fl_rgb_color(r,g,b);
Tag_10->color(c);
Tag_10->redraw();
Tag_text_10->value(MT->get_tag_label(10).c_str());

MT->get_tag_color(11,&r,&g,&b);
c = fl_rgb_color(r,g,b);
Tag_11->color(c);
Tag_11->redraw();
Tag_text_11->value(MT->get_tag_label(11).c_str());

MT->get_tag_color(12,&r,&g,&b);
c = fl_rgb_color(r,g,b);
Tag_12->color(c);
Tag_12->redraw();
Tag_text_12->value(MT->get_tag_label(12).c_str());

MT->get_tag_color(13,&r,&g,&b);
c = fl_rgb_color(r,g,b);
Tag_13->color(c);
Tag_13->redraw();
Tag_text_13->value(MT->get_tag_label(13).c_str());


MT->get_tag_color(14,&r,&g,&b);
c = fl_rgb_color(r,g,b);
Tag_14->color(c);
Tag_14->redraw();
Tag_text_14->value(MT->get_tag_label(14).c_str());

MT->get_tag_color(15,&r,&g,&b);
c = fl_rgb_color(r,g,b);
Tag_15->color(c);
Tag_15->redraw();
Tag_text_15->value(MT->get_tag_label(15).c_str());

MT->get_tag_color(16,&r,&g,&b);
c = fl_rgb_color(r,g,b);
Tag_16->color(c);
Tag_16->redraw();
Tag_text_16->value(MT->get_tag_label(16).c_str());

MT->get_tag_color(17,&r,&g,&b);
c = fl_rgb_color(r,g,b);
Tag_17->color(c);
Tag_17->redraw();
Tag_text_17->value(MT->get_tag_label(17).c_str());

MT->get_tag_color(18,&r,&g,&b);
c = fl_rgb_color(r,g,b);
Tag_18->color(c);
Tag_18->redraw();
Tag_text_18->value(MT->get_tag_label(18).c_str());

MT->get_tag_color(19,&r,&g,&b);
c = fl_rgb_color(r,g,b);
Tag_19->color(c);
Tag_19->redraw();
Tag_text_19->value(MT->get_tag_label(19).c_str());

MT->get_tag_color(20,&r,&g,&b);
c = fl_rgb_color(r,g,b);
Tag_20->color(c);
Tag_20->redraw();
Tag_text_20->value(MT->get_tag_label(20).c_str());

MT->get_tag_color(21,&r,&g,&b);
c = fl_rgb_color(r,g,b);
Tag_21->color(c);
Tag_21->redraw();
Tag_text_21->value(MT->get_tag_label(21).c_str());

MT->get_tag_color(22,&r,&g,&b);
c = fl_rgb_color(r,g,b);
Tag_22->color(c);
Tag_22->redraw();
Tag_text_22->value(MT->get_tag_label(22).c_str());

MT->get_tag_color(23,&r,&g,&b);
c = fl_rgb_color(r,g,b);
Tag_23->color(c);
Tag_23->redraw();
Tag_text_23->value(MT->get_tag_label(23).c_str());

MT->get_tag_color(24,&r,&g,&b);
c = fl_rgb_color(r,g,b);
Tag_24->color(c);
Tag_24->redraw();
Tag_text_24->value(MT->get_tag_label(24).c_str());

rb_tag00->value(0);
rb_tag01->value(0);
rb_tag02->value(0);
rb_tag03->value(0);
rb_tag04->value(0);
rb_tag05->value(0);
rb_tag06->value(0);
rb_tag07->value(0);
rb_tag08->value(0);
rb_tag09->value(0);
rb_tag10->value(0);
rb_tag11->value(0);
rb_tag12->value(0);
rb_tag13->value(0);
rb_tag14->value(0);
rb_tag15->value(0);
rb_tag16->value(0);
rb_tag17->value(0);
rb_tag18->value(0);
rb_tag19->value(0);
rb_tag20->value(0);
rb_tag21->value(0);
rb_tag22->value(0);
rb_tag23->value(0);
rb_tag24->value(0);

int active_tag = MT->Get_Active_Tag();
if (active_tag ==0)
{rb_tag00->value(1);}
else if (active_tag ==1)
{rb_tag01->value(1);}
else if (active_tag ==2)
{rb_tag02->value(1);}
else if (active_tag ==3)
{rb_tag03->value(1);}
else if (active_tag ==4)
{rb_tag04->value(1);}
else if (active_tag ==5)
{rb_tag05->value(1);}
else if (active_tag ==6)
{rb_tag06->value(1);}
else if (active_tag ==7)
{rb_tag07->value(1);}
else if (active_tag ==8)
{rb_tag08->value(1);}
else if (active_tag ==9)
{rb_tag09->value(1);}
else if (active_tag ==10)
{rb_tag10->value(1);}
else if (active_tag ==11)
{rb_tag11->value(1);}
else if (active_tag ==12)
{rb_tag12->value(1);}
else if (active_tag ==13)
{rb_tag13->value(1);}
else if (active_tag ==14)
{rb_tag14->value(1);}
else if (active_tag ==15)
{rb_tag15->value(1);}
else if (active_tag ==16)
{rb_tag16->value(1);}
else if (active_tag ==17)
{rb_tag17->value(1);}
else if (active_tag ==18)
{rb_tag18->value(1);}
else if (active_tag ==19)
{rb_tag19->value(1);}
else if (active_tag ==20)
{rb_tag20->value(1);}
else if (active_tag ==21)
{rb_tag21->value(1);}
else if (active_tag ==22)
{rb_tag22->value(1);}
else if (active_tag ==23)
{rb_tag23->value(1);}
else if (active_tag ==24)
{rb_tag24->value(1);}
 

Alpha_00->value(MT->get_tag_alpha(0));
Alpha_01->value(MT->get_tag_alpha(1));
Alpha_02->value(MT->get_tag_alpha(2));
Alpha_03->value(MT->get_tag_alpha(3));
Alpha_04->value(MT->get_tag_alpha(4));
Alpha_05->value(MT->get_tag_alpha(5));
Alpha_06->value(MT->get_tag_alpha(6));
Alpha_07->value(MT->get_tag_alpha(7));
Alpha_08->value(MT->get_tag_alpha(8));
Alpha_09->value(MT->get_tag_alpha(9));
Alpha_10->value(MT->get_tag_alpha(10));
Alpha_11->value(MT->get_tag_alpha(11));
Alpha_12->value(MT->get_tag_alpha(12));
Alpha_13->value(MT->get_tag_alpha(13));
Alpha_14->value(MT->get_tag_alpha(14));
Alpha_15->value(MT->get_tag_alpha(15));
Alpha_16->value(MT->get_tag_alpha(16));
Alpha_17->value(MT->get_tag_alpha(17));
Alpha_18->value(MT->get_tag_alpha(18));
Alpha_19->value(MT->get_tag_alpha(19));
Alpha_20->value(MT->get_tag_alpha(20));
Alpha_21->value(MT->get_tag_alpha(21));
Alpha_22->value(MT->get_tag_alpha(22));
Alpha_23->value(MT->get_tag_alpha(23));
Alpha_24->value(MT->get_tag_alpha(24));} {}
  }
  Function {tags_hide()} {} {
    code {tagsWindow->hide();} {}
  }
  Function {mergetags_show()} {} {
    code {merge_source->clear();

merge_source->add("Tag 00");
merge_source->add("Tag 01");
merge_source->add("Tag 02");
merge_source->add("Tag 03");
merge_source->add("Tag 04");
merge_source->add("Tag 05");
merge_source->add("Tag 06");
merge_source->add("Tag 07");
merge_source->add("Tag 08");
merge_source->add("Tag 09");

merge_source->add("Tag 10");
merge_source->add("Tag 11");
merge_source->add("Tag 12");
merge_source->add("Tag 13");
merge_source->add("Tag 14");
merge_source->add("Tag 15");
merge_source->add("Tag 16");
merge_source->add("Tag 17");
merge_source->add("Tag 18");
merge_source->add("Tag 19");

merge_source->add("Tag 20");
merge_source->add("Tag 21");
merge_source->add("Tag 22");
merge_source->add("Tag 23");
merge_source->add("Tag 24");


merge_target->clear();

merge_target->add("Tag 00");
merge_target->add("Tag 01");
merge_target->add("Tag 02");
merge_target->add("Tag 03");
merge_target->add("Tag 04");
merge_target->add("Tag 05");
merge_target->add("Tag 06");
merge_target->add("Tag 07");
merge_target->add("Tag 08");
merge_target->add("Tag 09");

merge_target->add("Tag 10");
merge_target->add("Tag 11");
merge_target->add("Tag 12");
merge_target->add("Tag 13");
merge_target->add("Tag 14");
merge_target->add("Tag 15");
merge_target->add("Tag 16");
merge_target->add("Tag 17");
merge_target->add("Tag 18");
merge_target->add("Tag 19");

merge_target->add("Tag 20");
merge_target->add("Tag 21");
merge_target->add("Tag 22");
merge_target->add("Tag 23");
merge_target->add("Tag 24");

mergetagsWindow->show();} {}
  }
  Function {mergetags_hide()} {} {
    code {mergetagsWindow->hide();} {}
  }
  Function {extractregion_show()} {} {
    code {extractregionWindow->show();} {}
  }
  Function {extractregion_hide()} {} {
    code {extractregionWindow->hide();} {}
  }
  Function {extractrange_show()} {} {
    code {sc_active2->clear();
int active_scalar = MT->Get_Active_Scalar();
/*for(int t=0;t<scalar_list.size();t++){
	sc_active->add(scalar_list.at(t).c_str());

     }*/
     
sc_active2->add("Depth");
sc_active2->add("Maximum_Curvature");
sc_active2->add("Minimum_Curvature");
sc_active2->add("Gauss_Curvature");
sc_active2->add("Mean_Curvature");
sc_active2->add("Thickness");

extractrangeWindow->show();} {}
  }
  Function {extractrange_hide()} {} {
    code {extractrangeWindow->hide();} {}
  }
  Function {extractallregions_show()} {} {
    code {extractallregionsWindow->show();} {}
  }
  Function {extractallregions_hide()} {} {
    code {extractallregionsWindow->hide();} {}
  }
  Function {decompose_show()} {} {
    code {decomposeWindow->show();} {}
  }
  Function {decompose_hide()} {} {
    code {decomposeWindow->hide();} {}
  }
  Function {deleteregion_show()} {} {
    code {deleteregionWindow->show();} {}
  }
  Function {deleteregion_hide()} {} {
    code {deleteregionWindow->hide();} {}
  }
  Function {flag_show()} {} {
    code {flagWindow->show();
flag_update();
/*label = MT->get_flag();
Flag_Label->value(label.c_str());
Flag_Length->value(MT->get_flag_length());
uchar r,g,b;
Fl_Color c;
MT->get_flag_color(&r,&g,&b);
c = fl_rgb_color(r,g,b);
Flag_Colour->color(c);
Flag_Colour->redraw();*/} {}
  }
  Function {flag_hide()} {} {
    code {flagWindow->hide();} {}
  }
  Function {flag_update()} {} {
    code {std::string label ="Flag";
label = MT->get_flag();
Flag_Label->value(label.c_str());
Flag_Length->value(MT->get_flag_length());
uchar r,g,b;
Fl_Color c;
MT->get_flag_color(&r,&g,&b);
c = fl_rgb_color(r,g,b);
Flag_Colour->color(c);
Flag_Colour->redraw();} {}
  }
  Function {thickness2_show()} {} {
    code {std::vector<std::string> name_list= MT->Get_Selected_Names_List();
th_source->clear();
th_target->clear();

for(int n=0;n<name_list.size();n++)
{
	th_source->add(name_list.at(n).c_str());
	th_target->add(name_list.at(n).c_str());
}
thicknessWindow2->show();} {}
  }
  Function {thickness2_hide()} {} {
    code {thicknessWindow2->hide();} {}
  }
  Function {fillholes_show()} {} {
    code {fillholesWindow->show();} {}
  }
  Function {fillholes_hide()} {} {
    code {fillholesWindow->hide();} {}
  }
  Function {fillholes2_show(int tag_id)} {} {
    code {fillholesWindow2->show();
HOLES2_tagid->value(tag_id);} {}
  }
  Function {fillholes2_hide()} {} {
    code {fillholesWindow2->hide();} {}
  }
  Function {densify_show()} {} {
    code {densifyWindow->show();} {}
  }
  Function {densify_hide()} {} {
    code {densifyWindow->hide();} {}
  }
  Function {name_show()} {} {
    code {float m1[16];
float m2[16];

std::string label ="Name";
nameWindow->show();
label = MT->get_flag();


label = MT->get_matrix(m1,m2);

Name_Label->value(label.c_str());} {}
  }
  Function {name_hide()} {} {
    code {nameWindow->hide();} {}
  }
  Function {all_flag_show()} {} {
    code {allflagWindow->show();

All_Flag_Length->value(MT->get_g_flag_length());
uchar r,g,b;
Fl_Color c;
MT->get_g_flag_color(&r,&g,&b);
c = fl_rgb_color(r,g,b);
All_Flag_Colour->color(c);
All_Flag_Colour->redraw();} {}
  }
  Function {all_flag_hide()} {} {
    code {allflagWindow->hide();} {}
  }
  Function {tags_convert_show()} {} {
    code {tags_convert_Window->show();} {}
  }
  Function {tags_convert_hide()} {} {
    code {tags_convert_Window->hide();} {}
  }
  Function {view_hide_show()} {} {
    code {view_hide_refresh();
ViewHideObjectsWindow->show();} {}
  }
  Function {view_hide_hide()} {} {
    code {ViewHideObjectsWindow->hide();} {}
  }
  Function {view_hide_refresh()} {} {
    code {// get first object...

std::vector<std::string> object_names;
std::vector<int> object_view_values;
MT->get_object_names_and_view_values(object_names,object_view_values);


// clear Check_browser
Check_browser->clear();

// populate
for(int i = 0; i < object_names.size(); i++) {
      Check_browser->add (object_names[i].c_str(),object_view_values[i]);    
}} {}
  }
  Function {view_hide_ok()} {} {
    code {// construc new values vector

std::vector<int> object_new_view_values;
int num_lines = Check_browser->nitems();
for (int i=1; i<=num_lines;i++)
{
	object_new_view_values.push_back(Check_browser->checked(i));
}
// Inform MT object
MT->set_object_view_values(object_new_view_values);
object_new_view_values.clear();
MT->redraw();} {}
  }
  Function {orientation_show()} {} {
    code {orientationWindow->show();
orientation_update();} {}
  }
  Function {orientation_hide()} {} {
    code {orientationWindow->hide();} {}
  }
  Function {orientation_update()} {} {
    code {std::string z1 ="z+";
std::string z2 ="z-";
std::string y1 ="y+";
std::string y2 ="y-";
std::string x1 ="x+";
std::string x2 ="x-";
MT->get_orientation_labels(z1,z2,y1,y2,x1,x2);

z_plus_l->value(z1.c_str());
z_minus_l->value(z2.c_str());
y_plus_l->value(y1.c_str());
y_minus_l->value(y2.c_str());
x_plus_l->value(x1.c_str());
x_minus_l->value(x2.c_str());} {}
  }
  Function {lmkselect_show()} {} {
    code {lmkselectWindow->show();} {}
  }
  Function {lmkselect_hide()} {} {
    code {lmkselectWindow->hide();} {}
  }
  Function {lmkrangeselect_hide()} {} {
    code {lmkrangeselectWindow->hide();} {}
  }
  Function {lmkrangeselect_show()} {} {
    code {lmkrangeselectWindow->show();} {}
  }
  Function {registration_ICP_hide()} {} {
    code {Registration_Window->hide();} {}
  }
  Function {registration_ICP_show()} {open
  } {
    code {if(MT->bool_ICP){
	icp_source_name->clear();
	icp_target_name->clear();
	icp_source_name->add(MT->registration->Source->name.c_str());
	icp_target_name->add(MT->registration->Target->name.c_str());
	icp_source_name->value(1);
	icp_target_name->value(1);
}else{
	std::vector<std::string> name_list= MT->Get_Selected_Names_List();
	icp_source_name->clear();
	icp_target_name->clear();

	for(int n=0;n<name_list.size();n++)
	{
		icp_source_name->add(name_list.at(n).c_str());
		icp_target_name->add(name_list.at(n).c_str());
	}
}
Registration_Window->show();} {}
  }
  Function {errors_curve_ICP_hide()} {} {
    code {Errors_curv_Window->hide();} {}
  }
  Function {errors_curv_ICP_show()} {open
  } {
    code {Errors_curv_Window->show();
InitializeChart(box_curve,0);
InitializeChart(box_curve1,1);
InitializeChart(box_curve2,2);
InitializeChart(box_axe_abs,-1);
Display_Text(caption_matching,"vertice",FL_RED);
Display_Text(caption_landmarks,"landmarks",FL_GREEN);
Display_Text(caption_total,"vertice\\n+landmarks",FL_BLUE);
const char*text_mode="(Rl) : Rigid Landmarks\\n(Rv) : Rigid Vertice\\n(Sl) : Similitude Landmarks\\n(Sv) : Similitude Vertice\\n(A) : Affine\\n(LA) : Locally Affine";
Display_Text(caption_textmode,text_mode,FL_BLACK);

Initialize_time_Table(table_time);
Initialize_error_Table(table_error);} {}
  }
  Function {InitializeChart(Fl_Chart * chart,int ind)} {open return_type void
  } {
    code {chart->clear();
float height=125.0;
if(ind!=-1)
	chart->bounds(-10,height); 
else
	chart->bounds(0, height); 
chart->type(FL_LINE_CHART);

if(MT->bool_ICP==true){
vtkSmartPointer<vtkFloatArray> tab =vtkSmartPointer<vtkFloatArray>::New();
tab->SetNumberOfComponents(5);
tab->DeepCopy(MT->GetErrors_ICP());
 int size =tab->GetNumberOfTuples();
double val;
static char val_str[20];
char *val_mode,*val_mode_succ;
int mode=0;


int scale=Update_Chart_scale(tab,height);

for (int i=0;i<size;i++) 
{ 

  if(ind==-1){ //axe des abcisses avec legende
     mode=(int)tab->GetComponent(i,0);
     val_mode=select_mode_text(tab,i);
     sprintf(val_str, "%d(%s)", i,val_mode);
     val=0;
  }
  else{
    val =tab->GetComponent(i,ind+1)*scale; //valeur  tracer dans le graphique
  }
  
  //recupre les modes
  val_mode=select_mode_text(tab,i);
  val_mode_succ=select_mode_text(tab,i+1);
  if(ind == 0){// courbe des vetices
	if(strcmp(val_mode,val_mode_succ)==0 || (strcmp(val_mode,"Sv")==0 && strcmp(val_mode_succ,"A")==0) || (strcmp(val_mode,"A")==0 && strcmp(val_mode_succ,"LA")==0)) {
		chart->add(val,0,FL_RED);
	}
	else{
		chart->add(val,0,FL_WHITE);
	}
  }
   else{// courbe des landmark et des landmark+vertice
   
   	if(ind!=-1 && ( strcmp(val_mode,"A")==0 || strcmp(val_mode,"LA")==0 )&&  strcmp(val_mode_succ,"LA")==0 ){
   		 chart->add(val,0,FL_WHITE); 
   	}
   	else{
	  chart->add(val, (ind==-1)? val_str:0,(ind==1)? FL_GREEN :(ind==2) ? FL_BLUE:0); 
	 }

  }
 }
}} {}
  }
  Function {Display_Text(Fl_Text_Display *caption,const char* str,Fl_Color n)} {open
  } {
    code {Fl_Text_Buffer *buff = new Fl_Text_Buffer();
caption->buffer(buff);// attach text buffer to display widget
caption->textcolor(n);
buff->text(str);   // add some text to buffer} {}
  }
  Function {Initialize_time_Table(Fl_Browser *table)} {open return_type void
  } {
    code {table->clear();
std::ostringstream sTotaltime;
std::ostringstream sTotalIte;
std::string varTimeSum ="0";
std::string varIteSum ="0";
string sentence="";
const char* text;

if(MT->bool_ICP == true){
  	vtkSmartPointer<vtkFloatArray> time_array= vtkSmartPointer<vtkFloatArray>::New();
  	time_array->SetNumberOfComponents(4);
  	time_array->DeepCopy(MT->registration->time);
    	static int widths[] = { 150, 70, 50};  // widths for each column
  	table->column_widths(widths); // assign array to widget
  	table->column_char('\\t');     // use tab as the column character
  	table->add("MODE\\tTIME\\tNB_OF_ITE");
  	int mode_icp=0;
	int cpt_mode=0;
	float sumOftimes=0,sumOfIteration=0;
  	for(int i=0;i<time_array->GetNumberOfTuples();i++){
  		mode_icp=time_array->GetComponent(i, 0);
  		cpt_mode = time_array->GetComponent(i, 3);
  		//nom du mode
  		if(mode_icp == 6 ){
  			if(cpt_mode==0){
  				sentence ="Rigid Landmarks";
  			}else if (cpt_mode == 1){
  				sentence ="Rigid Vertice";
  			}
		}
  		if(mode_icp == 7 ){
  			if(cpt_mode==0){
  				sentence ="Similitude Landmarks";
  			}else if (cpt_mode == 1){
  				sentence ="Similitude Vertice";
  			}
  		}	
  		if(mode_icp == 12 )		
  			sentence = "Affine";
  		else if(mode_icp==20)	
  			sentence = "Locally affine";
  	
  		// somme d'itration et du temps
  		sumOftimes+= time_array->GetComponent(i, 1);
  		sumOfIteration+= time_array->GetComponent(i, 2);

		std::ostringstream sstream1;
		sstream1 << time_array->GetComponent(i, 1);
		std::string vartime = sstream1.str();
		std::ostringstream sstream2;
		sstream2 << time_array->GetComponent(i, 2);
		std::string varnbIte = sstream2.str();
		sentence += "\\t" + vartime + "\\t" + varnbIte;
		text = sentence.c_str();
		
  		table->add(text);// ajout la ligne dans le tableau
		sentence = "";
	}
	// affichage des sommes totales (itration et temps)
	sTotaltime << sumOftimes ;
	varTimeSum = sTotaltime.str();
	sTotalIte << sumOfIteration;
	varIteSum = sTotalIte.str();
	sentence ="Total::\\n\\tTimes : "+varTimeSum+" sec\\n\\tIterations : "+varIteSum;
	text=sentence.c_str();
	Display_Text(time_total,text,FL_BLACK);
 }
 sentence ="Total::\\n\\tTimes : "+varTimeSum+" sec\\n\\tIterations : "+varIteSum;
 text=sentence.c_str();
Display_Text(time_total,text,FL_BLACK);} {}
  }
  Function {Initialize_error_Table(Fl_Browser *table)} {open return_type void
  } {
    code {table->clear();
std::ostringstream sTotaltime;
std::ostringstream sTotalIte;
std::string varTimeSum ="0";
std::string varIteSum ="0";
string sentence="";
const char* text;

if(MT->bool_ICP == true){
  	vtkSmartPointer<vtkFloatArray> error_array= vtkSmartPointer<vtkFloatArray>::New();
  	error_array->SetNumberOfComponents(5);
  	error_array->DeepCopy(MT->registration->errors);
    	static int widths[] = { 150, 70, 50, 50};  // widths for each column
  	table->column_widths(widths); // assign array to widget
  	table->column_char('\\t');     // use tab as the column character
  	table->add("MODE\\tVERTICE\\tLAND\\tTOTAL");
  	int mode_icp=0;
	int cpt_mode=0;
	for(int i=0;i<error_array->GetNumberOfTuples();i++){
  		mode_icp=error_array->GetComponent(i, 0);
  		cpt_mode=error_array->GetComponent(i, 4);

  		if(mode_icp == 6 ){// RIGID
  			if(cpt_mode==0){
  				sentence ="Rigid Landmarks";	
  			}else if (cpt_mode == 1){
  				sentence ="Rigid Vertice";
  			}
  		}	
  		if(mode_icp == 7 ){// SIMILITUDE
  			if(cpt_mode==0){
  				sentence ="Similitude Landmarks";	
  			}else if (cpt_mode == 1){
  				sentence ="Similitude Vertice";
  			}
  		}	
  		if(mode_icp == 12 )		
  			sentence = "Affine";
  		else if(mode_icp==20)	
  			sentence = "Locally affine";
  	
  		for(int j=1;j<error_array->GetNumberOfComponents()-1;j++){
			std::ostringstream sstream;
			sstream << error_array->GetComponent(i, j);
			std::string var = sstream.str();
			sentence+= "\\t" + var;
		}
		text = sentence.c_str();
  		table->add(text);
		sentence = "";
	}
 }} {}
  }
  Function {select_mode_text(vtkSmartPointer<vtkFloatArray> tab,int i)} {open return_type {char *}
  } {
    code {static char *val_mode;
int mode =tab->GetComponent(i,0);
if(mode==6){//RIGID
	if(tab->GetComponent(i,1)!= tab->GetComponent(i,2))
		val_mode="Rv";
	else
		val_mode="Rl";
}

else if(mode==7){//SIMILITUDE
	if(tab->GetComponent(i,1)!= tab->GetComponent(i,2))
		val_mode="Sv";
	else
		val_mode="Sl";
}
else if(mode==12){// AFFINE
	val_mode="A";
}
else if(mode==20)
	val_mode="LA";
 return val_mode;  // retourne le nom du mode} {}
  }
  Function {Update_Chart_scale(vtkSmartPointer<vtkFloatArray> tab,float chart_height)} {open return_type int
  } {
    code {//on cherche la valeur maximum pour ajuster les courbures dans le graphique
int total_index=3;
int size=tab->GetNumberOfTuples();
float max=0;
for(int i=0;i<size;i++){
	if(max<tab->GetComponent(i,total_index)){
		max=tab->GetComponent(i,total_index);	
	}
}

return chart_height/max;} {}
  }
} 
